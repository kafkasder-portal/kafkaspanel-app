import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as t}from"./react-vendor-DCtPEfzS.js";import{D as a}from"./donations-Cs-DOdlb.js";import{M as s}from"./messages-BdWFJ_-b.js";import{u as n}from"./useSanitization-BwwbYezy.js";import"./auth-CY9yrbMl.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";import"./sanitization-C_isCIdH.js";import"./purify.es-CC9sp8hv.js";const r=[{id:"1",name:"ABC Şirketi",type:"şirket",contactPerson:"Mehmet Özkan",phone:"0212 555 0101",email:"mehmet@abc.com",address:"İstanbul, Türkiye",totalDonations:5e4,lastDonation:"2024-01-15",status:"aktif"},{id:"2",name:"Yardım Vakfı",type:"vakıf",contactPerson:"Ayşe Kaya",phone:"0312 555 0202",email:"ayse@yardimvakfi.org",address:"Ankara, Türkiye",totalDonations:75e3,lastDonation:"2024-01-10",status:"aktif"}];function l(){const[l,i]=t.useState(r),[o,d]=t.useState(""),[m,u]=t.useState(!1),[c,p]=t.useState(null),[x,h]=t.useState({name:"",type:"şirket",contactPerson:"",phone:"",email:"",address:""}),j=t.useMemo(()=>l.filter(e=>JSON.stringify(e).toLowerCase().includes(o.toLowerCase())),[l,o]),b=[{key:"name",header:"Kurum Adı"},{key:"type",header:"Tür",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("şirket"===a.type?"bg-blue-100 text-blue-800":"vakıf"===a.type?"bg-green-100 text-green-800":"dernek"===a.type?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:a.type})},{key:"contactPerson",header:"İletişim Kişisi"},{key:"phone",header:"Telefon"},{key:"email",header:"E-posta"},{key:"totalDonations",header:"Toplam Bağış",render:(e,t)=>`${t.totalDonations.toLocaleString("tr-TR")} ₺`},{key:"lastDonation",header:"Son Bağış"},{key:"status",header:"Durum",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("aktif"===a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a.status})},{key:"id",header:"İşlemler",render:(t,a)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k(a),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>y(a.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],k=e=>{p(e),h({name:e.name,type:e.type,contactPerson:e.contactPerson,phone:e.phone,email:e.email,address:e.address}),u(!0)},y=e=>{confirm("Bu kurumu silmek istediğinizden emin misiniz?")&&i(l.filter(t=>t.id!==e))},{sanitizeFormField:f,createSanitizedChangeHandler:v}=n();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Kurumlar"}),e.jsx("button",{onClick:()=>{p(null),h({name:"",type:"şirket",contactPerson:"",phone:"",email:"",address:""}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Kurum Ekle"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:o,onChange:e=>d(e.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Kurum adı, kişi, telefon veya e-posta ile ara..."}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Türler"}),e.jsx("option",{value:"şirket",children:"Şirket"}),e.jsx("option",{value:"vakıf",children:"Vakıf"}),e.jsx("option",{value:"dernek",children:"Dernek"}),e.jsx("option",{value:"kamu",children:"Kamu"})]}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"aktif",children:"Aktif"}),e.jsx("option",{value:"pasif",children:"Pasif"})]})]}),e.jsx(a,{columns:b,data:j})]}),e.jsx(s,{isOpen:m,onClose:()=>u(!1),title:c?"Kurum Düzenle":"Yeni Kurum Ekle",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault();const t={name:f(x.name,"text"),type:x.type,contactPerson:f(x.contactPerson,"text"),phone:f(x.phone,"phone"),email:f(x.email,"email"),address:f(x.address,"text")};if(c)i(l.map(e=>e.id===c.id?{...e,...t}:e));else{const e={id:Date.now().toString(),...t,totalDonations:0,lastDonation:"-",status:"aktif"};i([...l,e])}u(!1),p(null),h({name:"",type:"şirket",contactPerson:"",phone:"",email:"",address:""})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kurum Adı"}),e.jsx("input",{type:"text",value:x.name,onChange:v(e=>h({...x,name:e}),"text"),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tür"}),e.jsxs("select",{value:x.type,onChange:e=>h({...x,type:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"şirket",children:"Şirket"}),e.jsx("option",{value:"vakıf",children:"Vakıf"}),e.jsx("option",{value:"dernek",children:"Dernek"}),e.jsx("option",{value:"kamu",children:"Kamu"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İletişim Kişisi"}),e.jsx("input",{type:"text",value:x.contactPerson,onChange:v(e=>h({...x,contactPerson:e}),"text"),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:x.phone,onChange:v(e=>h({...x,phone:e}),"phone"),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),e.jsx("input",{type:"email",value:x.email,onChange:v(e=>h({...x,email:e}),"email"),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Adres"}),e.jsx("textarea",{value:x.address,onChange:v(e=>h({...x,address:e}),"text"),className:"w-full border rounded px-3 py-2",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:c?"Güncelle":"Ekle"})]})]})})]})}export{l as default};
