const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-DAFUqgph.js","assets/ui-vendor-B8g4ebjc.js","assets/react-vendor-DCtPEfzS.js","assets/form-vendor-CfNvelWt.js","assets/meetings-bbWcv5Hc.js","assets/dashboard-CJXjh513.js","assets/auth-9wZfjiou.js","assets/state-vendor-rPBjJaR_.js","assets/supabase-vendor-AMUhAiAi.js","assets/file-vendor-D5NpndWQ.js","assets/utils-vendor-DxpoukG0.js","assets/chart-vendor-BDEFy5qM.js","assets/dashboard-Dgihpmma.css","assets/messages-C4gZlbNu.js","assets/donations-Cc8AcqVz.js","assets/NotFound-CnSqmB1T.js","assets/DonationVault-DsP-9fmD.js","assets/Institutions-BM43rfO0.js","assets/useSanitization-BwwbYezy.js","assets/sanitization-C_isCIdH.js","assets/purify.es-CC9sp8hv.js","assets/CashDonations-Bl-R5qy8.js","assets/LazyCameraScanner-BDEB2jLr.js","assets/pdfExport-CmoZx5Sn.js","assets/BankDonations-vub51KA7.js","assets/CreditCardDonations-y8FG8eI4.js","assets/OnlineDonations-ikxPUTBY.js","assets/AdvancedSearchModal-CWC5VjJG.js","assets/DonationNumbers-DMXEqqi_.js","assets/FundingDefinitions-C6a2KJMC.js","assets/SacrificePeriods-B__vFkFp.js","assets/SacrificeShares-dc52N7aO.js","assets/RamadanPeriods-BVNNhOJd.js","assets/PiggyBankTracking-B74sGnCb.js","assets/LazyQRScannerModal-DbE56Sqy.js","assets/qrCodeUtils-EWtYda1B.js","assets/BulkProvisioning-BuaWkni4.js","assets/aid-DvwBo_vc.js","assets/BulkSend-DCAUMLDf.js","assets/Groups-BgnsO4UQ.js","assets/Templates-CvSobF_b.js","assets/SmsDeliveries-Cnv97LNW.js","assets/EmailDeliveries-CVXn95UR.js","assets/Analytics-BdXDGwdY.js","assets/ModuleInfo-DvZrnTZe.js","assets/scholarship-DBqUm0OZ.js","assets/OrphansStudents-D8IUawWo.js","assets/Reports-EFH7UJhN.js","assets/VisualManagement-DNiL-vOI.js","assets/Definitions-CxUXDYYT.js","assets/TrackingCategories-CP0oW6QD.js","assets/OrphanForm-BKRUxgBZ.js","assets/OrphanLetters-DrFBJ4Xj.js","assets/Campaigns-B0v6geYu.js","assets/Schools-D1dy6wGV.js","assets/FormDefinitions-B1L1AvnR.js","assets/PriceDefinitions-FGBX5G2y.js","assets/AddressLabels-CgWjDXox.js","assets/DataControl-BAD7VMbg.js","assets/ModuleInfo-Bl62YIcf.js","assets/SupabaseTest-DKhpT0eP.js","assets/RelatedRecords-DZqJLdWo.js","assets/Beneficiaries-_WmUZcma.js","assets/BeneficiariesDetail-BzWzPpSW.js","assets/Reports-y16_xmmO.js","assets/Applications-C6VFewBk.js","assets/CashVault-DMMKTTtd.js","assets/BankOrders-BZ0xv4nc.js","assets/CashOperations-Lexola49.js","assets/InKindOperations-D9E3SqF5.js","assets/ServiceTracking-BgEtmBNF.js","assets/HospitalReferrals-ClGYU0aS.js","assets/Parameters-CprBleU2.js","assets/DataControl-DewEaVhr.js","assets/ModuleInfo-MrZbfdvP.js","assets/fund-CYbeItgW.js","assets/CompleteReport-ePfGiaAz.js","assets/FundRegions-CuBQ6Sb_.js","assets/WorkAreas-Cx3VA_ux.js","assets/FundDefinitions-CGQFljfK.js","assets/ActivityDefinitions-jjeZhTWp.js","assets/SourcesExpenses-Bpf66ear.js","assets/AidCategories-DkpkX4bT.js","assets/WarningMessages-CGMXZ-DK.js","assets/StructuralControls-CbLcE4yW.js","assets/LocalIPs-D8UgOVE6.js","assets/IPBlocking-jjRybFOD.js","assets/UserManagement-0SYrvVKm.js","assets/Index-CZ82cjwq.js","assets/tasks-Cud0WE_-.js","assets/Definitions-Du7nRoNY.js","assets/UnitRoles-CdgDx5wM.js","assets/Units-v02QAPLI.js","assets/UserAccounts-CIK8QpXs.js","assets/PermissionGroupsClean-BoFh-loT.js","assets/definitions-BWK_s9fa.js","assets/InternalLines-CfcoQWxF.js","assets/ProcessFlows-QeFkH2uq.js","assets/PassportFormats-BYzgGgx7.js","assets/CountriesCities-uQb5Fj-7.js","assets/InstitutionTypes-B8TEpT3Z.js","assets/InstitutionStatus-DKGoknnP.js","assets/DonationMethods-xaK-EPsG.js","assets/DeliveryTypes-DgyN3TCY.js","assets/MeetingRequests-C7rYNoFk.js","assets/GSMCodes-BCPttZtH.js","assets/InterfaceLanguages-CRRI5ahF.js","assets/Translations-Bcjn0TrJ.js","assets/GeneralSettings-DnR7_JLF.js","assets/ModuleInfo-DdCZf_yg.js"])))=>i.map(i=>d[i]);
import{j as e,d as s,I as t}from"./ui-vendor-B8g4ebjc.js";import{b as a,r as n,u as i,f as r,L as l,N as o,h as c,i as d,a as m,B as u}from"./react-vendor-DCtPEfzS.js";import{C as h,s as x,p,_ as g,X as f,t as j,F as y,U as b,ab as v,a3 as N,M as w,y as k,d as _,ac as E,ad as S,ae as z,u as A,a1 as T,af as C,ag as I,a0 as D,S as O,ah as R,ai as P,T as L,B as M,o as $,r as B,A as V,aj as K,ak as U,al as Y,v as F,b as G,am as H,aa as W,z as q,D as Q,k as J,V as Z,Y as X,Z as ee,a9 as se,an as te,ao as ae,ap as ne,aq as ie,ar as re,as as le,at as oe,au as ce,av as de,aw as me,a8 as ue,ax as he,f as xe,ay as pe,H as ge,az as fe,aA as je,aB as ye,g as be,aC as ve,aD as Ne,aE as we,aF as ke,aG as _e,j as Ee,i as Se,aH as ze,aI as Ae,w as Te,e as Ce,n as Ie,aJ as De,R as Oe,aK as Re,q as Pe,aL as Le,L as Me,aM as $e,aN as Be,W as Ve,aO as Ke,a7 as Ue,a6 as Ye,a as Fe,aP as Ge,aQ as He,x as We,aR as qe,aS as Qe}from"./auth-9wZfjiou.js";import{a as Je,S as Ze,b as Xe,L as es,d as ss,e as ts,f as as,B as ns,C as is,g as rs,h as ls,i as os,j as cs,k as ds,p as ms,c as us,l as hs,m as xs,q as ps}from"./dashboard-CJXjh513.js";import{h as gs}from"./utils-vendor-DxpoukG0.js";import{l as fs,S as js,C as ys}from"./messages-C4gZlbNu.js";import{b as bs,a as vs,d as Ns}from"./state-vendor-rPBjJaR_.js";import{c as ws}from"./meetings-bbWcv5Hc.js";import{_ as ks}from"./file-vendor-D5NpndWQ.js";import"./supabase-vendor-AMUhAiAi.js";import"./chart-vendor-BDEFy5qM.js";import"./donations-Cc8AcqVz.js";import"./form-vendor-CfNvelWt.js";var _s;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var Es=a;_s=Es.createRoot,Es.hydrateRoot;const Ss=e=>({super_admin:"Süper Yönetici",admin:"Yönetici",manager:"Müdür",coordinator:"Koordinatör",operator:"Operatör",viewer:"Görüntüleyici"}[e]||e),zs=()=>{const{currentLanguage:s,changeLanguage:t,availableLanguages:a}=Je();return e.jsx("div",{className:"relative",children:e.jsxs(Ze,{value:s,onValueChange:e=>{t(e)},children:[e.jsx(Xe,{className:"w-[140px] h-9",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:es[s]}),e.jsx("span",{className:"text-sm font-medium",children:ss[s]}),e.jsx(h,{className:"w-4 h-4"})]})}),e.jsx(ts,{children:a.map(s=>e.jsx(as,{value:s,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:es[s]}),e.jsx("span",{children:ss[s]})]})},s))})]})})},As={type:[],dateRange:{from:"",to:""},status:[],region:[]},Ts=()=>{const[s,t]=n.useState(!1),[a,r]=n.useState(""),[l,o]=n.useState([]),[c,d]=n.useState(!1),[m,u]=n.useState(!1),[h,v]=n.useState(As),[N,w]=n.useState([]),k=n.useRef(null),_=n.useRef(null),E=i();n.useEffect(()=>{const e=localStorage.getItem("recent_searches");e&&w(JSON.parse(e))},[]),n.useEffect(()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&(t(!1),u(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),n.useEffect(()=>{const e=setTimeout(()=>{a.length>=2?S():o([])},300);return()=>clearTimeout(e)},[a,h]),n.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),t(!0),_.current?.focus()),"Escape"===e.key&&(t(!1),u(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);const S=n.useCallback(async()=>{if(a.trim()){d(!0);try{const e=[];if(0===h.type.length||h.type.includes("beneficiary")){const{data:s}=await x.from("beneficiaries").select("*").or(`name.ilike.%${a}%,surname.ilike.%${a}%,identity_no.ilike.%${a}%,phone.ilike.%${a}%`).limit(5);s?.forEach(s=>{e.push({id:s.id,type:"beneficiary",title:`${s.name} ${s.surname}`,subtitle:`${s.category} - ${s.city||"Şehir belirtilmemiş"}`,url:`/aid/beneficiaries/${s.id}`,metadata:s})})}if(0===h.type.length||h.type.includes("application")){const{data:s}=await x.from("applications").select("\n            *,\n            beneficiaries!inner(name, surname)\n          ").or(`description.ilike.%${a}%`).limit(5);s?.forEach(s=>{e.push({id:s.id,type:"application",title:`${s.beneficiaries.name} ${s.beneficiaries.surname} - Başvuru`,subtitle:`${s.aid_type} - ${s.status} - ${s.description?.substring(0,50)}...`,url:`/aid/applications?search=${s.id}`,metadata:s})})}if(o(e),a&&!N.includes(a)){const e=[a,...N.slice(0,4)];w(e),localStorage.setItem("recent_searches",JSON.stringify(e))}}catch(e){}finally{d(!1)}}},[a,h,N]),z=s=>{switch(s){case"beneficiary":return e.jsx(b,{className:"h-4 w-4 text-blue-600"});case"application":return e.jsx(y,{className:"h-4 w-4 text-orange-600"});case"donation":return e.jsx(j,{className:"h-4 w-4 text-green-600"});default:return e.jsx(p,{className:"h-4 w-4 text-gray-600"})}};return e.jsxs("div",{ref:k,className:"relative",children:[e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 rounded-lg border bg-background px-3 py-2 text-sm text-muted-foreground hover:bg-accent w-full max-w-sm",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:"Ara..."}),e.jsxs("kbd",{className:"ml-auto hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-xs font-medium text-muted-foreground opacity-100",children:[e.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-background/80 backdrop-blur-sm"}),e.jsxs("div",{className:"fixed inset-x-4 top-20 z-50 mx-auto max-w-2xl rounded-lg border bg-background p-0 shadow-lg",children:[e.jsxs("div",{className:"flex items-center border-b p-4",children:[e.jsx(p,{className:"mr-2 h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("input",{ref:_,type:"text",value:a,onChange:e=>r(e.target.value),placeholder:"İhtiyaç sahibi, başvuru veya bağışçı ara...",className:"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground",autoFocus:!0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(!m),className:"rounded p-1.5 hover:bg-accent "+(m?"bg-accent":""),title:"Filtreler",children:e.jsx(g,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>t(!1),className:"rounded p-1.5 hover:bg-accent",children:e.jsx(f,{className:"h-4 w-4"})})]})]}),m&&e.jsxs("div",{className:"border-b bg-muted/30 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-xs font-medium",children:"Tür"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"beneficiary",label:"İhtiyaç Sahibi"},{value:"application",label:"Başvuru"},{value:"donation",label:"Bağış"}].map(s=>e.jsx("button",{onClick:()=>{const e=h.type.includes(s.value)?h.type.filter(e=>e!==s.value):[...h.type,s.value];v({...h,type:e})},className:"rounded px-3 py-1 text-xs "+(h.type.includes(s.value)?"bg-primary text-primary-foreground":"bg-background border"),children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-xs font-medium",children:"Tarih Aralığı"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:h.dateRange.from,onChange:e=>v({...h,dateRange:{...h.dateRange,from:e.target.value}}),className:"flex-1 rounded border px-2 py-1 text-xs"}),e.jsx("input",{type:"date",value:h.dateRange.to,onChange:e=>v({...h,dateRange:{...h.dateRange,to:e.target.value}}),className:"flex-1 rounded border px-2 py-1 text-xs"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:Object.values(h).some(e=>Array.isArray(e)?e.length>0:e)&&"Filtreler aktif"}),e.jsx("button",{onClick:()=>{v(As)},className:"text-xs text-primary hover:underline",children:"Filtreleri Temizle"})]})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[c&&e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}),!c&&a.length>=2&&0===l.length&&e.jsxs("div",{className:"p-8 text-center text-sm text-muted-foreground",children:[e.jsx(p,{className:"mx-auto mb-3 h-8 w-8 text-muted-foreground/50"}),e.jsxs("p",{children:['"',a,'" için sonuç bulunamadı']}),e.jsx("p",{className:"mt-1 text-xs",children:"Farklı kelimeler deneyin veya filtreleri değiştirin"})]}),!c&&a.length<2&&N.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"mb-3 text-xs font-medium text-muted-foreground",children:"Son Aramalar"}),e.jsx("div",{className:"space-y-1",children:N.map((s,t)=>e.jsxs("button",{onClick:()=>r(s),className:"flex w-full items-center gap-3 rounded px-3 py-2 text-sm hover:bg-accent",children:[e.jsx(p,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s})]},t))})]}),!c&&l.length>0&&e.jsxs("div",{className:"p-2",children:[l.map(s=>e.jsxs("button",{onClick:()=>(e=>{E(e.url),t(!1),r("")})(s),className:"flex w-full items-center gap-3 rounded px-3 py-3 text-left hover:bg-accent",children:[z(s.type),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.subtitle})]}),e.jsx("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-xs font-medium text-muted-foreground opacity-100",children:"↵"})]},`${s.type}-${s.id}`)),l.length>=10&&e.jsx("div",{className:"border-t p-3 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Daha fazla sonuç için daha spesifik arama yapın"})})]})]})]})]})]})};function Cs({userId:s}){const[t,a]=n.useState([]),[i,r]=n.useState(0),[l,o]=n.useState(!1),[c,d]=n.useState(!1);n.useEffect(()=>{m();const e=x.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s}`},e=>{const s=e.new;a(e=>[s,...e]),r(e=>e+1),"granted"===Notification.permission&&new Notification(s.title,{body:s.message,icon:"/favicon.ico"})}).subscribe();return()=>{e.unsubscribe()}},[s]);const m=async()=>{d(!0);try{const{data:e,error:t}=await x.from("notifications").select("*").eq("user_id",s).order("created_at",{ascending:!1}).limit(20);if(t)throw t;a(e||[]),r(e?.filter(e=>!e.is_read).length||0)}catch(e){}finally{d(!1)}},u=s=>{switch(s){case"meeting_invite":case"meeting_reminder":case"meeting_update":return e.jsx(_,{className:"h-5 w-5 text-blue-500"});case"task_assigned":case"task_completed":case"task_due_reminder":return e.jsx(k,{className:"h-5 w-5 text-green-500"});case"new_message":case"mention":return e.jsx(w,{className:"h-5 w-5 text-purple-500"});case"user_joined":return e.jsx(N,{className:"h-5 w-5 text-orange-500"});default:return e.jsx(v,{className:"h-5 w-5 text-gray-500"})}},h=e=>{if(e.is_read||(async e=>{try{const{error:s}=await x.from("notifications").update({is_read:!0,read_at:(new Date).toISOString()}).eq("id",e);if(s)throw s;a(s=>s.map(s=>s.id===e?{...s,is_read:!0,read_at:(new Date).toISOString()}:s)),r(e=>Math.max(0,e-1))}catch(s){}})(e.id),e.data){const{type:s,data:t}=e;switch(s){case"meeting_invite":case"meeting_reminder":case"meeting_update":t.meeting_id&&(window.location.href=`/meetings?id=${t.meeting_id}`);break;case"task_assigned":case"task_completed":case"task_due_reminder":t.task_id&&(window.location.href=`/tasks?id=${t.task_id}`);break;case"new_message":case"mention":t.conversation_id&&(window.location.href=`/internal-messages?conversation=${t.conversation_id}`)}}};return n.useEffect(()=>{(async()=>{"default"===Notification.permission&&await Notification.requestPermission()})()},[]),e.jsxs("div",{className:"relative",children:[e.jsxs(ns,{variant:"ghost",size:"sm",onClick:()=>o(!l),className:"relative",children:[e.jsx(v,{className:"h-5 w-5"}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:i>9?"9+":i})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs(is,{className:"absolute right-0 mt-2 w-80 max-h-96 overflow-hidden z-50 shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Bildirimler"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i>0&&e.jsx(ns,{size:"sm",variant:"ghost",onClick:async()=>{try{const e=t.filter(e=>!e.is_read).map(e=>e.id);if(0===e.length)return;const{error:s}=await x.from("notifications").update({is_read:!0,read_at:(new Date).toISOString()}).in("id",e);if(s)throw s;a(e=>e.map(e=>({...e,is_read:!0,read_at:(new Date).toISOString()}))),r(0)}catch(e){}},className:"text-xs",children:"Tümünü Okundu İşaretle"}),e.jsx(ns,{size:"sm",variant:"ghost",onClick:()=>o(!1),children:e.jsx(f,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:c?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Yükleniyor..."})]}):t.length>0?e.jsx("div",{className:"divide-y",children:t.map(s=>e.jsx("div",{className:"p-4 hover:bg-muted/50 cursor-pointer transition-colors "+(s.is_read?"":"bg-primary/5"),onClick:()=>h(s),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:u(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium truncate "+(s.is_read?"text-muted-foreground":"text-foreground"),children:s.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[!s.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx(ns,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),(async e=>{try{const{error:s}=await x.from("notifications").delete().eq("id",e);if(s)throw s;const n=!1===t.find(s=>s.id===e)?.is_read;a(s=>s.filter(s=>s.id!==e)),n&&r(e=>Math.max(0,e-1))}catch(s){}})(s.id)},className:"p-1 h-auto",children:e.jsx(f,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:gs(new Date(s.created_at),"dd MMM HH:mm",{locale:fs})})]})]})},s.id))}):e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(v,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Bildirim bulunmuyor"})]})}),t.length>0&&e.jsx("div",{className:"p-2 border-t",children:e.jsx(ns,{variant:"ghost",size:"sm",className:"w-full text-sm",onClick:()=>{o(!1),window.location.href="/notifications"},children:"Tüm Bildirimleri Görüntüle"})})]})]})]})}const Is=n.createContext(void 0),Ds=()=>{const e=n.useContext(Is);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Os=({children:s,defaultTheme:t="system",storageKey:a="ui-theme"})=>{const[i,r]=n.useState(()=>{if("undefined"!=typeof window){const e=localStorage.getItem(a);if(e&&["light","dark","system"].includes(e))return e}return t}),[l,o]=n.useState("light");n.useEffect(()=>{localStorage.setItem(a,i);const e="system"===i?"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":i;o(e);const s=window.document.documentElement;if(s.classList.remove("light","dark"),s.classList.add(e),"system"===i){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{const t=e.matches?"dark":"light";o(t),s.classList.remove("light","dark"),s.classList.add(t)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}},[i,a]);const c={theme:i,setTheme:r,actualTheme:l};return e.jsx(Is.Provider,{value:c,children:s})},Rs=()=>{const{theme:s,setTheme:t}=Ds();return e.jsx(ns,{variant:"ghost",size:"icon",onClick:()=>{t("light"===s?"dark":"dark"===s?"system":"light")},title:(()=>{switch(s){case"light":return"Açık tema (Koyu temaya geç)";case"dark":return"Koyu tema (Sistem temasına geç)";case"system":return"Sistem teması (Açık temaya geç)";default:return"Tema değiştir"}})(),className:"h-9 w-9 transition-colors hover:bg-accent hover:text-accent-foreground",children:(()=>{switch(s){case"light":default:return e.jsx(E,{className:"h-4 w-4"});case"dark":return e.jsx(z,{className:"h-4 w-4"});case"system":return e.jsx(S,{className:"h-4 w-4"})}})()})};function Ps(){const{signIn:e}=A();return bs({mutationFn:ws,onSuccess:async s=>{T.success(`Demo hesabı oluşturuldu!\nEmail: ${s.email}\nŞifre: ${s.password}\nRol: ${s.profile.role}`,{duration:1e4,action:{label:"Giriş Yap",onClick:async()=>{try{await e(s.email,s.password),T.success("Demo hesabıyla giriş yapıldı!")}catch(t){T.error("Giriş yapılamadı")}}}})},onError:e=>{T.error(`Demo hesabı oluşturulamadı: ${e.message}`)}})}const Ls=e=>["super_admin","admin","manager","coordinator","operator","viewer"].includes(e)?e:void 0;function Ms({onOpenAICenter:s}={}){const t=r(),a=i(),{user:l,profile:o}=A(),c=o,[d,m]=n.useState(!1),u=Ps(),h=(()=>{const e=t.pathname;return"/"===e?"Dashboard":e.startsWith("/meetings")?"Toplantılar":e.startsWith("/internal-messages")?"İç Mesajlar":e.startsWith("/tasks")?"Görevler":e.startsWith("/donations")?"Bağış Yönetimi":e.startsWith("/messages")?"Mesaj Yönetimi":e.startsWith("/scholarship")?"Burs Yönetimi":e.startsWith("/aid")?"Yardım Yönetimi":e.startsWith("/fund")?"Fon Yönetimi":e.startsWith("/definitions")?"Tanımlamalar":e.startsWith("/system")?"Sistem Ayarları":"Panel"})();return e.jsx("header",{className:"sticky top-0 z-10 h-14 border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"mx-auto flex h-full items-center justify-between px-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-lg font-semibold",children:h})}),e.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[e.jsx(Ts,{}),s&&e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md",title:"AI Komut Merkezi (Ctrl+K)",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"AI Asistan"})]}),l&&e.jsx(Cs,{userId:l.id}),e.jsx(zs,{}),e.jsx(Rs,{}),l&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 hover:text-foreground transition-colors rounded-lg px-2 py-1 hover:bg-accent",title:"Kullanıcı Menüsü",children:[c?.avatar_url?e.jsx("img",{src:c.avatar_url,alt:c.full_name||"User",className:"h-6 w-6 rounded-full"}):e.jsx(I,{className:"h-6 w-6"}),c?.full_name&&e.jsxs("div",{className:"hidden md:flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:c.full_name||l.email}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Ls(c.role)?Ss(Ls(c.role)):"—"})]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 rounded-md border bg-popover p-1 shadow-md z-20",children:[e.jsxs("div",{className:"px-3 py-2 border-b",children:[e.jsx("p",{className:"text-sm font-medium",children:c?.full_name||"İsimsiz Kullanıcı"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.email}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c&&Ls(c.role)?Ss(Ls(c.role)):"—"})]}),e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-sm px-3 py-2 text-sm hover:bg-accent",onClick:()=>{m(!1)},children:[e.jsx(D,{className:"h-4 w-4"}),"Profilim"]}),e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-sm px-3 py-2 text-sm hover:bg-accent",onClick:()=>{m(!1),a("/definitions/general-settings")},children:[e.jsx(O,{className:"h-4 w-4"}),"Ayarlar"]}),e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-sm px-3 py-2 text-sm hover:bg-accent",onClick:()=>{m(!1),u.mutate()},disabled:u.isPending,children:[e.jsx(N,{className:"h-4 w-4"}),u.isPending?"Demo Hesabı Oluşturuluyor...":"Demo Hesabı Oluştur"]}),e.jsx("div",{className:"border-t my-1"}),e.jsxs("button",{onClick:()=>{m(!1),(async()=>{})()},className:"flex w-full items-center gap-2 rounded-sm px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-950",children:[e.jsx(R,{className:"h-4 w-4"}),"Çıkış Yap"]})]})]})]})]})]})})}function $s(){const s=r(),[t,a]=n.useState(s.pathname.startsWith("/aid")),[i,c]=n.useState(s.pathname.startsWith("/messages")),[d,m]=n.useState(s.pathname.startsWith("/donations")),[u,x]=n.useState(s.pathname.startsWith("/scholarship")),[p,g]=n.useState(s.pathname.startsWith("/fund")),[f,v]=n.useState(s.pathname.startsWith("/system")),[N,k]=n.useState(s.pathname.startsWith("/definitions")),E=(s,t,a,n=!1)=>e.jsxs(o,{to:s,className:({isActive:e})=>`flex items-center gap-3 rounded px-3 py-2 text-sm sidebar-nav-item transition-colors ${e?"active":""} ${n?"ml-6":""}`,children:[t,e.jsx("span",{children:a})]}),S=(s,t,a,n)=>e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 rounded px-3 py-2 text-sm sidebar-nav-item transition-colors cursor-pointer",onClick:n,children:[s,e.jsx("span",{className:"flex-1",children:t}),a?e.jsx(h,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})]})}),z=[{to:"/aid/beneficiaries",icon:e.jsx(b,{className:"h-4 w-4"}),label:"İhtiyaç Sahipleri"},{to:"/aid/applications",icon:e.jsx(y,{className:"h-4 w-4"}),label:"Yardım Başvuruları"},{to:"/aid/cash-vault",icon:e.jsx(Y,{className:"h-4 w-4"}),label:"Nakdi Yardım Veznesi"},{to:"/aid/bank-orders",icon:e.jsx(G,{className:"h-4 w-4"}),label:"Banka Ödeme Emirleri"},{to:"/aid/cash-operations",icon:e.jsx(F,{className:"h-4 w-4"}),label:"Nakdi Yardım İ��lemleri"},{to:"/aid/in-kind-operations",icon:e.jsx(q,{className:"h-4 w-4"}),label:"Ayni Yardım İşlemleri"},{to:"/aid/service-tracking",icon:e.jsx(b,{className:"h-4 w-4"}),label:"Hizmet Takip İşlemleri"},{to:"/aid/hospital-referrals",icon:e.jsx(te,{className:"h-4 w-4"}),label:"Hastane Sevk İşlemleri"},{to:"/aid/reports",icon:e.jsx(M,{className:"h-4 w-4"}),label:"Raporlar"},{to:"/aid/parameters",icon:e.jsx(O,{className:"h-4 w-4"}),label:"Parametreler"},{to:"/aid/data-control",icon:e.jsx(Q,{className:"h-4 w-4"}),label:"Veri Kontrolü"},{to:"/aid/module-info",icon:e.jsx(ee,{className:"h-4 w-4"}),label:"Modül Bilgilendirme"}],A=[{to:"/donations",icon:e.jsx(M,{className:"h-4 w-4"}),label:"Bağış Listesi"},{to:"/donations/vault",icon:e.jsx(Y,{className:"h-4 w-4"}),label:"Bağış Veznesi"},{to:"/donations/institutions",icon:e.jsx(b,{className:"h-4 w-4"}),label:"Kurumlar"},{to:"/donations/cash",icon:e.jsx(F,{className:"h-4 w-4"}),label:"Nakit Bağışlar"},{to:"/donations/bank",icon:e.jsx(G,{className:"h-4 w-4"}),label:"Banka Bağışları"},{to:"/donations/credit-card",icon:e.jsx(G,{className:"h-4 w-4"}),label:"Kredi Kartı Bağışları"},{to:"/donations/online",icon:e.jsx(H,{className:"h-4 w-4"}),label:"Online Bağışlar"},{to:"/donations/numbers",icon:e.jsx(y,{className:"h-4 w-4"}),label:"Bağış Numaraları"},{to:"/donations/funding-definitions",icon:e.jsx(O,{className:"h-4 w-4"}),label:"Fonlama Tanımları"},{to:"/donations/sacrifice-periods",icon:e.jsx(W,{className:"h-4 w-4"}),label:"Kurban Dönemleri"},{to:"/donations/sacrifice-shares",icon:e.jsx(q,{className:"h-4 w-4"}),label:"Kurban Hisseleri"},{to:"/donations/ramadan-periods",icon:e.jsx(W,{className:"h-4 w-4"}),label:"Ramazan Dönemleri"},{to:"/donations/piggy-bank",icon:e.jsx(Q,{className:"h-4 w-4"}),label:"Kumbara Takibi"},{to:"/donations/bulk-provisioning",icon:e.jsx(J,{className:"h-4 w-4"}),label:"Toplu Provizyon"}],T=[{to:"/messages",icon:e.jsx(Z,{className:"h-4 w-4"}),label:"Mesaj Yönetimi"},{to:"/messages/bulk-send",icon:e.jsx(J,{className:"h-4 w-4"}),label:"Toplu Mesaj Gönderimi"},{to:"/messages/groups",icon:e.jsx(W,{className:"h-4 w-4"}),label:"Mesaj Grupları"},{to:"/messages/templates",icon:e.jsx(w,{className:"h-4 w-4"}),label:"Mesaj Şablonları"},{to:"/messages/sms-deliveries",icon:e.jsx(X,{className:"h-4 w-4"}),label:"SMS Gönderimleri"},{to:"/messages/email-deliveries",icon:e.jsx(H,{className:"h-4 w-4"}),label:"e-Posta Gönderimleri"},{to:"/messages/module-info",icon:e.jsx(ee,{className:"h-4 w-4"}),label:"Modül Bilgilendirme"}],C=[{to:"/scholarship",icon:e.jsx(b,{className:"h-4 w-4"}),label:"Yetimler & Öğrenciler"},{to:"/scholarship/visual-management",icon:e.jsx(y,{className:"h-4 w-4"}),label:"Görsel Yönetimi"},{to:"/scholarship/definitions",icon:e.jsx(O,{className:"h-4 w-4"}),label:"Tanımlamalar"},{to:"/scholarship/tracking-categories",icon:e.jsx(W,{className:"h-4 w-4"}),label:"Takip Kategorileri"},{to:"/scholarship/orphan-form",icon:e.jsx(y,{className:"h-4 w-4"}),label:"Yetim Bilgi Formu"},{to:"/scholarship/orphan-letters",icon:e.jsx(Z,{className:"h-4 w-4"}),label:"Yetim Mektupları"},{to:"/scholarship/campaigns",icon:e.jsx(W,{className:"h-4 w-4"}),label:"Kampanyalar"},{to:"/scholarship/schools",icon:e.jsx(se,{className:"h-4 w-4"}),label:"Okullar"},{to:"/scholarship/form-definitions",icon:e.jsx(y,{className:"h-4 w-4"}),label:"Form Tanımları"},{to:"/scholarship/price-definitions",icon:e.jsx(F,{className:"h-4 w-4"}),label:"Fiyat Tanımları"},{to:"/scholarship/address-labels",icon:e.jsx(q,{className:"h-4 w-4"}),label:"Adres Etiket Baskı"},{to:"/scholarship/reports",icon:e.jsx(M,{className:"h-4 w-4"}),label:"Raporlar"},{to:"/scholarship/data-control",icon:e.jsx(Q,{className:"h-4 w-4"}),label:"Veri Kontrolü"},{to:"/scholarship/module-info",icon:e.jsx(ee,{className:"h-4 w-4"}),label:"Modül Bilgilendirme"}],I=[{to:"/fund/movements",icon:e.jsx(L,{className:"h-4 w-4"}),label:"Tüm Fon Hareketleri"},{to:"/fund/complete-report",icon:e.jsx(M,{className:"h-4 w-4"}),label:"Tam Fon Raporu"},{to:"/fund/regions",icon:e.jsx($,{className:"h-4 w-4"}),label:"Fon Bölgeleri"},{to:"/fund/work-areas",icon:e.jsx(B,{className:"h-4 w-4"}),label:"Çalışma Bölgeleri"},{to:"/fund/definitions",icon:e.jsx(O,{className:"h-4 w-4"}),label:"Fon Tanımları"},{to:"/fund/activity-definitions",icon:e.jsx(V,{className:"h-4 w-4"}),label:"Faaliyet Tanımları"},{to:"/fund/sources-expenses",icon:e.jsx(K,{className:"h-4 w-4"}),label:"Kaynak & Harcama"},{to:"/fund/aid-categories",icon:e.jsx(U,{className:"h-4 w-4"}),label:"Yardım Kategorileri"}],D=[{to:"/system/user-management",icon:e.jsx(b,{className:"h-4 w-4"}),label:"Kullanıcı Yönetimi"},{to:"/system/warning-messages",icon:e.jsx(ue,{className:"h-4 w-4"}),label:"Uyarı Mesajları"},{to:"/system/structural-controls",icon:e.jsx(Q,{className:"h-4 w-4"}),label:"Yapısal Kontroller"},{to:"/system/local-ips",icon:e.jsx(he,{className:"h-4 w-4"}),label:"Yerel IP Adresleri"},{to:"/system/ip-blocking",icon:e.jsx(ne,{className:"h-4 w-4"}),label:"IP Engelleme / Savunma"}],R=[{to:"/definitions/unit-roles",icon:e.jsx(ae,{className:"h-4 w-4"}),label:"Birim Rolleri"},{to:"/definitions/units",icon:e.jsx(B,{className:"h-4 w-4"}),label:"Birimler"},{to:"/definitions/user-accounts",icon:e.jsx(b,{className:"h-4 w-4"}),label:"Kullanıcı Hesapları"},{to:"/definitions/permission-groups",icon:e.jsx(ne,{className:"h-4 w-4"}),label:"Yetki Grupları"},{to:"/definitions/buildings",icon:e.jsx(ie,{className:"h-4 w-4"}),label:"Binalar"},{to:"/definitions/internal-lines",icon:e.jsx(re,{className:"h-4 w-4"}),label:"Sabit Dahili Hatlar"},{to:"/definitions/process-flows",icon:e.jsx(le,{className:"h-4 w-4"}),label:"Süreç Akışları"},{to:"/definitions/passport-formats",icon:e.jsx(G,{className:"h-4 w-4"}),label:"Pasaport Formatları"},{to:"/definitions/countries-cities",icon:e.jsx(oe,{className:"h-4 w-4"}),label:"Ülke ve Şehirler"},{to:"/definitions/institution-types",icon:e.jsx(te,{className:"h-4 w-4"}),label:"Kurum Tür Tanımları"},{to:"/definitions/institution-status",icon:e.jsx(V,{className:"h-4 w-4"}),label:"Kurum Statü Tanımları"},{to:"/definitions/donation-methods",icon:e.jsx(j,{className:"h-4 w-4"}),label:"Bağış Yöntemleri"},{to:"/definitions/delivery-types",icon:e.jsx(ce,{className:"h-4 w-4"}),label:"Teslimat Tür Tanımları"},{to:"/definitions/meeting-requests",icon:e.jsx(w,{className:"h-4 w-4"}),label:"Görüşme İstek Tanımları"},{to:"/definitions/gsm-codes",icon:e.jsx(X,{className:"h-4 w-4"}),label:"GSM Kod Numaraları"},{to:"/definitions/interface-languages",icon:e.jsx(de,{className:"h-4 w-4"}),label:"Arayüz Dilleri"},{to:"/definitions/translations",icon:e.jsx(me,{className:"h-4 w-4"}),label:"Tercüme"},{to:"/definitions/general-settings",icon:e.jsx(O,{className:"h-4 w-4"}),label:"Genel Ayarlar"},{to:"/definitions/module-info",icon:e.jsx(ee,{className:"h-4 w-4"}),label:"Modül Bilgilendirme"}];return e.jsxs("aside",{className:"sticky top-0 hidden h-screen w-64 shrink-0 border-r bg-sidebar-bg text-sidebar-text md:block overflow-y-auto",children:[e.jsx("div",{className:"flex h-14 items-center gap-2 border-b border-sidebar-border px-4",children:e.jsx(l,{to:"/",className:"flex items-center gap-2",children:e.jsx("span",{className:"text-base font-semibold",children:"Dernek Paneli"})})}),e.jsxs("div",{className:"space-y-4 p-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 px-2 text-xs font-semibold uppercase text-sidebar-text-muted",children:"Genel"}),e.jsx("div",{className:"space-y-1",children:E("/",e.jsx(ie,{className:"h-4 w-4"}),"Ana Sayfa")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 px-2 text-xs font-semibold uppercase text-sidebar-text-muted",children:"Collaboration"}),e.jsxs("div",{className:"space-y-1",children:[E("/meetings",e.jsx(_,{className:"h-4 w-4"}),"Toplantılar"),E("/internal-messages",e.jsx(w,{className:"h-4 w-4"}),"İç Mesajlar"),E("/tasks",e.jsx(xe,{className:"h-4 w-4"}),"Görevler")]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 px-2 text-xs font-semibold uppercase text-sidebar-text-muted",children:"Modüller"}),e.jsxs("div",{className:"space-y-1",children:[S(e.jsx(Y,{className:"h-4 w-4"}),"Fon Yönetimi",p,()=>g(!p)),p&&e.jsx("div",{className:"space-y-1 mt-1",children:I.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`fund-sub-${t}`))}),S(e.jsx(j,{className:"h-4 w-4"}),"Bağış Yönetimi",d,()=>m(!d)),d&&e.jsx("div",{className:"space-y-1 mt-1",children:A.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`donations-sub-${t}`))}),S(e.jsx(Z,{className:"h-4 w-4"}),"Mesaj Yönetimi",i,()=>c(!i)),i&&e.jsx("div",{className:"space-y-1 mt-1",children:T.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`messages-sub-${t}`))}),S(e.jsx(se,{className:"h-4 w-4"}),"Burs Yönetimi",u,()=>x(!u)),u&&e.jsx("div",{className:"space-y-1 mt-1",children:C.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`scholarship-sub-${t}`))}),S(e.jsx(pe,{className:"h-4 w-4"}),"Yardım Yönetimi",t,()=>a(!t)),t&&e.jsx("div",{className:"space-y-1 mt-1",children:z.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`aid-sub-${t}`))}),S(e.jsx(O,{className:"h-4 w-4"}),"Tanımlamalar",N,()=>k(!N)),N&&e.jsx("div",{className:"space-y-1 mt-1",children:R.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`definitions-sub-${t}`))}),S(e.jsx(ne,{className:"h-4 w-4"}),"Sistem",f,()=>v(!f)),f&&e.jsx("div",{className:"space-y-1 mt-1",children:D.map((s,t)=>e.jsx("div",{children:E(s.to,s.icon,s.label,!0)},`system-sub-${t}`))})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 px-2 text-xs font-semibold uppercase text-sidebar-text-muted",children:"Demo"}),e.jsxs("div",{className:"space-y-1",children:[E("/demo/related-records",e.jsx(y,{className:"h-4 w-4"}),"Bağlantılı Kayıtlar"),E("/supabase-test",e.jsx(Q,{className:"h-4 w-4"}),"Supabase Test")]})]})]})]})}function Bs({children:s,onOpenAICenter:t}){return e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"flex",children:[e.jsx($s,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ms,{onOpenAICenter:t}),e.jsx("main",{className:"p-4 lg:p-6",children:s})]})]})})}const Vs=n.createContext(null),Ks={didCatch:!1,error:null};let Us=class extends n.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ks}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var s,t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];null===(s=(t=this.props).onReset)||void 0===s||s.call(t,{args:n,reason:"imperative-api"}),this.setState(Ks)}}componentDidCatch(e,s){var t,a;null===(t=(a=this.props).onError)||void 0===t||t.call(a,e,s)}componentDidUpdate(e,s){const{didCatch:t}=this.state,{resetKeys:a}=this.props;var n,i;t&&null!==s.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==s.length||e.some((e,t)=>!Object.is(e,s[t]))}(e.resetKeys,a)&&(null===(n=(i=this.props).onReset)||void 0===n||n.call(i,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(Ks))}render(){const{children:e,fallbackRender:s,FallbackComponent:t,fallback:a}=this.props,{didCatch:i,error:r}=this.state;let l=e;if(i){const e={error:r,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof s)l=s(e);else if(t)l=n.createElement(t,e);else{if(void 0===a)throw r;l=a}}return n.createElement(Vs.Provider,{value:{didCatch:i,error:r,resetErrorBoundary:this.resetErrorBoundary}},l)}};const Ys=({type:s="dashboard"})=>{switch(s){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-32 animate-pulse"})]}),e.jsx(ls,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(os,{}),e.jsx(os,{})]})]});case"table":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded w-32 animate-pulse"})]}),e.jsx(rs,{rows:8,columns:6})]});case"form":return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-64 mb-6 animate-pulse"}),e.jsxs("div",{className:"space-y-6",children:[Array.from({length:4}).map((s,t)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]})]},t)),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("div",{className:"h-10 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded w-20 animate-pulse"})]})]})]});case"stats":return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{icon:b,label:"Yararlanıcılar"},{icon:F,label:"Toplam Yardım"},{icon:y,label:"Başvurular"},{icon:L,label:"Bu Ay"}].map((s,t)=>e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-muted rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20 mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-16 animate-pulse"})]})]})},t))})});default:return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded-full animate-pulse mx-auto mb-3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-32 animate-pulse"})]})})}},Fs=({type:s="dashboard"})=>{switch(s){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ge,{className:"h-8 w-8 text-muted animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-40 animate-pulse"})]}),e.jsx(ls,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(os,{}),e.jsx(os,{}),e.jsx(os,{})]})]});case"table":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-48 animate-pulse"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded w-32 animate-pulse"})]})]}),e.jsx("div",{className:"flex gap-4 mb-4",children:Array.from({length:4}).map((s,t)=>e.jsx("div",{className:"h-8 bg-muted rounded w-20 animate-pulse"},t))}),e.jsx(rs,{rows:10,columns:7})]});case"form":return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-64 mb-6 animate-pulse"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),Array.from({length:5}).map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]},t))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),Array.from({length:5}).map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]},t))]})]}),e.jsxs("div",{className:"flex gap-3 pt-6",children:[e.jsx("div",{className:"h-10 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded w-20 animate-pulse"})]})]});case"vault":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(B,{className:"h-8 w-8 text-muted animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-32 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20 animate-pulse"}),e.jsx("div",{className:"h-6 w-6 bg-muted rounded animate-pulse"})]}),e.jsx("div",{className:"h-8 bg-muted rounded w-24 mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted rounded w-16 animate-pulse"})]},t))})]});case"tracking":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(fe,{className:"h-8 w-8 text-muted animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-48 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6",children:Array.from({length:4}).map((s,t)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-16 mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-20 animate-pulse"})]},t))}),e.jsx(rs,{rows:8,columns:5})]});default:return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ge,{className:"h-8 w-8 text-muted animate-pulse mx-auto mb-3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-32 animate-pulse"})]})})}},Gs=({type:s="dashboard"})=>{switch(s){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(se,{className:"h-8 w-8 text-muted animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-36 animate-pulse"})]}),e.jsx(ls,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),e.jsx(os,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),e.jsx(os,{})]})]})]});case"table":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-48 animate-pulse"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-muted rounded w-28 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded w-32 animate-pulse"})]})]}),e.jsx("div",{className:"flex gap-4 mb-4",children:["Tümü","Aktif","Beklemede","Tamamlanan"].map((s,t)=>e.jsx("div",{className:"h-8 bg-muted rounded w-20 animate-pulse"},t))}),e.jsx(rs,{rows:12,columns:8})]});case"form":return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-64 mb-6 animate-pulse"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]},t))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]},t))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-muted rounded w-32 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]},t))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6",children:[e.jsx("div",{className:"h-10 bg-muted rounded w-24 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted rounded w-20 animate-pulse"})]})]});case"students":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(b,{className:"h-8 w-8 text-muted animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-40 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{icon:b,label:"Toplam Öğrenci"},{icon:je,label:"Aktif Burslar"},{icon:ye,label:"Başarılı"},{icon:se,label:"Mezun"}].map((s,t)=>e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-muted rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20 mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-16 animate-pulse"})]})]})},t))}),e.jsx(rs,{rows:10,columns:7})]});case"applications":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(je,{className:"h-8 w-8 text-muted animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-48 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:["Yeni Başvurular","İncelenen","Onaylanan"].map((s,t)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-24 mb-2 animate-pulse"}),e.jsx("div",{className:"h-8 bg-muted rounded w-16 mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted rounded w-20 animate-pulse"})]},t))}),e.jsx(rs,{rows:8,columns:6})]});default:return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"h-8 w-8 text-muted animate-pulse mx-auto mb-3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-32 animate-pulse"})]})})}},Hs=({error:s,resetErrorBoundary:t,module:a})=>e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(ue,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),e.jsxs("h2",{className:"text-lg font-semibold text-foreground mb-2",children:[a.charAt(0).toUpperCase()+a.slice(1)," Modülü Yüklenemedi"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Bir hata oluştu. Lütfen sayfayı yenilemeyi deneyin."}),e.jsxs("details",{className:"text-xs text-muted-foreground mb-4",children:[e.jsx("summary",{className:"cursor-pointer hover:text-foreground",children:"Hata detayları"}),e.jsx("pre",{className:"mt-2 p-2 bg-muted rounded text-left overflow-auto",children:s.message})]}),e.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[e.jsx(be,{className:"h-4 w-4"}),"Tekrar Dene"]})]})}),Ws=(s,t="dashboard")=>{switch(s){case"aid":return e.jsx(Ys,{type:t});case"donations":return e.jsx(Fs,{type:t});case"scholarship":return e.jsx(Gs,{type:t});case"messages":return e.jsx(cs,{text:"Mesajlar yükleniyor...",size:"lg"});case"fund":return e.jsx(cs,{text:"Fon bilgileri yükleniyor...",size:"lg"});case"system":return e.jsx(cs,{text:"Sistem ayarları yükleniyor...",size:"lg"});case"definitions":return e.jsx(cs,{text:"Tanımlar yükleniyor...",size:"lg"});case"dashboard":return e.jsx(cs,{text:"Dashboard yükleniyor...",size:"lg"});case"meetings":return e.jsx(cs,{text:"Toplantılar yükleniyor...",size:"lg"});case"internal_messages":return e.jsx(cs,{text:"İç mesajlar yükleniyor...",size:"lg"});case"tasks":return e.jsx(cs,{text:"Görevler yükleniyor...",size:"lg"});default:return e.jsx(cs,{text:"Sayfa yükleniyor...",size:"lg"})}},qs=({children:s,module:t,loadingType:a="dashboard"})=>e.jsx(Us,{FallbackComponent:s=>e.jsx(Hs,{...s,module:t}),onReset:()=>window.location.reload(),children:e.jsx(n.Suspense,{fallback:Ws(t,a),children:s})}),Qs=(s,t="dashboard")=>e.jsx(qs,{module:"aid",loadingType:t,children:e.jsx(s,{})}),Js=(s,t="dashboard")=>e.jsx(qs,{module:"donations",loadingType:t,children:e.jsx(s,{})}),Zs=(s,t="dashboard")=>e.jsx(qs,{module:"scholarship",loadingType:t,children:e.jsx(s,{})}),Xs=s=>e.jsx(qs,{module:"messages",children:e.jsx(s,{})}),et=s=>e.jsx(qs,{module:"fund",children:e.jsx(s,{})}),st=s=>e.jsx(qs,{module:"system",children:e.jsx(s,{})}),tt=s=>e.jsx(qs,{module:"definitions",children:e.jsx(s,{})}),at=(s,t="dashboard")=>e.jsx(qs,{module:"meetings",loadingType:t,children:e.jsx(s,{})}),nt=(s,t="dashboard")=>e.jsx(qs,{module:"internal_messages",loadingType:t,children:e.jsx(s,{})}),it=(s,t="dashboard")=>e.jsx(qs,{module:"tasks",loadingType:t,children:e.jsx(s,{})}),rt=n.lazy(()=>ks(()=>import("./Login-DAFUqgph.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),lt=n.lazy(()=>ks(()=>import("./NotFound-CnSqmB1T.js"),__vite__mapDeps([15,1,2,5,6,7,8,9,10,11,12]))),ot=n.lazy(()=>ks(()=>import("./donations-Cc8AcqVz.js").then(e=>e.L),__vite__mapDeps([14,1,2,5,6,7,8,9,10,11,12]))),ct=n.lazy(()=>ks(()=>import("./DonationVault-DsP-9fmD.js"),__vite__mapDeps([16,1,2,14,5,6,7,8,9,10,11,12]))),dt=n.lazy(()=>ks(()=>import("./Institutions-BM43rfO0.js"),__vite__mapDeps([17,1,2,14,5,6,7,8,9,10,11,12,13,18,19,20]))),mt=n.lazy(()=>ks(()=>import("./CashDonations-Bl-R5qy8.js"),__vite__mapDeps([21,1,2,14,5,6,7,8,9,10,11,12,13,22,23]))),ut=n.lazy(()=>ks(()=>import("./BankDonations-vub51KA7.js"),__vite__mapDeps([24,1,2,14,5,6,7,8,9,10,11,12,13,22,23]))),ht=n.lazy(()=>ks(()=>import("./CreditCardDonations-y8FG8eI4.js"),__vite__mapDeps([25,1,2,14,5,6,7,8,9,10,11,12,13]))),xt=n.lazy(()=>ks(()=>import("./OnlineDonations-ikxPUTBY.js"),__vite__mapDeps([26,1,2,14,5,6,7,8,9,10,11,12,13,27,19,20,23]))),pt=n.lazy(()=>ks(()=>import("./DonationNumbers-DMXEqqi_.js"),__vite__mapDeps([28,1,2,14,5,6,7,8,9,10,11,12,13,22]))),gt=n.lazy(()=>ks(()=>import("./FundingDefinitions-C6a2KJMC.js"),__vite__mapDeps([29,1,2,14,5,6,7,8,9,10,11,12,13]))),ft=n.lazy(()=>ks(()=>import("./SacrificePeriods-B__vFkFp.js"),__vite__mapDeps([30,1,2,14,5,6,7,8,9,10,11,12,13]))),jt=n.lazy(()=>ks(()=>import("./SacrificeShares-dc52N7aO.js"),__vite__mapDeps([31,1,2,14,5,6,7,8,9,10,11,12,13]))),yt=n.lazy(()=>ks(()=>import("./RamadanPeriods-BVNNhOJd.js"),__vite__mapDeps([32,1,2,14,5,6,7,8,9,10,11,12,13]))),bt=n.lazy(()=>ks(()=>import("./PiggyBankTracking-B74sGnCb.js"),__vite__mapDeps([33,1,2,14,5,6,7,8,9,10,11,12,13,34,35]))),vt=n.lazy(()=>ks(()=>import("./BulkProvisioning-BuaWkni4.js"),__vite__mapDeps([36,1,2,14,5,6,7,8,9,10,11,12,37,13]))),Nt=n.lazy(()=>ks(()=>import("./messages-C4gZlbNu.js").then(e=>e.I),__vite__mapDeps([13,1,2,6,7,8,9,10,14,5,11,12]))),wt=n.lazy(()=>ks(()=>import("./BulkSend-DCAUMLDf.js"),__vite__mapDeps([38,1,2,13,6,7,8,9,10,14,5,11,12]))),kt=n.lazy(()=>ks(()=>import("./Groups-BgnsO4UQ.js"),__vite__mapDeps([39,1,2,14,5,6,7,8,9,10,11,12,13]))),_t=n.lazy(()=>ks(()=>import("./Templates-CvSobF_b.js"),__vite__mapDeps([40,1,2,14,5,6,7,8,9,10,11,12,13,18,19,20]))),Et=n.lazy(()=>ks(()=>import("./SmsDeliveries-Cnv97LNW.js"),__vite__mapDeps([41,1,2,14,5,6,7,8,9,10,11,12,13]))),St=n.lazy(()=>ks(()=>import("./EmailDeliveries-CVXn95UR.js"),__vite__mapDeps([42,1,2,14,5,6,7,8,9,10,11,12,13]))),zt=n.lazy(()=>ks(()=>import("./Analytics-BdXDGwdY.js"),__vite__mapDeps([43,1,2,13,6,7,8,9,10,14,5,11,12]))),At=n.lazy(()=>ks(()=>import("./ModuleInfo-DvZrnTZe.js"),__vite__mapDeps([44,1,2,13,6,7,8,9,10,14,5,11,12]))),Tt=n.lazy(()=>ks(()=>import("./scholarship-DBqUm0OZ.js"),__vite__mapDeps([45,1,2,5,6,7,8,9,10,11,12]))),Ct=n.lazy(()=>ks(()=>import("./OrphansStudents-D8IUawWo.js"),__vite__mapDeps([46,1,2,14,5,6,7,8,9,10,11,12,37,13]))),It=n.lazy(()=>ks(()=>import("./Reports-EFH7UJhN.js"),__vite__mapDeps([47,1,2,37,11,10,5,6,7,8,9,12,14]))),Dt=n.lazy(()=>ks(()=>import("./VisualManagement-DNiL-vOI.js"),__vite__mapDeps([48,1,2,5,6,7,8,9,10,11,12]))),Ot=n.lazy(()=>ks(()=>import("./Definitions-CxUXDYYT.js"),__vite__mapDeps([49,1,2,5,6,7,8,9,10,11,12]))),Rt=n.lazy(()=>ks(()=>import("./TrackingCategories-CP0oW6QD.js"),__vite__mapDeps([50,1,2,5,6,7,8,9,10,11,12]))),Pt=n.lazy(()=>ks(()=>import("./OrphanForm-BKRUxgBZ.js"),__vite__mapDeps([51,1,2,5,6,7,8,9,10,11,12]))),Lt=n.lazy(()=>ks(()=>import("./OrphanLetters-DrFBJ4Xj.js"),__vite__mapDeps([52,1,2,5,6,7,8,9,10,11,12]))),Mt=n.lazy(()=>ks(()=>import("./Campaigns-B0v6geYu.js"),__vite__mapDeps([53,1,2,5,6,7,8,9,10,11,12]))),$t=n.lazy(()=>ks(()=>import("./Schools-D1dy6wGV.js"),__vite__mapDeps([54,1,2,5,6,7,8,9,10,11,12]))),Bt=n.lazy(()=>ks(()=>import("./FormDefinitions-B1L1AvnR.js"),__vite__mapDeps([55,1,2,5,6,7,8,9,10,11,12]))),Vt=n.lazy(()=>ks(()=>import("./PriceDefinitions-FGBX5G2y.js"),__vite__mapDeps([56,1,2,5,6,7,8,9,10,11,12]))),Kt=n.lazy(()=>ks(()=>import("./AddressLabels-CgWjDXox.js"),__vite__mapDeps([57,1,2,5,6,7,8,9,10,11,12]))),Ut=n.lazy(()=>ks(()=>import("./DataControl-BAD7VMbg.js"),__vite__mapDeps([58,1,2,5,6,7,8,9,10,11,12]))),Yt=n.lazy(()=>ks(()=>import("./ModuleInfo-Bl62YIcf.js"),__vite__mapDeps([59,1,2,5,6,7,8,9,10,11,12]))),Ft=n.lazy(()=>ks(()=>import("./dashboard-CJXjh513.js").then(e=>e.x),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12]))),Gt=n.lazy(()=>ks(()=>import("./SupabaseTest-DKhpT0eP.js"),__vite__mapDeps([60,1,2,5,6,7,8,9,10,11,12]))),Ht=n.lazy(()=>ks(()=>import("./RelatedRecords-DZqJLdWo.js"),__vite__mapDeps([61,1,2,5,6,7,8,9,10,11,12]))),Wt=n.lazy(()=>ks(()=>import("./aid-DvwBo_vc.js").then(e=>e.I),__vite__mapDeps([37,1,2,11,10,5,6,7,8,9,12]))),qt=n.lazy(()=>ks(()=>import("./Beneficiaries-_WmUZcma.js"),__vite__mapDeps([62,1,2,14,5,6,7,8,9,10,11,12,23,13,34,27,19,20]))),Qt=n.lazy(()=>ks(()=>import("./BeneficiariesDetail-BzWzPpSW.js"),__vite__mapDeps([63,1,2,6,7,8,9,10]))),Jt=n.lazy(()=>ks(()=>import("./Reports-y16_xmmO.js"),__vite__mapDeps([64,1,2,6,7,8,9,10,5,11,12,4,3,13,14]))),Zt=n.lazy(()=>ks(()=>import("./Applications-C6VFewBk.js"),__vite__mapDeps([65,1,2,6,7,8,9,10,14,5,11,12,23,13,3,4,27,19,20]))),Xt=n.lazy(()=>ks(()=>import("./CashVault-DMMKTTtd.js"),__vite__mapDeps([66,1,2,6,7,8,9,10,14,5,11,12,13,37,3,4]))),ea=n.lazy(()=>ks(()=>import("./BankOrders-BZ0xv4nc.js"),__vite__mapDeps([67,1,2,6,7,8,9,10,14,5,11,12,13,37,3,4]))),sa=n.lazy(()=>ks(()=>import("./CashOperations-Lexola49.js"),__vite__mapDeps([68,1,2,14,5,6,7,8,9,10,11,12,13,37,3,4]))),ta=n.lazy(()=>ks(()=>import("./InKindOperations-D9E3SqF5.js"),__vite__mapDeps([69,1,2,6,7,8,9,10,14,5,11,12,13,37,3,4]))),aa=n.lazy(()=>ks(()=>import("./ServiceTracking-BgEtmBNF.js"),__vite__mapDeps([70,1,2,6,7,8,9,10,14,5,11,12,13,37,3,4]))),na=n.lazy(()=>ks(()=>import("./HospitalReferrals-ClGYU0aS.js"),__vite__mapDeps([71,1,2,6,7,8,9,10,14,5,11,12,13,37,3,4]))),ia=n.lazy(()=>ks(()=>import("./Parameters-CprBleU2.js"),__vite__mapDeps([72,1,2,14,5,6,7,8,9,10,11,12,13,37,3,4]))),ra=n.lazy(()=>ks(()=>import("./DataControl-DewEaVhr.js"),__vite__mapDeps([73,1,2,14,5,6,7,8,9,10,11,12,13,37,3,4]))),la=n.lazy(()=>ks(()=>import("./ModuleInfo-MrZbfdvP.js"),__vite__mapDeps([74,1,2,37,11,10,5,6,7,8,9,12]))),oa=n.lazy(()=>ks(()=>import("./fund-CYbeItgW.js"),__vite__mapDeps([75,1,2,14,5,6,7,8,9,10,11,12]))),ca=n.lazy(()=>ks(()=>import("./CompleteReport-ePfGiaAz.js"),__vite__mapDeps([76,1,2,11,10]))),da=n.lazy(()=>ks(()=>import("./FundRegions-CuBQ6Sb_.js"),__vite__mapDeps([77,1,2,14,5,6,7,8,9,10,11,12]))),ma=n.lazy(()=>ks(()=>import("./WorkAreas-Cx3VA_ux.js"),__vite__mapDeps([78,1,2,14,5,6,7,8,9,10,11,12]))),ua=n.lazy(()=>ks(()=>import("./FundDefinitions-CGQFljfK.js"),__vite__mapDeps([79,1,2,14,5,6,7,8,9,10,11,12]))),ha=n.lazy(()=>ks(()=>import("./ActivityDefinitions-jjeZhTWp.js"),__vite__mapDeps([80,1,2,14,5,6,7,8,9,10,11,12]))),xa=n.lazy(()=>ks(()=>import("./SourcesExpenses-Bpf66ear.js"),__vite__mapDeps([81,1,2,14,5,6,7,8,9,10,11,12]))),pa=n.lazy(()=>ks(()=>import("./AidCategories-DkpkX4bT.js"),__vite__mapDeps([82,1,2,14,5,6,7,8,9,10,11,12]))),ga=n.lazy(()=>ks(()=>import("./WarningMessages-CGMXZ-DK.js"),__vite__mapDeps([83,1,2,14,5,6,7,8,9,10,11,12]))),fa=n.lazy(()=>ks(()=>import("./StructuralControls-CbLcE4yW.js"),__vite__mapDeps([84,1,2,14,5,6,7,8,9,10,11,12]))),ja=n.lazy(()=>ks(()=>import("./LocalIPs-D8UgOVE6.js"),__vite__mapDeps([85,1,2,14,5,6,7,8,9,10,11,12]))),ya=n.lazy(()=>ks(()=>import("./IPBlocking-jjRybFOD.js"),__vite__mapDeps([86,1,2,14,5,6,7,8,9,10,11,12]))),ba=n.lazy(()=>ks(()=>import("./UserManagement-0SYrvVKm.js"),__vite__mapDeps([87,1,2,4,5,6,7,8,9,10,11,12,3,13,14]))),va=n.lazy(()=>ks(()=>import("./meetings-bbWcv5Hc.js").then(e=>e.I),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,3,13,14]))),Na=n.lazy(()=>ks(()=>import("./Index-CZ82cjwq.js"),__vite__mapDeps([88,1,2,5,6,7,8,9,10,11,12,13,14]))),wa=n.lazy(()=>ks(()=>import("./tasks-Cud0WE_-.js"),__vite__mapDeps([89,1,2,5,6,7,8,9,10,11,12,3,4,13,14]))),ka=n.lazy(()=>ks(()=>import("./Definitions-Du7nRoNY.js"),__vite__mapDeps([90,1,2,6,7,8,9,10]))),_a=n.lazy(()=>ks(()=>import("./UnitRoles-CdgDx5wM.js"),__vite__mapDeps([91,1,2,13,6,7,8,9,10,14,5,11,12]))),Ea=n.lazy(()=>ks(()=>import("./Units-v02QAPLI.js"),__vite__mapDeps([92,1,2,13,6,7,8,9,10,14,5,11,12]))),Sa=n.lazy(()=>ks(()=>import("./UserAccounts-CIK8QpXs.js"),__vite__mapDeps([93,1,2,13,6,7,8,9,10,14,5,11,12,18,19,20]))),za=n.lazy(()=>ks(()=>import("./PermissionGroupsClean-BoFh-loT.js"),__vite__mapDeps([94,1,2,6,7,8,9,10]))),Aa=n.lazy(()=>ks(()=>import("./definitions-BWK_s9fa.js"),__vite__mapDeps([95,1,2]))),Ta=n.lazy(()=>ks(()=>import("./InternalLines-CfcoQWxF.js"),__vite__mapDeps([96,1,2]))),Ca=n.lazy(()=>ks(()=>import("./ProcessFlows-QeFkH2uq.js"),__vite__mapDeps([97,1,2]))),Ia=n.lazy(()=>ks(()=>import("./PassportFormats-BYzgGgx7.js"),__vite__mapDeps([98,1,2]))),Da=n.lazy(()=>ks(()=>import("./CountriesCities-uQb5Fj-7.js"),__vite__mapDeps([99,1,2]))),Oa=n.lazy(()=>ks(()=>import("./InstitutionTypes-B8TEpT3Z.js"),__vite__mapDeps([100,1,2]))),Ra=n.lazy(()=>ks(()=>import("./InstitutionStatus-DKGoknnP.js"),__vite__mapDeps([101,1,2]))),Pa=n.lazy(()=>ks(()=>import("./DonationMethods-xaK-EPsG.js"),__vite__mapDeps([102,1,2,13,6,7,8,9,10,14,5,11,12]))),La=n.lazy(()=>ks(()=>import("./DeliveryTypes-DgyN3TCY.js"),__vite__mapDeps([103,1,2]))),Ma=n.lazy(()=>ks(()=>import("./MeetingRequests-C7rYNoFk.js"),__vite__mapDeps([104,1,2]))),$a=n.lazy(()=>ks(()=>import("./GSMCodes-BCPttZtH.js"),__vite__mapDeps([105,1,2]))),Ba=n.lazy(()=>ks(()=>import("./InterfaceLanguages-CRRI5ahF.js"),__vite__mapDeps([106,1,2]))),Va=n.lazy(()=>ks(()=>import("./Translations-Bcjn0TrJ.js"),__vite__mapDeps([107,1,2]))),Ka=n.lazy(()=>ks(()=>import("./GeneralSettings-DnR7_JLF.js"),__vite__mapDeps([108,1,2]))),Ua=n.lazy(()=>ks(()=>import("./ModuleInfo-DdCZf_yg.js"),__vite__mapDeps([109,1,2])));function Ya(){return e.jsxs(c,{children:[e.jsx(d,{path:"/login",element:e.jsx(rt,{})}),e.jsx(d,{path:"/",element:e.jsx(ve,{children:(s=Ft,e.jsx(qs,{module:"dashboard",children:e.jsx(s,{})}))})}),e.jsx(d,{path:"/donations",element:e.jsx(ve,{children:Js(ot)})}),e.jsx(d,{path:"/donations/vault",element:e.jsx(ve,{children:Js(ct)})}),e.jsx(d,{path:"/donations/institutions",element:e.jsx(ve,{children:Js(dt)})}),e.jsx(d,{path:"/donations/cash",element:e.jsx(ve,{children:Js(mt)})}),e.jsx(d,{path:"/donations/bank",element:e.jsx(ve,{children:Js(ut)})}),e.jsx(d,{path:"/donations/credit-card",element:e.jsx(ve,{children:Js(ht)})}),e.jsx(d,{path:"/donations/online",element:e.jsx(ve,{children:Js(xt)})}),e.jsx(d,{path:"/donations/numbers",element:e.jsx(ve,{children:Js(pt)})}),e.jsx(d,{path:"/donations/funding-definitions",element:e.jsx(ve,{children:Js(gt)})}),e.jsx(d,{path:"/donations/sacrifice-periods",element:e.jsx(ve,{children:Js(ft)})}),e.jsx(d,{path:"/donations/sacrifice-shares",element:e.jsx(ve,{children:Js(jt)})}),e.jsx(d,{path:"/donations/ramadan-periods",element:e.jsx(ve,{children:Js(yt)})}),e.jsx(d,{path:"/donations/piggy-bank",element:e.jsx(ve,{children:Js(bt)})}),e.jsx(d,{path:"/donations/piggy-bank-tracking",element:e.jsx(ve,{children:Js(bt)})}),e.jsx(d,{path:"/donations/bulk-provisioning",element:e.jsx(ve,{children:Js(vt)})}),e.jsx(d,{path:"/messages",element:e.jsx(ve,{children:Xs(Nt)})}),e.jsx(d,{path:"/messages/bulk-send",element:e.jsx(ve,{children:Xs(wt)})}),e.jsx(d,{path:"/messages/groups",element:e.jsx(ve,{children:Xs(kt)})}),e.jsx(d,{path:"/messages/templates",element:e.jsx(ve,{children:Xs(_t)})}),e.jsx(d,{path:"/messages/sms-deliveries",element:e.jsx(ve,{children:Xs(Et)})}),e.jsx(d,{path:"/messages/email-deliveries",element:e.jsx(ve,{children:Xs(St)})}),e.jsx(d,{path:"/messages/analytics",element:e.jsx(ve,{children:Xs(zt)})}),e.jsx(d,{path:"/messages/module-info",element:e.jsx(ve,{children:Xs(At)})}),e.jsx(d,{path:"/scholarship",element:e.jsx(ve,{children:Zs(Tt)})}),e.jsx(d,{path:"/scholarship/orphans-students",element:e.jsx(ve,{children:Zs(Ct)})}),e.jsx(d,{path:"/scholarship/reports",element:e.jsx(ve,{children:Zs(It)})}),e.jsx(d,{path:"/scholarship/visual-management",element:e.jsx(ve,{children:Zs(Dt)})}),e.jsx(d,{path:"/scholarship/definitions",element:e.jsx(ve,{children:Zs(Ot)})}),e.jsx(d,{path:"/scholarship/tracking-categories",element:e.jsx(ve,{children:Zs(Rt)})}),e.jsx(d,{path:"/scholarship/orphan-form",element:e.jsx(ve,{children:Zs(Pt)})}),e.jsx(d,{path:"/scholarship/orphan-letters",element:e.jsx(ve,{children:Zs(Lt)})}),e.jsx(d,{path:"/scholarship/campaigns",element:e.jsx(ve,{children:Zs(Mt)})}),e.jsx(d,{path:"/scholarship/schools",element:e.jsx(ve,{children:Zs($t)})}),e.jsx(d,{path:"/scholarship/form-definitions",element:e.jsx(ve,{children:Zs(Bt)})}),e.jsx(d,{path:"/scholarship/price-definitions",element:e.jsx(ve,{children:Zs(Vt)})}),e.jsx(d,{path:"/scholarship/address-labels",element:e.jsx(ve,{children:Zs(Kt)})}),e.jsx(d,{path:"/scholarship/data-control",element:e.jsx(ve,{children:Zs(Ut)})}),e.jsx(d,{path:"/scholarship/module-info",element:e.jsx(ve,{children:Zs(Yt)})}),e.jsx(d,{path:"/aid",element:e.jsx(ve,{children:Qs(Wt)})}),e.jsx(d,{path:"/aid/beneficiaries",element:e.jsx(ve,{children:Qs(qt)})}),e.jsx(d,{path:"/aid/beneficiaries/:id",element:e.jsx(ve,{children:Qs(Qt)})}),e.jsx(d,{path:"/aid/reports",element:e.jsx(ve,{children:Qs(Jt)})}),e.jsx(d,{path:"/aid/applications",element:e.jsx(ve,{children:Qs(Zt)})}),e.jsx(d,{path:"/aid/cash-vault",element:e.jsx(ve,{children:Qs(Xt)})}),e.jsx(d,{path:"/aid/bank-orders",element:e.jsx(ve,{children:Qs(ea)})}),e.jsx(d,{path:"/aid/cash-operations",element:e.jsx(ve,{children:Qs(sa)})}),e.jsx(d,{path:"/aid/in-kind-operations",element:e.jsx(ve,{children:Qs(ta)})}),e.jsx(d,{path:"/aid/service-tracking",element:e.jsx(ve,{children:Qs(aa)})}),e.jsx(d,{path:"/aid/hospital-referrals",element:e.jsx(ve,{children:Qs(na)})}),e.jsx(d,{path:"/aid/parameters",element:e.jsx(ve,{children:Qs(ia)})}),e.jsx(d,{path:"/aid/data-control",element:e.jsx(ve,{children:Qs(ra)})}),e.jsx(d,{path:"/aid/module-info",element:e.jsx(ve,{children:Qs(la)})}),e.jsx(d,{path:"/fund/movements",element:e.jsx(ve,{children:et(oa)})}),e.jsx(d,{path:"/fund/complete-report",element:e.jsx(ve,{children:et(ca)})}),e.jsx(d,{path:"/fund/regions",element:e.jsx(ve,{children:et(da)})}),e.jsx(d,{path:"/fund/work-areas",element:e.jsx(ve,{children:et(ma)})}),e.jsx(d,{path:"/fund/definitions",element:e.jsx(ve,{children:et(ua)})}),e.jsx(d,{path:"/fund/activity-definitions",element:e.jsx(ve,{children:et(ha)})}),e.jsx(d,{path:"/fund/sources-expenses",element:e.jsx(ve,{children:et(xa)})}),e.jsx(d,{path:"/fund/aid-categories",element:e.jsx(ve,{children:et(pa)})}),e.jsx(d,{path:"/system/warning-messages",element:e.jsx(ve,{children:st(ga)})}),e.jsx(d,{path:"/system/structural-controls",element:e.jsx(ve,{children:st(fa)})}),e.jsx(d,{path:"/system/local-ips",element:e.jsx(ve,{children:st(ja)})}),e.jsx(d,{path:"/system/ip-blocking",element:e.jsx(ve,{children:st(ya)})}),e.jsx(d,{path:"/system/user-management",element:e.jsx(ve,{children:st(ba)})}),e.jsx(d,{path:"/definitions",element:e.jsx(ve,{children:tt(ka)})}),e.jsx(d,{path:"/definitions/unit-roles",element:e.jsx(ve,{children:tt(_a)})}),e.jsx(d,{path:"/definitions/units",element:e.jsx(ve,{children:tt(Ea)})}),e.jsx(d,{path:"/definitions/user-accounts",element:e.jsx(ve,{children:tt(Sa)})}),e.jsx(d,{path:"/definitions/permission-groups",element:e.jsx(ve,{children:tt(za)})}),e.jsx(d,{path:"/definitions/buildings",element:e.jsx(ve,{children:tt(Aa)})}),e.jsx(d,{path:"/definitions/internal-lines",element:e.jsx(ve,{children:tt(Ta)})}),e.jsx(d,{path:"/definitions/process-flows",element:e.jsx(ve,{children:tt(Ca)})}),e.jsx(d,{path:"/definitions/passport-formats",element:e.jsx(ve,{children:tt(Ia)})}),e.jsx(d,{path:"/definitions/countries-cities",element:e.jsx(ve,{children:tt(Da)})}),e.jsx(d,{path:"/definitions/institution-types",element:e.jsx(ve,{children:tt(Oa)})}),e.jsx(d,{path:"/definitions/institution-status",element:e.jsx(ve,{children:tt(Ra)})}),e.jsx(d,{path:"/definitions/donation-methods",element:e.jsx(ve,{children:tt(Pa)})}),e.jsx(d,{path:"/definitions/delivery-types",element:e.jsx(ve,{children:tt(La)})}),e.jsx(d,{path:"/definitions/meeting-requests",element:e.jsx(ve,{children:tt(Ma)})}),e.jsx(d,{path:"/definitions/gsm-codes",element:e.jsx(ve,{children:tt($a)})}),e.jsx(d,{path:"/definitions/interface-languages",element:e.jsx(ve,{children:tt(Ba)})}),e.jsx(d,{path:"/definitions/translations",element:e.jsx(ve,{children:tt(Va)})}),e.jsx(d,{path:"/definitions/general-settings",element:e.jsx(ve,{children:tt(Ka)})}),e.jsx(d,{path:"/definitions/module-info",element:e.jsx(ve,{children:tt(Ua)})}),e.jsx(d,{path:"/meetings",element:e.jsx(ve,{children:at(va,"dashboard")})}),e.jsx(d,{path:"/internal-messages",element:e.jsx(ve,{children:nt(Na,"dashboard")})}),e.jsx(d,{path:"/tasks",element:e.jsx(ve,{children:it(wa,"dashboard")})}),e.jsx(d,{path:"/supabase-test",element:e.jsx(ve,{children:st(Gt)})}),e.jsx(d,{path:"/demo/related-records",element:e.jsx(ve,{children:st(Ht)})}),e.jsx(d,{path:"*",element:e.jsx(lt,{})})]});var s}class Fa extends n.Component{retryCount=0;maxRetries=3;constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){const t=Ne.handleError(e,{category:we.SYSTEM,severity:this.getSeverityFromLevel(this.props.level||"component"),context:{component:"ErrorBoundary",action:"component_error",additionalData:{level:this.props.level,componentStack:s.componentStack,retryCount:this.retryCount}}});this.setState({error:e,errorInfo:s,errorId:t}),this.props.onError&&this.props.onError(e,s)}getSeverityFromLevel(e){switch(e){case"global":return ke.CRITICAL;case"page":return ke.HIGH;default:return ke.MEDIUM}}handleRetry=()=>{this.retryCount<this.maxRetries&&(this.retryCount++,this.setState({hasError:!1,error:null,errorInfo:null,errorId:null}))};handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleReportBug=()=>{const{error:e,errorId:s}=this.state,t=encodeURIComponent(`Bug Report - ${e?.message||"Unknown Error"}`),a=encodeURIComponent(`\nError ID: ${s}\nError Message: ${e?.message}\nStack Trace: ${e?.stack}\nURL: ${window.location.href}\nUser Agent: ${navigator.userAgent}\nTimestamp: ${(new Date).toISOString()}\n\nPlease describe what you were doing when this error occurred:\n\n    `.trim());window.open(`mailto:support@dernek.com?subject=${t}&body=${a}`)};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:s,errorId:t}=this.state,{level:a="component",showDetails:n=!1}=this.props;return e.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-4",children:e.jsxs(is,{className:"w-full max-w-lg p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ue,{className:"w-8 h-8 text-red-600"})}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["global"===a&&"Uygulama Hatası","page"===a&&"Sayfa Yüklenemedi","component"===a&&"Bir Sorun Oluştu"]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["global"===a&&"Uygulamada beklenmeyen bir hata oluştu.","page"===a&&"Bu sayfa yüklenirken bir hata oluştu.","component"===a&&"Bu bölüm gösterilirken bir hata oluştu."]}),t&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Hata Kodu: ",e.jsx("code",{className:"font-mono bg-gray-200 px-1 rounded",children:t.slice(-8)})]})})]}),n&&s&&e.jsx("div",{className:"mb-6 text-left",children:e.jsxs("details",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("summary",{className:"cursor-pointer font-medium text-gray-700 mb-2",children:"Teknik Detaylar"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Hata Mesajı:"}),e.jsx("p",{className:"font-mono bg-gray-100 p-2 rounded mt-1 break-all",children:s.message})]}),s.stack&&e.jsxs("div",{children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsx("pre",{className:"font-mono bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32",children:s.stack})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[this.retryCount<this.maxRetries&&e.jsxs(ns,{onClick:this.handleRetry,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Tekrar Dene (",this.maxRetries-this.retryCount," deneme hakkı)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:["global"===a?e.jsxs(ns,{onClick:this.handleReload,variant:"outline",className:"w-full",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Sayfayı Yenile"]}):e.jsxs(ns,{onClick:this.handleGoHome,variant:"outline",className:"w-full",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Ana Sayfaya Dön"]}),e.jsxs(ns,{onClick:this.handleReportBug,variant:"outline",className:"w-full",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Hata Bildir"]})]}),"global"===a&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Eğer sorun devam ederse:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsx(ns,{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},variant:"outline",size:"sm",className:"w-full",children:"Önbelleği Temizle"}),e.jsx(ns,{onClick:()=>window.open("mailto:destek@dernek.com"),variant:"outline",size:"sm",className:"w-full",children:"Destek İletişim"})]})]})})]})]})})}return this.props.children}}const Ga={API_DATA:{name:"api-data-v1",maxSize:100,maxAge:3e5,strategy:"stale-while-revalidate"},STATIC_ASSETS:{name:"static-assets-v1",maxSize:200,maxAge:864e5,strategy:"cache-first"},USER_DATA:{name:"user-data-v1",maxSize:50,maxAge:6e5,strategy:"network-first"},IMAGES:{name:"images-v1",maxSize:100,maxAge:6048e5,strategy:"cache-first"}};class Ha{static instance;storagePrefix="dernek_cache_";constructor(){}static getInstance(){return Ha.instance||(Ha.instance=new Ha),Ha.instance}async get(e,s){try{const t=Ga[s],a=`${this.storagePrefix}${t.name}_${e}`,n=localStorage.getItem(a);if(!n)return null;const i=JSON.parse(n);return Date.now()-i.timestamp>t.maxAge?(this.delete(e,s),null):i.data}catch(t){return null}}async set(e,s,t,a){try{const n=Ga[t],i=`${this.storagePrefix}${n.name}_${e}`,r={data:s,timestamp:Date.now(),etag:a,size:this.calculateSize(s)};localStorage.setItem(i,JSON.stringify(r)),await this.enforceMaxSize(t)}catch(n){await this.clearOldEntries(t);try{const n=Ga[t],i=`${this.storagePrefix}${n.name}_${e}`,r={data:s,timestamp:Date.now(),etag:a,size:this.calculateSize(s)};localStorage.setItem(i,JSON.stringify(r))}catch(i){}}}async delete(e,s){const t=Ga[s],a=`${this.storagePrefix}${t.name}_${e}`;localStorage.removeItem(a)}async clear(e){if(e){const s=Ga[e],t=`${this.storagePrefix}${s.name}_`,a=[];for(let e=0;e<localStorage.length;e++){const s=localStorage.key(e);s?.startsWith(t)&&a.push(s)}a.forEach(e=>localStorage.removeItem(e))}else{const e=[];for(let s=0;s<localStorage.length;s++){const t=localStorage.key(s);t?.startsWith(this.storagePrefix)&&e.push(t)}e.forEach(e=>localStorage.removeItem(e))}}async getStats(e){const s=Ga[e],t=`${this.storagePrefix}${s.name}_`;let a=0,n=0,i=Date.now(),r=0;for(let o=0;o<localStorage.length;o++){const e=localStorage.key(o);if(e?.startsWith(t))try{const s=localStorage.getItem(e);if(s){const e=JSON.parse(s);a++,n+=e.size,e.timestamp<i&&(i=e.timestamp),e.timestamp>r&&(r=e.timestamp)}}catch(l){localStorage.removeItem(e)}}return{entryCount:a,totalSize:n,oldestEntry:i,newestEntry:r}}async smartFetch(e,s,t){const a=Ga[s],n=this.generateCacheKey(e,t);switch(a.strategy){case"cache-first":return this.cacheFirstStrategy(e,n,s,t);case"network-first":return this.networkFirstStrategy(e,n,s,t);case"stale-while-revalidate":return this.staleWhileRevalidateStrategy(e,n,s,t);default:throw new Error(`Unknown cache strategy: ${a.strategy}`)}}async cacheFirstStrategy(e,s,t,a){const n=await this.get(s,t);if(null!==n)return n;const i=await fetch(e,a);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const r=await i.json();return await this.set(s,r,t,i.headers.get("etag")||void 0),r}async networkFirstStrategy(e,s,t,a){try{const n=await fetch(e,a);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const i=await n.json();return await this.set(s,i,t,n.headers.get("etag")||void 0),i}catch(n){const e=await this.get(s,t);if(null!==e)return e;throw n}}async staleWhileRevalidateStrategy(e,s,t,a){const n=await this.get(s,t);if(this.backgroundUpdate(e,s,t,a).catch(e=>{}),null!==n)return n;const i=await fetch(e,a);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const r=await i.json();return await this.set(s,r,t,i.headers.get("etag")||void 0),r}async backgroundUpdate(e,s,t,a){try{const n=await fetch(e,a);if(n.ok){const e=await n.json();await this.set(s,e,t,n.headers.get("etag")||void 0)}}catch(n){}}generateCacheKey(e,s){const t=s?.method||"GET",a=s?.body||"";return`${t}_${e}_${"string"==typeof a?a:JSON.stringify(a)}`}calculateSize(e){try{return new Blob([JSON.stringify(e)]).size}catch{return 0}}async enforceMaxSize(e){const s=Ga[e],t=await this.getStats(e);t.entryCount>s.maxSize&&await this.clearOldEntries(e,t.entryCount-s.maxSize)}async clearOldEntries(e,s){const t=Ga[e],a=`${this.storagePrefix}${t.name}_`,n=[];for(let l=0;l<localStorage.length;l++){const e=localStorage.key(l);if(e?.startsWith(a))try{const s=localStorage.getItem(e);if(s){const t=JSON.parse(s);n.push({key:e,timestamp:t.timestamp})}}catch(r){n.push({key:e,timestamp:0})}}n.sort((e,s)=>e.timestamp-s.timestamp);const i=s||Math.floor(n.length/2);for(let l=0;l<i&&l<n.length;l++)localStorage.removeItem(n[l].key)}}const Wa=Ha.getInstance(),qa={critical:4,high:3,medium:2,low:1};class Qa{static instance;storageKey="dernek_offline_queue";completedStorageKey="dernek_completed_actions";isProcessing=!1;maxQueueSize=1e3;maxCompletedActions=100;constructor(){this.initializeQueue()}static getInstance(){return Qa.instance||(Qa.instance=new Qa),Qa.instance}async enqueue(e){const s=this.generateActionId(),t={...e,id:s,timestamp:Date.now(),retryCount:0},a=[...await this.getQueue(),t];if(a.length>this.maxQueueSize){const e=this.removeOldLowPriorityActions(a);await this.saveQueue(e)}else await this.saveQueue(a);return this.notifyActionQueued(t),navigator.onLine&&this.processQueue(),s}async dequeue(e){const s=await this.getQueue(),t=s.filter(s=>s.id!==e);return t.length!==s.length&&(await this.saveQueue(t),!0)}async processQueue(){if(this.isProcessing||!navigator.onLine)return[];this.isProcessing=!0;const e=[];try{const s=await this.getQueue();if(0===s.length)return e;const t=this.sortByPriority(s),a=5;for(let r=0;r<t.length;r+=a){const s=t.slice(r,r+a),n=await this.processBatch(s);e.push(...n),r+a<t.length&&await this.delay(500)}const n=e.filter(e=>!e.success).map(e=>{const t=s.find(s=>s.id===e.actionId);return t&&t.retryCount<t.maxRetries?{...t,retryCount:t.retryCount+1}:null}).filter(e=>null!==e);await this.saveQueue(n);const i=e.filter(e=>e.success).map(e=>({...s.find(s=>s.id===e.actionId),completedAt:Date.now(),result:e.response}));await this.saveCompletedActions(i)}finally{this.isProcessing=!1}return this.notifySyncResults(e),e}async getQueueStats(){const e=await this.getQueue(),s=await this.getCompletedActions();return{totalActions:e.length+s.length,pendingActions:e.filter(e=>e.retryCount<e.maxRetries).length,failedActions:e.filter(e=>e.retryCount>=e.maxRetries).length,completedActions:s.length,oldestAction:e.length>0?Math.min(...e.map(e=>e.timestamp)):Date.now(),queueSize:this.calculateQueueSize(e)}}async clearFailedActions(){const e=await this.getQueue(),s=e.filter(e=>e.retryCount>=e.maxRetries),t=e.filter(e=>e.retryCount<e.maxRetries);return await this.saveQueue(t),s.length}async clearQueue(){await this.saveQueue([]),await this.saveCompletedActions([])}initializeNetworkListeners(){window.addEventListener("online",()=>{this.processQueue()}),window.addEventListener("offline",()=>{})}async initializeQueue(){const e=await this.getCompletedActions();if(e.length>this.maxCompletedActions){const s=[...e].sort((e,s)=>s.completedAt-e.completedAt).slice(0,this.maxCompletedActions);await this.saveCompletedActions(s)}}async getQueue(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return[]}}async saveQueue(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(s){await this.clearFailedActions();try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){}}}async getCompletedActions(){try{const e=localStorage.getItem(this.completedStorageKey);return e?JSON.parse(e):[]}catch(e){return[]}}async saveCompletedActions(e){try{const s=await this.getCompletedActions(),t=[...s,...e].slice(-this.maxCompletedActions);localStorage.setItem(this.completedStorageKey,JSON.stringify(t))}catch(s){}}sortByPriority(e){return[...e].sort((e,s)=>{const t=qa[s.priority]-qa[e.priority];return 0!==t?t:e.timestamp-s.timestamp})}async processBatch(e){const s=e.map(e=>this.processAction(e));return Promise.all(s)}async processAction(e){try{const s=await fetch(e.endpoint,{method:e.method,headers:{"Content-Type":"application/json",...e.headers},body:e.data?JSON.stringify(e.data):void 0});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const t=await s.json();return{success:!0,actionId:e.id,response:t}}catch(s){return{success:!1,actionId:e.id,error:s instanceof Error?s.message:"Unknown error"}}}removeOldLowPriorityActions(e){return[...e].sort((e,s)=>{const t=qa[s.priority]-qa[e.priority];return 0!==t?t:s.timestamp-e.timestamp}).slice(0,this.maxQueueSize)}calculateQueueSize(e){try{return new Blob([JSON.stringify(e)]).size}catch{return 0}}generateActionId(){return`action_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}delay(e){return new Promise(s=>setTimeout(s,e))}notifyActionQueued(e){e.metadata}notifySyncResults(e){e.filter(e=>e.success).length,e.filter(e=>!e.success).length}}const Ja=Qa.getInstance();class Za{static instance;installPromptEvent=null;serviceWorkerRegistration=null;constructor(){this.initializePWA()}static getInstance(){return Za.instance||(Za.instance=new Za),Za.instance}getCapabilities(){return{serviceWorker:"serviceWorker"in navigator,installPrompt:null!==this.installPromptEvent,pushNotifications:"PushManager"in window&&"Notification"in window,backgroundSync:"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,share:"share"in navigator,fileSystemAccess:"showOpenFilePicker"in window,webShare:"share"in navigator}}async installPWA(){if(!this.installPromptEvent)return!1;try{await this.installPromptEvent.prompt();return"accepted"===(await this.installPromptEvent.userChoice).outcome&&(this.installPromptEvent=null,!0)}catch(e){return!1}}async updateServiceWorker(){if(!this.serviceWorkerRegistration)return!1;try{return await this.serviceWorkerRegistration.update(),!!this.serviceWorkerRegistration.waiting&&(this.serviceWorkerRegistration.waiting.postMessage({type:"SKIP_WAITING"}),!0)}catch(e){return!1}}async requestNotificationPermission(){if(!("Notification"in window))return"denied";if("granted"===Notification.permission)return"granted";if("denied"===Notification.permission)return"denied";return await Notification.requestPermission()}async sendNotification(e){if("granted"!==await this.requestNotificationPermission())return!1;try{return this.serviceWorkerRegistration?await this.serviceWorkerRegistration.showNotification(e.title,{body:e.body,icon:e.icon||"/pwa-192x192.svg",badge:e.badge||"/pwa-192x192.svg",tag:e.tag,data:e.data,silent:e.silent}):new Notification(e.title,{body:e.body,icon:e.icon||"/pwa-192x192.svg",tag:e.tag,data:e.data,silent:e.silent}),!0}catch(s){return!1}}async shareContent(e){if(!("share"in navigator))return this.fallbackShare(e);try{return await navigator.share({title:e.title,text:e.text,url:e.url,files:e.files}),!0}catch(s){return this.fallbackShare(e)}}async checkForUpdates(){if(!this.serviceWorkerRegistration)return{hasUpdate:!1};try{return await this.serviceWorkerRegistration.update(),this.serviceWorkerRegistration.waiting?{hasUpdate:!0,version:await this.getVersionFromSW(),releaseNotes:"Yeni özellikler ve hata düzeltmeleri"}:{hasUpdate:!1}}catch(e){return{hasUpdate:!1}}}initializeOfflineSupport(){Ja.initializeNetworkListeners(),window.addEventListener("online",()=>{this.sendNotification({title:"🌐 İnternet Bağlantısı",body:"İnternet bağlantınız geri geldi. Bekleyen işlemler senkronize ediliyor...",tag:"connection-restored"})}),window.addEventListener("offline",()=>{this.sendNotification({title:"📵 Offline Mod",body:"İnternet bağlantınız kesildi. İşlemleriniz offline olarak devam edecek.",tag:"connection-lost"})})}getPerformanceMetrics(){return{cacheHitRate:.85,averageLoadTime:1200,offlineActions:0}}async clearApplicationCache(){if(await Wa.clear(),await Ja.clearQueue(),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}await this.sendNotification({title:"🧹 Cache Temizlendi",body:"Uygulama cache'i başarıyla temizlendi.",tag:"cache-cleared"})}async initializePWA(){await this.registerServiceWorker(),this.setupInstallPrompt(),this.setupUpdateListeners(),this.initializeOfflineSupport()}async registerServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");this.serviceWorkerRegistration=e,e.addEventListener("updatefound",()=>{const s=e.installing;s&&s.addEventListener("statechange",()=>{"installed"===s.state&&navigator.serviceWorker.controller&&this.notifyUpdateAvailable()})})}catch(e){}}setupInstallPrompt(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.installPromptEvent=e}),window.addEventListener("appinstalled",()=>{this.installPromptEvent=null})}setupUpdateListeners(){navigator.serviceWorker?.addEventListener("message",e=>{"UPDATE_AVAILABLE"===e.data?.type&&this.notifyUpdateAvailable()})}async notifyUpdateAvailable(){await this.sendNotification({title:"🆕 Güncelleme Mevcut",body:"Yeni bir uygulama sürümü mevcut. Güncellemek ister misiniz?",tag:"app-update",actions:[{action:"update",title:"Güncelle"},{action:"dismiss",title:"Daha Sonra"}]})}async getVersionFromSW(){return`v${Date.now()}`}async fallbackShare(e){try{const s=[e.title,e.text,e.url].filter(Boolean).join("\n");return await navigator.clipboard.writeText(s),await this.sendNotification({title:"📋 Panoya Kopyalandı",body:"İçerik panoya kopyalandı.",tag:"clipboard-copy"}),!0}catch(s){return!1}}}const Xa=Za.getInstance();function en(){const[e,s]=n.useState(navigator.onLine),[t,a]=n.useState(!1),[i,r]=n.useState(!1),[l,o]=n.useState(!1),[c,d]=n.useState({serviceWorker:!1,installPrompt:!1,pushNotifications:!1,backgroundSync:!1,share:!1,fileSystemAccess:!1,webShare:!1}),[m,u]=n.useState(null),h=n.useMemo(()=>c.serviceWorker&&c.backgroundSync,[c]),x=n.useCallback(async()=>{const e=await Xa.installPWA();return e&&(r(!0),a(!1)),e},[]),p=n.useCallback(async()=>{const e=await Xa.updateServiceWorker();return e&&(o(!1),window.location.reload()),e},[]),g=n.useCallback(async e=>await Xa.sendNotification(e),[]),f=n.useCallback(async e=>await Xa.shareContent(e),[]),j=n.useCallback(async()=>{await Xa.clearApplicationCache();const e=await Ja.getQueueStats();u(e)},[]),y=n.useCallback(async()=>{if(e)try{await Ja.processQueue();const e=await Ja.getQueueStats();u(e),0===e.pendingActions&&e.totalActions>0&&await g({title:"✅ Senkronizasyon Tamamlandı",body:"Tüm offline işlemler başarıyla senkronize edildi.",tag:"sync-complete"})}catch(s){await g({title:"❌ Senkronizasyon Hatası",body:"Bazı işlemler senkronize edilemedi. Tekrar denenecek.",tag:"sync-error"})}},[e,g]),b=n.useCallback(async s=>{const t=await Ja.enqueue({type:s.type,endpoint:s.endpoint,method:s.method,data:s.data,priority:s.priority||"medium",maxRetries:3,metadata:{description:s.description,userFeedback:s.description}}),a=await Ja.getQueueStats();return u(a),e?y():await g({title:"📝 İşlem Kuyruğa Alındı",body:s.description||"İşleminiz offline kuyruğa eklendi.",tag:"action-queued"}),t},[e,y,g]);return n.useEffect(()=>{(async()=>{const e=Xa.getCapabilities();d(e),a(e.installPrompt)})()},[]),n.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone;r(e)})()},[]),n.useEffect(()=>{const e=()=>{s(!0),y()},t=()=>{s(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[y]),n.useEffect(()=>{const e=async()=>{const e=await Xa.checkForUpdates();o(e.hasUpdate)};e();const s=setInterval(e,3e5);return()=>clearInterval(s)},[]),n.useEffect(()=>{(async()=>{const e=await Ja.getQueueStats();u(e)})()},[]),n.useEffect(()=>{const e=()=>{a(!0)},s=()=>{r(!0),a(!1)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",s),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",s)}},[]),n.useMemo(()=>({isOnline:e,isInstallable:t,isInstalled:i,hasUpdate:l,isOfflineCapable:h,capabilities:c,queueStats:m,installApp:x,updateApp:p,sendNotification:g,shareContent:f,clearCache:j,processOfflineQueue:y,enqueueOfflineAction:b}),[e,t,i,l,h,c,m,x,p,g,f,j,y,b])}function sn({onClose:s}){const{isInstallable:t,isInstalled:a,isOnline:n,hasUpdate:i,installApp:r,updateApp:l}=en(),[o,c]=m.useState(!1),[d,u]=m.useState(!1);m.useEffect(()=>{t&&!a&&c(!0)},[t,a]),m.useEffect(()=>{i&&u(!0)},[i]);const h=()=>{c(!1),s?.()},x=()=>{u(!1),s?.()};return e.jsxs(e.Fragment,{children:[!n&&e.jsxs("div",{className:"fixed bottom-4 left-4 z-50 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Çevrimdışı"})]}),o&&e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Uygulamayı Yükle"})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(f,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Bu uygulamayı cihazınıza yükleyerek daha hızlı erişim sağlayabilirsiniz."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{await r(),c(!1),s?.()},className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Yükle"}),e.jsx("button",{onClick:h,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white text-sm font-medium transition-colors",children:"Şimdi Değil"})]})]}),d&&e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-green-500"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Güncelleme Mevcut"})]}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(f,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Yeni bir sürüm mevcut. Güncellemek için sayfayı yenileyin."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{await l(),u(!1),s?.()},className:"flex-1 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Güncelle"}),e.jsx("button",{onClick:x,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white text-sm font-medium transition-colors",children:"Sonra"})]})]})]})}const tn=()=>{const[e,s]=n.useState(navigator.onLine),[t,a]=n.useState(!1);return n.useEffect(()=>{const e=()=>{s(!0),t&&(T.success("İnternet bağlantısı yeniden kuruldu"),a(!1))},n=()=>{s(!1),a(!0),T.warning("İnternet bağlantısı kesildi. Offline modda çalışıyorsunuz.")};return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[t]),{isOnline:e,wasOffline:t}},an=()=>{const[e,s]=n.useState([]),[t,a]=n.useState(!1),{isOnline:i}=tn(),r=e=>{s(s=>s.filter(s=>s.id!==e));const t=JSON.parse(localStorage.getItem("offline-queue")||"[]").filter(s=>s.id!==e);localStorage.setItem("offline-queue",JSON.stringify(t))},l=async()=>{if(i&&!t&&0!==e.length){a(!0);for(const t of e)try{const e=await t.mutationFn();t.onSuccess?.(e),r(t.id),T.success("Offline işlem başarıyla tamamlandı")}catch(s){t.retryCount++,t.retryCount>=3?(t.onError?.(s),r(t.id),T.error("Offline işlem başarısız oldu")):T.warning(`Offline işlem yeniden denenecek (${t.retryCount}/3)`)}a(!1)}};return n.useEffect(()=>{i&&l()},[i]),n.useEffect(()=>{const e=JSON.parse(localStorage.getItem("offline-queue")||"[]");s(e)},[]),{queue:e,addToQueue:e=>{const t={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),retryCount:0,timestamp:Date.now()};s(e=>[...e,t]);const a=JSON.parse(localStorage.getItem("offline-queue")||"[]");localStorage.setItem("offline-queue",JSON.stringify([...a,t])),T.info("İşlem offline queue'ya eklendi")},removeFromQueue:r,processQueue:l,isProcessing:t,queueLength:e.length}},nn=n.createContext(void 0),rn=({children:s})=>{const{queue:t,isProcessing:a,processQueue:i}=an(),{isOnline:r}=(()=>{const e=vs(),{isOnline:s}=tn(),[t,a]=n.useState(null),i=async()=>{if(s)try{await e.refetchQueries({predicate:e=>e.isStale()}),a(Date.now())}catch(t){}};return n.useEffect(()=>{if(!s)return;const e=setInterval(()=>{i()},3e5);return()=>clearInterval(e)},[s]),n.useEffect(()=>{const e=()=>{s&&i()};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[s]),{performBackgroundSync:i,lastSyncTime:t,isOnline:s}})(),{saveCache:l}=(()=>{const e=vs(),{isOnline:s}=tn(),t=()=>{try{const s=e.getQueryCache().getAll().map(e=>({queryKey:e.queryKey,data:e.state.data,dataUpdatedAt:e.state.dataUpdatedAt,error:e.state.error}));localStorage.setItem("react-query-cache",JSON.stringify(s))}catch(s){}};return n.useEffect(()=>{s||t()},[s]),{saveCache:t,loadCache:()=>{try{const s=localStorage.getItem("react-query-cache");s&&JSON.parse(s).forEach(s=>{e.setQueryData(s.queryKey,s.data)})}catch(s){}},clearCache:()=>{localStorage.removeItem("react-query-cache"),e.clear()},isOnline:s}})();n.useEffect(()=>{r&&t.length>0&&(i(),T.success("Çevrimiçi oldunuz! Bekleyen işlemler işleniyor..."))},[r,t.length,i]),n.useEffect(()=>{const e=setInterval(()=>{l()},3e4);return()=>clearInterval(e)},[l]),n.useEffect(()=>{r||T.warning("İnternet bağlantısı kesildi. Çevrimdışı modda çalışıyorsunuz.")},[r]);const o={isOnline:r,queueSize:t.length,isProcessing:a,retryQueue:()=>{i()},clearQueue:()=>{}};return e.jsx(nn.Provider,{value:o,children:s})};async function ln(e,s,t="uploaded"){try{const a=s.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),n=`beneficiaries/${e}/${Date.now()}-${a}`,{data:i,error:r}=await x.storage.from("documents").upload(n,s,{upsert:!0,cacheControl:"3600"});if(r||!i?.path)return{success:!1,data:{filePath:""},error:r?.message||"Upload failed"};const l=i.path,{error:o}=await x.from("documents").insert({beneficiary_id:e,document_type:t,file_name:s.name,file_path:l});return o?{success:!1,data:{filePath:l},error:o.message}:{success:!0,data:{filePath:l}}}catch(a){return{success:!1,data:{filePath:""},error:a instanceof Error?a.message:"Unknown error"}}}async function on(e,s){const t=e.trim().toLowerCase();if(/(dashboard|anasayfa|home)/.test(t))return s.navigateTo("/"),{ok:!0,message:"Navigated to dashboard"};if(/(bağış|donation)/.test(t))return s.navigateTo("/donations"),{ok:!0,message:"Navigated to donations"};if(/(yardım|aid)/.test(t))return s.navigateTo("/aid"),{ok:!0,message:"Navigated to aid"};if(/(koyu|dark)/.test(t))return s.setTheme("dark"),{ok:!0,message:"Theme set to dark"};if(/(açık|light)/.test(t))return s.setTheme("light"),{ok:!0,message:"Theme set to light"};if(/(sistem|system)/.test(t)&&/tema|theme/.test(t))return s.setTheme("system"),{ok:!0,message:"Theme set to system"};if(/chat|sohbet/.test(t))return s.toggleChat(),{ok:!0,message:"Chat toggled"};if(/belge|dosya|yukle|yükle|upload/.test(t)){let e=function(e){const s=e.match(/id\s*[:=]\s*([a-z0-9-]+)/i);return s?s[1]:""}(t);if(!e){const s=function(e){const s=e.match(/(?:ad|name)\s*[:=]\s*([^,]+)/i)||e.match(/([^,]+)\s*(?:için|adlı|kişisi)/i);return s?s[1].trim():""}(t);s&&(e=await async function(e){const[s,...t]=e.split(/\s+/),a=t.join(" "),{data:n}=await x.from("beneficiaries").select("id, name, surname").ilike("name",`%${s}%`).ilike("surname",a?`%${a}%`:"%").limit(1).maybeSingle();return n?.id||""}(s))}if(!e)return{ok:!1,message:"Kişi ID/isim bulunamadı"};const s=await async function(){const e=document.createElement("input");return e.type="file",e.accept="*/*",await new Promise((s,t)=>{e.onchange=()=>{const a=e.files?.[0];a?s(a):t(new Error("Dosya seçilmedi"))},e.click()})}();return T.promise(ln(e,s,"uploaded"),{loading:"Belge yükleniyor...",success:"Belge yüklendi",error:"Belge yüklenemedi"}),{ok:!0}}return{ok:!1,message:"Anlaşılamadı"}}const cn=[{id:"go:dashboard",label:"Go to Dashboard",keywords:["anasayfa","dashboard","home"],run:e=>e.navigateTo("/")},{id:"agent:run",label:"AI Agent: Run Goal",description:"Doğal dille hedef ver, agent uygulasın",keywords:["agent","ai","hedef","goal","otomasyon"],run:async(e,s)=>{const t=s?.query||"";await on(t,e)}},{id:"beneficiary:upload-document",label:"Beneficiary: Upload Document",description:"Belirli bir kişi/ID için belge yükle",keywords:["kişi","belge","yükle","upload","dosya"],run:async(e,s)=>{const t=(s?.query||"").toLowerCase();let a="";const n=t.match(/id\s*[:=]\s*([a-z0-9-]+)/i);if(n&&(a=n[1]),!a){const e=t.match(/(?:ad|name)\s*[:=]\s*([^,]+)/i)||t.match(/([^,]+)\s*(?:için|adlı|kişisi)/i),s=e?e[1].trim():"";if(s){const[e,...t]=s.split(/\s+/),n=t.join(" "),{data:i}=await x.from("beneficiaries").select("id, name, surname").ilike("name",`%${e}%`).ilike("surname",n?`%${n}%`:"%").limit(1).maybeSingle();i?.id&&(a=i.id)}}if(!a)throw new Error("Kişi ID bulunamadı. Lütfen komutta ID belirtin: id:xxxx");const i=document.createElement("input");i.type="file",i.accept="*/*";const r=await new Promise((e,s)=>{i.onchange=()=>{const t=i.files?.[0];t?e(t):s(new Error("Dosya seçilmedi"))},i.click()});await ln(a,r,"uploaded")}},{id:"go:donations",label:"Open Donations",keywords:["bağış","donations"],run:e=>e.navigateTo("/donations")},{id:"go:messages",label:"Open Messages",keywords:["mesaj","messages"],run:e=>e.navigateTo("/messages")},{id:"go:aid",label:"Open Aid",keywords:["yardım","aid"],run:e=>e.navigateTo("/aid")},{id:"go:definitions",label:"Open Definitions",keywords:["tanımlar","definitions"],run:e=>e.navigateTo("/definitions/units")},{id:"theme:light",label:"Theme: Light",keywords:["tema","light","açık"],run:e=>e.setTheme("light")},{id:"theme:dark",label:"Theme: Dark",keywords:["tema","dark","koyu"],run:e=>e.setTheme("dark")},{id:"theme:system",label:"Theme: System",keywords:["tema","system","sistem"],run:e=>e.setTheme("system")},{id:"chat:toggle",label:"Toggle Chat",keywords:["sohbet","chat"],run:e=>e.toggleChat()},{id:"cache:invalidate",label:"Refresh All Data (Invalidate Cache)",keywords:["refresh","cache","yenile"],run:async()=>{await ds.all()}},{id:"prefetch:dashboard",label:"Prefetch Dashboard Data",keywords:["prefetch","dashboard"],run:async()=>{await ms.dashboard()}},{id:"app:reload",label:"Reload Application",keywords:["yeniden yükle","reload","refresh"],run:()=>{window.location.reload()}},{id:"go:login",label:"Go to Login",keywords:["login","giriş"],run:e=>e.navigateTo("/login")}],dn=()=>cn,mn=e=>e.toLowerCase().trim();function un(e,s){if(!e||!s)return 0;if(e===s)return 1;const t=new Set(e.split(/\s+|[/:_-]+/g)),a=new Set(s.split(/\s+|[/:_-]+/g));let n=0;for(const r of t)a.has(r)&&n++;const i=Math.max(t.size,a.size);return i?n/i:0}function hn({isOpen:s,onClose:t,toggleChat:a,onOpenAICenter:r}){const[l,o]=n.useState(""),[c,d]=n.useState(0),m=n.useRef(null),u=i(),{setTheme:h}=Ds();n.useEffect(()=>{s?setTimeout(()=>m.current?.focus(),0):(o(""),d(0))},[s]),n.useEffect(()=>{const e=e=>{if((e.metaKey||e.ctrlKey)&&"k"===e.key.toLowerCase())if(e.preventDefault(),s)t();else{const e=new CustomEvent("open-command-palette");window.dispatchEvent(e)}s&&("Escape"===e.key&&t(),"ArrowDown"===e.key&&n.startTransition(()=>{d(e=>Math.min(e+1,9))}),"ArrowUp"===e.key&&n.startTransition(()=>{d(e=>Math.max(e-1,0))}),"Enter"===e.key&&f())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,l,t]),n.useEffect(()=>{const e=()=>s?void 0:x();return window.addEventListener("open-command-palette",e),()=>window.removeEventListener("open-command-palette",e)},[s]);const x=()=>{setTimeout(()=>m.current?.focus(),0)},p=n.useMemo(()=>dn(),[]),g=n.useMemo(()=>{const e=[...p];if(r&&e.unshift({id:"ai:command-center",label:"AI Komut Merkezi",description:"Doğal dil ile komut ver, akıllı otomasyon",keywords:["ai","yapay zeka","akıllı","otomasyon","komut"],run:()=>{r(),t()}}),!l)return e.slice(0,10);const{action:s}=function(e){const s=mn(e);if(!s)return{action:null,confidence:0};const t=dn(),a=t.find(e=>e.id===s);if(a)return{action:a,confidence:1};let n=null;for(const i of t){const e=i.label?un(s,mn(i.label)):0,t=(i.keywords||[]).reduce((e,t)=>Math.max(e,un(s,mn(t))),0),a=Math.max(e,t);(!n||a>n.score)&&(n={action:i,score:a})}return n&&n.score>=.55?{action:n.action,confidence:n.score}:{action:null,confidence:n?n.score:0}}(l);if(s)return[s,...e.filter(e=>e.id!==s.id)].slice(0,10);const a=l.toLowerCase();return e.filter(e=>e.label.toLowerCase().includes(a)||(e.keywords||[]).some(e=>e.toLowerCase().includes(a))).slice(0,10)},[p,l,r,t]),f=n.useCallback(async()=>{const e=g[c];e&&(await e.run({navigateTo:e=>u(e),setTheme:e=>h(e),toggleChat:a},{query:l}),t())},[g,c,u,h,a,t]);return s?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-start justify-center bg-black/40 p-4",onClick:t,children:e.jsxs("div",{className:"w-full max-w-xl rounded-lg bg-background shadow-xl ring-1 ring-border",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"border-b p-3",children:e.jsx("input",{ref:m,value:l,onChange:e=>{n.startTransition(()=>{o(e.target.value)})},placeholder:"Komut yazın veya ? ile yardım alın (Cmd/Ctrl+K)",className:"w-full bg-transparent outline-none"})}),e.jsx("ul",{className:"max-h-80 overflow-auto p-1",children:g.map((s,t)=>e.jsxs("li",{onMouseEnter:()=>{n.startTransition(()=>{d(t)})},onClick:f,className:"cursor-pointer rounded px-3 py-2 text-sm flex items-center gap-2 "+(t===c?"bg-accent text-accent-foreground":""),children:["ai:command-center"===s.id&&e.jsx(C,{className:"w-4 h-4 text-blue-500"}),s.id.includes("agent:")&&e.jsx(ze,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.label}),s.description?e.jsx("div",{className:"text-muted-foreground text-xs",children:s.description}):null,e.jsx("div",{className:"text-xs text-muted-foreground",children:s.id})]})]},s.id))}),e.jsx("div",{className:"border-t p-2 text-right text-xs text-muted-foreground",children:"Enter: Çalıştır • Esc: Kapat • ↑/↓: Seç"})]})}):null}const xn=new Set(["ve","veya","ile","için","bu","şu","o","bir","iki","üç","dört","beş","altı","yedi","sekiz","dokuz","on","ben","sen","o","biz","siz","onlar","benim","senin","onun","bizim","sizin","onların","ama","fakat","lakin","ancak","sadece","yalnız","hem","da","de","den","dan","gibi","kadar","dolayı","için","üzere","göre","karşı","doğru","yanında","önünde","arkasında","altında","üstünde","içinde","dışında","arasında","öncesinde","sonrasında","sırasında","esnasında","zamanında","vakit","saat","gün","ay","yıl","bugün","dün","yarın","şimdi","az önce","biraz sonra","çok","az","daha","en","pek","oldukça","fazla","az","küçük","büyük","uzun","kısa","geniş","dar","yüksek","alçak","kalın","ince","ağır","hafif","sıcak","soğuk","sert","yumuşak","hızlı","yavaş","erken","geç","yeni","eski","temiz","kirli","güzel","çirkin","iyi","kötü","doğru","yanlış","kolay","zor","basit","karmaşık","açık","kapalı","boş","dolu","tam","yarım","çeyrek"]),pn={CURRENCY:{patterns:[/(\d+(?:\.\d+)?)\s*(?:TL|₺|lira|türk\s*lirası)/i,/(\d+(?:\.\d+)?)\s*(?:USD|\$|dolar)/i,/(\d+(?:\.\d+)?)\s*(?:EUR|€|euro)/i],type:"CURRENCY"},DATE:{patterns:[/(\d{1,2})\/(\d{1,2})\/(\d{4})/,/(\d{1,2})-(\d{1,2})-(\d{4})/,/(\d{1,2})\s+(?:ocak|şubat|mart|nisan|mayıs|haziran|temmuz|ağustos|eylül|ekim|kasım|aralık)\s+(\d{4})/i,/(?:bugün|dün|yarın|bu\s+hafta|geçen\s+hafta|bu\s+ay|geçen\s+ay|bu\s+yıl|geçen\s+yıl)/i],type:"DATE"},NUMBER:{patterns:[/(\d+(?:\.\d+)?)/,/(?:bir|iki|üç|dört|beş|altı|yedi|sekiz|dokuz|on|yüz|bin|milyon)/i],type:"NUMBER"},MODULE:{patterns:[/(?:yardım|aid|beneficiary|ihtiyaç\s+sahibi)/i,/(?:bağış|donation|donation)/i,/(?:mesaj|message|sms|email)/i,/(?:toplantı|meeting|görüşme)/i,/(?:görev|task|iş)/i,/(?:rapor|report|analiz)/i,/(?:kullanıcı|user|personel)/i,/(?:sistem|system|ayar)/i],type:"MODULE"},ACTION:{patterns:[/(?:ekle|oluştur|kaydet|create|add)/i,/(?:listele|göster|bul|ara|list|show|find)/i,/(?:güncelle|değiştir|düzenle|update|edit|modify)/i,/(?:sil|kaldır|delete|remove)/i,/(?:rapor|analiz|report|analyze)/i,/(?:gönder|send|mail|sms)/i,/(?:onayla|approve|confirm)/i,/(?:reddet|reject|deny)/i],type:"ACTION"}},gn={positive:["iyi","güzel","harika","mükemmel","süper","muhteşem","olağanüstü","başarılı","başarı","olumlu","pozitif","gelişme","artış","yükseliş","iyileşme","düzelme","çözüm","çözüldü","tamamlandı","bitirildi"],negative:["kötü","kötüleşme","düşüş","azalma","sorun","problem","hata","hatalı","başarısız","başarısızlık","olumsuz","negatif","kötüleşme","düşüş","azalma","sorun","problem","hata","hatalı","başarısız"],neutral:["normal","standart","ortalama","genel","genelde","genellikle","çoğunlukla","bazen","ara sıra","nadiren","hiç","asla","her zaman"]};class fn{static instance;static getInstance(){return fn.instance||(fn.instance=new fn),fn.instance}tokenize(e){return e.toLowerCase().replace(/[^\w\sğüşıöçĞÜŞİÖÇ]/g," ").split(/\s+/).filter(e=>e.length>0&&!xn.has(e))}extractEntities(e){const s=[];return Object.entries(pn).forEach(([,t])=>{t.patterns.forEach(a=>{const n=e.matchAll(new RegExp(a,"gi"));for(const e of n)s.push({type:t.type,value:e[0],start:e.index,end:e.index+e[0].length,confidence:.8})})}),s}analyzeSentiment(e){const s=this.tokenize(e);let t=0,a=0,n=0;s.forEach(e=>{gn.positive.includes(e)?t++:gn.negative.includes(e)?a++:gn.neutral.includes(e)&&n++});const i=t+a+n;if(0===i)return{score:0,label:"neutral",confidence:.5};const r=(t-a)/i;let l,o;return r>.1?(l="positive",o=Math.abs(r)):r<-.1?(l="negative",o=Math.abs(r)):(l="neutral",o=.5),{score:r,label:l,confidence:o}}recognizeIntent(e){const s=this.tokenize(e),t=new Map;if(s.some(e=>["ekle","oluştur","kaydet","create","add"].includes(e))&&t.set("CREATE",.9),s.some(e=>["listele","göster","bul","ara","list","show","find"].includes(e))&&t.set("LIST",.85),s.some(e=>["güncelle","değiştir","düzenle","update","edit"].includes(e))&&t.set("UPDATE",.9),s.some(e=>["sil","kaldır","delete","remove"].includes(e))&&t.set("DELETE",.95),s.some(e=>["rapor","analiz","report","analyze"].includes(e))&&t.set("REPORT",.8),0===t.size)return{primary:"UNKNOWN",confidence:.1,alternatives:[]};const a=Array.from(t.entries()).sort((e,s)=>s[1]-e[1]);return{primary:a[0][0],confidence:a[0][1],alternatives:a.slice(1).map(([e,s])=>({intent:e,confidence:s}))}}extractContext(e){const s=[];let t="low";[/(?:bugün|dün|yarın|bu\s+hafta|geçen\s+hafta|bu\s+ay|geçen\s+ay)/gi,/(\d{1,2}):(\d{2})/g,/(?:saat|vakit)/gi].forEach(t=>{const a=e.match(t);a&&s.push(...a)});return["acil","hemen","şimdi","derhal","mümkün olduğunca çabuk"].some(s=>new RegExp(s,"i").test(e))?t="high":["yakında","kısa sürede","en kısa sürede"].some(s=>new RegExp(s,"i").test(e))&&(t="medium"),{timeReferences:s,locationReferences:[],personReferences:[],urgency:t}}process(e){return{tokens:this.tokenize(e),entities:this.extractEntities(e),sentiment:this.analyzeSentiment(e),intent:this.recognizeIntent(e),context:this.extractContext(e)}}enhanceCommand(e,s){return{...e,confidence:Math.min(e.confidence*s.intent.confidence,1),metadata:{...e.metadata,nlp:{sentiment:s.sentiment,entities:s.entities,context:s.context}}}}}const jn=fn.getInstance(),yn={"sıfır":0,bir:1,iki:2,"üç":3,"dört":4,"beş":5,"altı":6,yedi:7,sekiz:8,dokuz:9,on:10,onbir:11,oniki:12,"onüç":13,"ondört":14,"onbeş":15,"onaltı":16,onyedi:17,onsekiz:18,ondokuz:19,yirmi:20,otuz:30,"kırk":40,elli:50,"altmış":60,"yetmiş":70,seksen:80,doksan:90,"yüz":100,bin:1e3,milyon:1e6,milyar:1e9},bn={MONEY:{patterns:[/(\d+(?:\.\d+)?)\s*(?:TL|₺|lira|türk\s*lirası)/gi,/(\d+(?:\.\d+)?)\s*(?:USD|\$|dolar|amerikan\s*doları)/gi,/(\d+(?:\.\d+)?)\s*(?:EUR|€|euro|avrupa\s*para\s*birimi)/gi,/(bir|iki|üç|dört|beş|altı|yedi|sekiz|dokuz|on)\s*(?:bin|milyon|milyar)?\s*(?:TL|lira|dolar|euro)/gi],extract:e=>({amount:function(e){const s=e.match(/\d+(?:\.\d+)?/);if(s)return parseFloat(s[0]);let t=0;const a=e.toLowerCase().split(/\s+/);for(const n of a)yn[n]&&(t+=yn[n]);return t||0}(e),currency:e.includes("₺")||e.includes("TL")||e.includes("lira")?"TRY":e.includes("$")||e.includes("dolar")?"USD":e.includes("€")||e.includes("euro")?"EUR":"TRY"})},DATE_TIME:{patterns:[/(?:bugün|dün|yarın|öbür\s*gün|ertesi\s*gün)/gi,/(?:bu\s*(?:hafta|ay|yıl)|geçen\s*(?:hafta|ay|yıl)|gelecek\s*(?:hafta|ay|yıl))/gi,/(\d{1,2})\s*(?:ocak|şubat|mart|nisan|mayıs|haziran|temmuz|ağustos|eylül|ekim|kasım|aralık)\s*(\d{4})?/gi,/(\d{1,2})[:.](\d{2})\s*(?:de|da)?/gi,/(?:sabah|öğle|akşam|gece)\s*(\d{1,2})(?:[:.](\d{2}))?/gi],extract:e=>function(e){const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),s.getDate());return/bugün/.test(e)?t:/dün/.test(e)?new Date(t.getTime()-864e5):/yarın/.test(e)?new Date(t.getTime()+864e5):/bu hafta/.test(e)?t:/geçen hafta/.test(e)?new Date(t.getTime()-6048e5):/gelecek hafta/.test(e)?new Date(t.getTime()+6048e5):t}(e)},PERSON:{patterns:[/(?:bay|bayan|sayın|dr|doktor|prof|profesör|mühendis)\s+([A-ZÇĞŞÜÖ][a-zçğşüöı]+(?:\s+[A-ZÇĞŞÜÖ][a-zçğşüöı]+)*)/gi,/([A-ZÇĞŞÜÖ][a-zçğşüöı]+)\s+([A-ZÇĞŞÜÖ][a-zçğşüöı]+)(?:\s+(?:bey|hanım))?/gi],extract:e=>{const s=e.replace(/(?:bay|bayan|sayın|dr|doktor|prof|profesör|mühendis|bey|hanım)/gi,"").trim(),t=s.split(/\s+/);return{firstName:t[0]||"",lastName:t.slice(1).join(" "),fullName:s}}},PHONE:{patterns:[/(?:\+90\s*)?(?:\(\d{3}\)\s*)?\d{3}\s*\d{3}\s*\d{2}\s*\d{2}/g,/(?:0)?(\d{3})\s*(\d{3})\s*(\d{2})\s*(\d{2})/g],extract:e=>e.replace(/\D/g,"")},EMAIL:{patterns:[/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g],extract:e=>e.toLowerCase()},ADDRESS:{patterns:[/(?:mahalle|mah|sokak|sk|cadde|cad|bulvar|blv|apt|apartman|no|numara)\s*[:\s]*([^,\n]+)/gi,/([\w\s]+)\s*(?:mahallesi|mah\.?)\s*([\w\s]+)\s*(?:sokağı|sk\.?)/gi],extract:e=>e.trim()},PRIORITY:{patterns:[/(?:acil|çok\s*acil|ivedi|derhal|hemen)/gi,/(?:yüksek\s*öncelik|öncelikli|önemli)/gi,/(?:düşük\s*öncelik|normal|standart)/gi],extract:e=>{const s=e.toLowerCase();return/acil|ivedi|derhal|hemen/.test(s)?"high":/yüksek|öncelik|önemli/.test(s)?"medium":"low"}}},vn={CREATE:{keywords:["ekle","oluştur","kaydet","yeni","başlat","kur","tanımla","açıl"],phrases:["yeni.*ekle","kayıt.*oluştur",".*tanımla.*","başlat.*"],confidence:.9},READ:{keywords:["göster","listele","bul","ara","getir","oku","incele"],phrases:[".*listele.*","göster.*","bul.*","neler.*var","hangi.*"],confidence:.85},UPDATE:{keywords:["güncelle","değiştir","düzenle","revize","tadil"],phrases:["güncelle.*","değiştir.*",".*düzenle.*"],confidence:.9},DELETE:{keywords:["sil","kaldır","iptal","sonlandır"],phrases:["sil.*","kaldır.*","iptal.*et"],confidence:.95},APPROVE:{keywords:["onayla","kabul","evet","onay","uygun"],phrases:["onayla.*","kabul.*et.*",".*onay.*ver.*"],confidence:.8},REJECT:{keywords:["reddet","geri çevir","hayır","ret"],phrases:["reddet.*","geri.*çevir.*",".*reddedildi"],confidence:.8},REPORT:{keywords:["rapor","analiz","istatistik","özet","durum"],phrases:["rapor.*al.*",".*analiz.*yap.*","durum.*nedir"],confidence:.7},NAVIGATE:{keywords:["git","yönlendir","aç","geç","sayfa"],phrases:[".*sayfası.*aç","git.*",".*modül.*"],confidence:.6},HELP:{keywords:["yardım","nasıl","ne yapabilirim","komutlar","öğren"],phrases:["yardım.*","nasıl.*","ne.*yapabilirim","komut.*neler"],confidence:.5}},Nn={urgency:{high:["acil","derhal","hemen","çok önemli","kritik"],medium:["mümkün olduğunca","yakında","kısa sürede"]},emotion:{positive:["memnun","mutlu","başarılı","harika","süper"],negative:["sıkıntı","problem","sorun","kötü","başarısız"]},formality:{formal:["sayın","değerli","saygıdeğer","takdir ederim"],informal:["selam","merhaba","teşekkür ederim","teşekkürler"]}};class wn{static instance;static getInstance(){return wn.instance||(wn.instance=new wn),wn.instance}process(e){const s=jn.process(e),t=this.extractStructuredEntities(e),a=this.enhancedIntentRecognition(e);return{...s,originalText:e,intent:a,structuredEntities:t,contextAnalysis:this.analyzeContext(e),suggestions:this.generateSuggestions(e,a,t),confidence:this.calculateConfidence(e,a,t)}}extractStructuredEntities(e){const s={money:[],persons:[],phones:[],emails:[],addresses:[],dates:[],priorities:[]};return Object.entries(bn).forEach(([t,a])=>{a.patterns.forEach(n=>{Array.from(e.matchAll(n)).forEach(e=>{const n=a.extract(e[0]);switch(t){case"MONEY":s.money.push(n);break;case"PERSON":s.persons.push(n);break;case"PHONE":s.phones.push(n);break;case"EMAIL":s.emails.push(n);break;case"ADDRESS":s.addresses.push(n);break;case"DATE_TIME":s.dates.push(n);break;case"PRIORITY":s.priorities.push(n)}})})}),s}enhancedIntentRecognition(e){const s=e.toLowerCase(),t=new Map;if(Object.entries(vn).forEach(([a,n])=>{let i=0;n.keywords.forEach(e=>{s.includes(e)&&(i+=.3)}),n.phrases.forEach(s=>{new RegExp(s,"i").test(e)&&(i+=.5)}),i*=n.confidence,i>0&&t.set(a,i)}),0===t.size)return{primary:"UNKNOWN",confidence:.1,alternatives:[]};const a=Array.from(t.entries()).sort((e,s)=>s[1]-e[1]);return{primary:a[0][0],confidence:Math.min(a[0][1],1),alternatives:a.slice(1).map(([e,s])=>({intent:e,confidence:Math.min(s,1)}))}}analyzeContext(e){const s=e.toLowerCase();let t="low";Nn.urgency.high.some(e=>s.includes(e))?t="high":Nn.urgency.medium.some(e=>s.includes(e))&&(t="medium");let a="neutral";const n=Nn.emotion.positive.filter(e=>s.includes(e)).length,i=Nn.emotion.negative.filter(e=>s.includes(e)).length;n>i?a="positive":i>n&&(a="negative");let r="neutral";Nn.formality.formal.some(e=>s.includes(e))?r="formal":Nn.formality.informal.some(e=>s.includes(e))&&(r="informal");const l=e.split(/\s+/).length,o=e.split(/[.!?]+/).length;let c="simple";return l>20||o>3?c="complex":(l>10||o>1)&&(c="medium"),{urgency:t,emotion:a,formality:r,complexity:c}}generateSuggestions(e,s,t){const a=[];switch(s.primary){case"CREATE":t.persons.length>0&&a.push(`${t.persons[0].fullName} için kayıt oluştur`),t.money.length>0&&a.push(`${t.money[0].amount} ${t.money[0].currency} bağış ekle`),a.push("Yeni kayıt formu aç","Gerekli alanları doldur");break;case"READ":a.push("Tümünü listele","Filtreleme uygula","Arama yap");break;case"UPDATE":a.push("Kaydı bul ve düzenle","Değişiklikleri kaydet");break;case"REPORT":a.push("Aylık rapor al","Excel olarak dışa aktar","Grafik göster");break;case"HELP":a.push("Mevcut komutları listele","Örnek komutları göster","Modül yardımını aç")}return t.phones.length>0&&a.push("SMS gönder","Telefon numarasını kaydet"),t.emails.length>0&&a.push("Email gönder","Email adresini kaydet"),a.slice(0,5)}calculateConfidence(e,s,t){let a=s.confidence;a+=.1*Object.values(t).reduce((e,s)=>e+(Array.isArray(s)?s.length:0),0);const n=e.split(/\s+/).length;return n>=3&&n<=15&&(a+=.1),n>15&&(a-=.1),/[.!?]/.test(e)&&(a+=.05),Math.min(a,1)}generateCommandSuggestions(e){const s=[],t=e.toLowerCase();return Object.entries({"hak sahibi":["Hak sahibi listele","Yeni hak sahibi ekle","Hak sahibi ara: [isim]","Hak sahibi raporu al"],"bağış":["Bağış listele","Yeni bağış ekle: [miktar] TL","Bağış raporu al","Aylık bağış özeti"],"toplantı":["Toplantı listele","Yeni toplantı oluştur","Bugünün toplantıları","Toplantı ajandası"],"görev":["Görev listele","Yeni görev oluştur","Benim görevlerim","Geciken görevler"]}).forEach(([e,a])=>{(t.includes(e)||e.includes(t))&&s.push(...a)}),(t.includes("rapor")||t.includes("analiz"))&&s.push("Bu ay raporu al","Yıllık analiz raporu","Performans raporu"),(t.includes("durum")||t.includes("özet"))&&s.push("Sistem durumu göster","Günlük özet","Genel durum raporu"),s.slice(0,8)}}const kn=wn.getInstance();class _n{static instance;static getInstance(){return _n.instance||(_n.instance=new _n),_n.instance}async processSmartCommand(e,s,t){const a=kn.process(e),n=this.createProcessedCommand(a,t),i=this.createExecutionPlan(a,n),r=this.calculateConfidence(a,n);return{originalText:e,nlpResult:a,processedCommand:n,executionPlan:i,confidence:r,requiredConfirmation:r<.8,estimatedDuration:this.estimateExecutionTime(i)}}async executeSmartCommand(e,s){try{const s={success:!0,status:"ok",message:"Command executed successfully",data:{},executionSteps:e.executionPlan,followUpActions:[],learnedPatterns:[],timestamp:new Date},t=await this.performExecution(e);return t&&(s.success=!0,s.status="ok",s.message="Command completed successfully",s.data=t),s}catch(t){return{success:!1,status:"error",message:t instanceof Error?t.message:"Unknown error",error:t instanceof Error?t.message:"Unknown error",executionSteps:[],followUpActions:[],learnedPatterns:[],timestamp:new Date}}}createProcessedCommand(e,s){return{command:{id:Date.now().toString(),text:e.originalText||"",timestamp:new Date,userId:"anonymous"},intent:{type:e.intent.primary,confidence:e.intent.confidence,entities:{}},confidence:e.confidence,metadata:{entities:e.entities,sentiment:e.sentiment}}}createExecutionPlan(e,s){return[{id:"validation",type:"validation",description:"Validate command parameters"},{id:"execution",type:"execution",description:"Execute the command"}]}calculateConfidence(e,s){return.85}estimateExecutionTime(e){return 2}async performExecution(e){return{success:!0,message:"Command executed"}}}const En=_n.getInstance(),Sn={CERTAINTY:{high:["kesinlikle","mutlaka","elbette","tabii ki","şüphesiz"],medium:["sanırım","galiba","muhtemelen","belki de"]},TEMPORAL_EXPRESSIONS:{immediate:["hemen","şimdi","derhal","acilen"],soon:["yakında","kısa sürede","en kısa zamanda"]}};class zn{static instance;conversationMemory=new Map;constructor(){}static getInstance(){return zn.instance||(zn.instance=new zn),zn.instance}analyzeConversation(e){return{topicProgression:this.extractTopicProgression(e.turns),userSatisfaction:this.assessUserSatisfaction(e.turns),conversationQuality:this.calculateConversationQuality(e.turns),suggestedActions:this.generateSuggestedActions(e),keyEntities:this.extractKeyEntities(e.turns),conversationSummary:this.generateSummary(e.turns)}}analyzeResponseStyle(e){const s=e.toLowerCase(),t={formal:["sayın","saygılarımla","arz ederim","rica ederim"],informal:["selam","merhaba","nasılsın","teşekkürler"]},a=t.formal.some(e=>s.includes(e)),n=t.informal.some(e=>s.includes(e));return{formality:a?"formal":n?"informal":"formal",emotionalTone:this.detectEmotionalTone(s),urgency:this.detectUrgency(s),certainty:this.detectCertainty(s)}}addToMemory(e,s,t){const a={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,content:s,relevanceScore:this.calculateRelevanceScore(s),type:t},n=[...this.conversationMemory.get(e)||[],a].sort((e,s)=>s.relevanceScore-e.relevanceScore).slice(0,50);this.conversationMemory.set(e,n)}getRelevantMemory(e,s){const t=this.conversationMemory.get(e)||[],a=s.toLowerCase().split(/\s+/);return t.filter(e=>{const s=e.content.toLowerCase().split(/\s+/);return a.some(e=>s.some(s=>s.includes(e)||e.includes(s)))}).slice(0,5)}calculateConversationQuality(e){if(0===e.length)return 0;let s=0;return s=.3*this.calculateAverageConfidence(e)+.3*this.calculateResponseRelevance(e)+.2*this.calculateConversationFlow(e)+.2*this.calculateEntityConsistency(e),Math.min(Math.max(s,0),1)}extractTopicProgression(e){const s=[];return e.filter(e=>"user"===e.speaker).forEach(e=>{const t=e.intent;t&&!s.includes(t)&&s.push(t)}),s}assessUserSatisfaction(e){const s=e.filter(e=>"user"===e.speaker);if(0===s.length)return"medium";let t=0;return s.slice(-3).forEach(e=>{const s=e.content.toLowerCase();/teşekkür|memnun|harika|süper|iyi/.test(s)&&(t+=1),/sorun|problem|kötü|yanlış|anlama/.test(s)&&(t-=1),e.confidence>.8&&(t+=.5)}),t>1?"high":t<-1?"low":"medium"}generateSuggestedActions(e){const s=[],t=[...e.turns].reverse().find(e=>"user"===e.speaker);if(!t)return["Kullanıcıyla etkileşime geçin"];switch(t.intent){case"CREATE":s.push("Oluşturma işlemini tamamlamak için eksik bilgileri sorun");break;case"READ":s.push("Arama sonuçlarını filtreleme seçenekleri sunun");break;case"HELP":s.push("Daha spesifik yardım konuları önerin");break;default:s.push("Daha detaylı bilgi için sorular sorun")}return t.confidence<.6&&s.push("Kullanıcının amacını netleştirmek için soru sorun"),s.slice(0,3)}extractKeyEntities(e){const s={};return e.forEach(e=>{e.entities.forEach(e=>{Object.keys(e).forEach(e=>{s[e]=(s[e]||0)+1})})}),s}generateSummary(e){if(0===e.length)return"Henüz konuşma başlamadı.";const s=e.filter(e=>"user"===e.speaker),t=[...new Set(s.map(e=>e.intent))],a={CREATE:"oluşturma",READ:"listeleme/arama",UPDATE:"güncelleme",DELETE:"silme",HELP:"yardım alma",REPORT:"rapor alma"},n=t.map(e=>a[e]||e).join(", ");return`Kullanıcı ${t.length} farklı işlem türü gerçekleştirdi: ${n}. Toplam ${e.length} mesaj alışverişi yapıldı.`}detectEmotionalTone(e){const s=["teşekkür","memnun","harika","süper","iyi","güzel"].filter(s=>e.includes(s)).length,t=["sorun","problem","kötü","yanlış","sıkıntı"].filter(s=>e.includes(s)).length;return s>t?"positive":t>s?"negative":"neutral"}detectUrgency(e){return Sn.TEMPORAL_EXPRESSIONS.immediate.some(s=>e.includes(s))?"high":Sn.TEMPORAL_EXPRESSIONS.soon.some(s=>e.includes(s))?"medium":"low"}detectCertainty(e){return Sn.CERTAINTY.high.some(s=>e.includes(s))?"high":Sn.CERTAINTY.medium.some(s=>e.includes(s))?"medium":"low"}calculateRelevanceScore(e){const s=e.split(/\s+/).length,t=/\b(?:TL|₺|\d+|[A-ZÇĞŞÜÖ][a-zçğşüöı]+)\b/.test(e);let a=Math.min(s/20,1);return t&&(a+=.3),Math.min(a,1)}calculateAverageConfidence(e){return 0===e.length?0:e.reduce((e,s)=>e+s.confidence,0)/e.length}calculateResponseRelevance(e){return.8}calculateConversationFlow(e){return.7}calculateEntityConsistency(e){return.75}}const An=zn.getInstance(),Tn={CREATE:[{id:"create_success",category:"success",template:"✅ {entity} başarıyla oluşturuldu. {details} {nextSteps}",variables:["entity","details","nextSteps"],tone:"neutral",confidence:.9},{id:"create_confirm",category:"confirmation",template:"📝 {entity} oluşturmak için aşağıdaki bilgileri doğrular mısınız? {details}",variables:["entity","details"],tone:"formal",confidence:.8},{id:"create_missing_info",category:"request_info",template:"⚠️ {entity} oluşturmak için {missingFields} bilgilerine ihtiyacım var.",variables:["entity","missingFields"],tone:"neutral",confidence:.7}],READ:[{id:"read_results",category:"data_presentation",template:"📊 {count} adet {entity} bulundu. {summary} {filterOptions}",variables:["count","entity","summary","filterOptions"],tone:"neutral",confidence:.9},{id:"read_empty",category:"no_results",template:"🔍 {criteria} için sonuç bulunamadı. {suggestions}",variables:["criteria","suggestions"],tone:"neutral",confidence:.8},{id:"read_search_help",category:"search_assistance",template:"🎯 Arama kriterlerinizi genişletebiliriz: {options}",variables:["options"],tone:"informal",confidence:.7}],UPDATE:[{id:"update_success",category:"success",template:"✏️ {entity} başarıyla güncellendi. {changes}",variables:["entity","changes"],tone:"neutral",confidence:.9},{id:"update_confirm",category:"confirmation",template:"🔄 {entity} için yapılacak değişiklikler: {changes} Onaylıyor musunuz?",variables:["entity","changes"],tone:"formal",confidence:.8}],DELETE:[{id:"delete_confirm",category:"confirmation",template:"⚠️ {entity} silinecek. Bu işlem geri alınamaz. Emin misiniz?",variables:["entity"],tone:"formal",confidence:.9},{id:"delete_success",category:"success",template:"🗑️ {entity} başarıyla silindi.",variables:["entity"],tone:"neutral",confidence:.9}],HELP:[{id:"help_general",category:"guidance",template:"💡 Size nasıl yardımcı olabilirim? {options}",variables:["options"],tone:"informal",confidence:.8},{id:"help_specific",category:"specific_help",template:"📚 {topic} hakkında: {explanation} {examples}",variables:["topic","explanation","examples"],tone:"neutral",confidence:.9}],ERROR:[{id:"error_general",category:"error_handling",template:"❌ Bir sorun oluştu: {error} {suggestions}",variables:["error","suggestions"],tone:"neutral",confidence:.7},{id:"error_permission",category:"permission_error",template:"🔒 Bu işlem için yetkiniz bulunmuyor. {alternatives}",variables:["alternatives"],tone:"formal",confidence:.9}]},Cn={EXPERTISE_ADAPTATIONS:{beginner:{explanationLevel:"detailed",technicalTerms:"minimal",stepByStep:!0},intermediate:{explanationLevel:"moderate",technicalTerms:"some",stepByStep:!1},expert:{explanationLevel:"brief",technicalTerms:"extensive",stepByStep:!1}}};class In{static instance;userProfiles=new Map;constructor(){}static getInstance(){return In.instance||(In.instance=new In),In.instance}generateContextualResponse(e,s,t,a){const n=this.getUserProfile(s.userId),i=e.intent.primary,r=Tn[i]||Tn.HELP,l=this.selectBestTemplate(r,e,n,a),o=this.personalizeResponse(l,e,n,a),c=this.generateSmartSuggestions(e,t),d=this.generateFollowUpQuestions(e,s),m=this.generateActionItems(e,a);return{content:o,confidence:this.calculateResponseConfidence(e,l,a),tone:n.preferredTone,suggestions:c,followUpQuestions:d,actionItems:m,metadata:{templateUsed:l.id,reasoning:this.generateReasoningExplanation(e,l),alternatives:this.generateAlternativeResponses(r,l)}}}updateUserProfile(e,s){const t={...this.userProfiles.get(e)||{userId:e,preferredTone:"neutral",responseLength:"medium",expertiseLevel:"intermediate",interests:[],commonPatterns:[]},...s};this.userProfiles.set(e,t)}learnFromUserInteraction(e,s,t){const a=this.getUserProfile(e),n=this.detectUserPreferredTone(s);"neutral"!==n&&this.updateUserProfile(e,{preferredTone:n});const i=this.estimateExpertiseLevel(s);i!==a.expertiseLevel&&this.updateUserProfile(e,{expertiseLevel:i});const r=this.extractInterests(s);if(r.length>0){const s=[...new Set([...a.interests,...r])];this.updateUserProfile(e,{interests:s})}}getUserProfile(e){return this.userProfiles.get(e)||{userId:e,preferredTone:"neutral",responseLength:"medium",expertiseLevel:"intermediate",interests:[],commonPatterns:[]}}selectBestTemplate(e,s,t,a){let n=e;a&&(n=a.success?e.filter(e=>"success"===e.category||"data_presentation"===e.category):e.filter(e=>"error_handling"===e.category||"request_info"===e.category));const i=n.filter(e=>e.tone===t.preferredTone||"neutral"===e.tone);return i.length>0&&(n=i),n.reduce((e,s)=>s.confidence>e.confidence?s:e)}personalizeResponse(e,s,t,a){let n=e.template;const i=this.extractTemplateVariables(s,a);return e.variables.forEach(e=>{const s=i[e]||`[${e}]`;n=n.replace(new RegExp(`{${e}}`,"g"),s)}),n=this.addPersonalizationElements(n,t),n=this.adjustForExpertiseLevel(n,t.expertiseLevel),n}generateSmartSuggestions(e,s){const t=[],a=this.getIntentBasedSuggestions(e.intent.primary);return t.push(...a),e.structuredEntities.money?.length&&t.push("Bağış raporunu görüntüle","Finansal özet al"),e.structuredEntities.persons?.length&&t.push("Kişi detaylarını görüntüle","İletişim bilgilerini güncelle"),s.suggestedActions.forEach(e=>{t.includes(e)||t.push(e)}),t.slice(0,5)}generateFollowUpQuestions(e,s){const t=[];return e.confidence<.7&&t.push("Amacınızı daha detaylı açıklayabilir misiniz?"),"CREATE"===e.intent.primary&&(e.structuredEntities.persons?.length||t.push("Hangi kişi için işlem yapmak istiyorsunuz?"),e.structuredEntities.money?.length||t.push("Tutar belirtmek ister misiniz?")),s.turns.length>5&&t.push("Başka hangi konularda yardımcı olabilirim?"),t.slice(0,3)}generateActionItems(e,s){const t=[];return s?.success?(t.push("İşlem tamamlandı ✓"),"CREATE"===e.intent.primary&&t.push("Oluşturulan kaydı kontrol et")):s?.error&&(t.push("Hata giderilmesi gerekiyor"),t.push("Eksik bilgileri tamamla")),"high"===e.contextAnalysis.urgency&&t.push("Öncelikli işlem olarak işaretle"),t}calculateResponseConfidence(e,s,t){let a=s.confidence;return a*=e.confidence,t&&(t.success?a+=.1:a-=.1),Math.min(Math.max(a,0),1)}extractTemplateVariables(e,s){const t={};if(e.structuredEntities.persons?.length&&(t.entity=e.structuredEntities.persons[0].fullName),e.structuredEntities.money?.length){const s=e.structuredEntities.money[0];t.amount=`${s.amount} ${s.currency}`}return s?.data&&Array.isArray(s.data)&&(t.count=s.data.length.toString()),t}addPersonalizationElements(e,s){let t=e;return"formal"===s.preferredTone?t.startsWith("Sayın")||(t=`Sayın kullanıcı, ${t.toLowerCase()}`):"informal"===s.preferredTone&&(t.match(/^(Merhaba|Selam|Hey)/)||(t=`Merhaba! ${t}`)),t}adjustForExpertiseLevel(e,s){return"detailed"===Cn.EXPERTISE_ADAPTATIONS[s].explanationLevel&&(e.includes("detaylı")||(e+=" Detaylar için yardım menüsünü kullanabilirsiniz.")),e}getIntentBasedSuggestions(e){return{CREATE:["Kaydet ve devam et","Önizleme göster","Benzer kayıt oluştur"],READ:["Filtrele","Sırala","Dışa aktar"],UPDATE:["Değişiklikleri kaydet","Geri al","Geçmişi görüntüle"],DELETE:["Kalıcı olarak sil","Geri dönüşüm kutusuna taşı"],HELP:["Komut listesi","Video rehber","Canlı destek"]}[e]||["Daha fazla bilgi al"]}detectUserPreferredTone(e){const s=e.toLowerCase(),t=["sayın","saygılar","rica ederim","lütfen"].filter(e=>s.includes(e)).length,a=["selam","merhaba","teşekkürler","nasılsın"].filter(e=>s.includes(e)).length;return t>a?"formal":a>t?"informal":"neutral"}estimateExpertiseLevel(e){const s=e.toLowerCase(),t=["api","veritabanı","sql","algoritma","performans"].filter(e=>s.includes(e)).length,a=["nasıl","nedir","anlamadım","öğrenebilir miyim"].filter(e=>s.includes(e)).length;return t>1?"expert":a>0?"beginner":"intermediate"}extractInterests(e){const s=e.toLowerCase();return["rapor","analiz","grafik","istatistik","bağış","yardım","toplantı","görev"].filter(e=>s.includes(e))}generateReasoningExplanation(e,s){return`Intent: ${e.intent.primary} (${Math.round(100*e.intent.confidence)}%) → Template: ${s.id}`}generateAlternativeResponses(e,s){return e.filter(e=>e.id!==s.id).slice(0,2).map(e=>e.template)}}const Dn=In.getInstance();const On={voiceEnabled:!0,autoSuggestions:!0,commandHistory:!0,maxHistoryItems:20,responseDelay:500,language:"tr",theme:"light",soundEffects:!0};function Rn({isOpen:s,onClose:t}){const[a,i]=n.useState(()=>{const e=localStorage.getItem("ai-settings");if(e)try{const s=JSON.parse(e);return{...On,...s}}catch{return On}return On}),[r,l]=n.useState(!1),o=(e,s)=>{i(t=>({...t,[e]:s})),l(!0)};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsx(is,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-blue-500"}),e.jsx("h2",{className:"text-xl font-semibold",children:"AI Ayarları"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Ses Ayarları"]}),e.jsxs("div",{className:"space-y-3 pl-6",children:[e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Sesli komut desteği"}),e.jsx("input",{type:"checkbox",checked:a.voiceEnabled,onChange:e=>o("voiceEnabled",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Ses efektleri"}),e.jsx("input",{type:"checkbox",checked:a.soundEffects,onChange:e=>o("soundEffects",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"Komut Ayarları"]}),e.jsxs("div",{className:"space-y-3 pl-6",children:[e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Otomatik öneriler"}),e.jsx("input",{type:"checkbox",checked:a.autoSuggestions,onChange:e=>o("autoSuggestions",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Komut geçmişi"}),e.jsx("input",{type:"checkbox",checked:a.commandHistory,onChange:e=>o("commandHistory",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Maksimum geçmiş sayısı"}),e.jsx("input",{type:"number",min:"5",max:"100",value:a.maxHistoryItems,onChange:e=>o("maxHistoryItems",parseInt(e.target.value)),className:"w-20 px-2 py-1 border rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Yanıt gecikmesi (ms)"}),e.jsx("input",{type:"number",min:"0",max:"2000",step:"100",value:a.responseDelay,onChange:e=>o("responseDelay",parseInt(e.target.value)),className:"w-20 px-2 py-1 border rounded focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Genel Ayarlar"]}),e.jsxs("div",{className:"space-y-3 pl-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Dil"}),e.jsxs("select",{value:a.language,onChange:e=>o("language",e.target.value),className:"px-3 py-1 border rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"tr",children:"Türkçe"}),e.jsx("option",{value:"en",children:"English"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tema"}),e.jsxs("select",{value:a.theme,onChange:e=>o("theme",e.target.value),className:"px-3 py-1 border rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"light",children:"Açık"}),e.jsx("option",{value:"dark",children:"Koyu"}),e.jsx("option",{value:"auto",children:"Otomatik"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t mt-6",children:[e.jsx(ns,{variant:"outline",onClick:()=>{i(On),l(!0),T.success("Ayarlar sıfırlandı")},className:"text-red-600 border-red-300 hover:bg-red-50",children:"Sıfırla"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ns,{variant:"outline",onClick:t,children:"İptal"}),e.jsxs(ns,{onClick:()=>{try{localStorage.setItem("ai-settings",JSON.stringify(a)),T.success("Ayarlar kaydedildi"),l(!1),t()}catch(e){T.error("Ayarlar kaydedilemedi")}},disabled:!r,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Kaydet"]})]})]})]})})}):null}function Pn({isOpen:s,onClose:t,onSelectCommand:a}){const[i,r]=n.useState([]),[l,o]=n.useState(""),[c,d]=n.useState([]);n.useEffect(()=>{if(s){const s=localStorage.getItem("ai-command-history");if(s)try{const e=JSON.parse(s).map(e=>{const s=e;return{...s,timestamp:new Date(s.timestamp)}});r(e)}catch(e){r([])}}},[s]),n.useEffect(()=>{if(""===l.trim())d(i);else{const e=i.filter(e=>e.command.toLowerCase().includes(l.toLowerCase())||e.response&&e.response.toLowerCase().includes(l.toLowerCase()));d(e)}},[i,l]);const m=e=>{const s=(new Date).getTime()-e.getTime(),t=Math.floor(s/6e4),a=Math.floor(s/36e5),n=Math.floor(s/864e5);return t<1?"Az önce":t<60?`${t} dakika önce`:a<24?`${a} saat önce`:n<7?`${n} gün önce`:e.toLocaleDateString("tr-TR")};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs(is,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-blue-500"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Komut Geçmişi"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",c.length," komut)"]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Komutlarda ara...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs(ns,{variant:"outline",onClick:()=>{r([]),localStorage.removeItem("ai-command-history"),T.success("Tüm geçmiş temizlendi")},disabled:0===i.length,className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Tümünü Sil"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:0===c.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:l?"Arama kriterinize uygun komut bulunamadı":"Henüz komut geçmişi yok"})]}):e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-500",children:m(s.timestamp)}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(s.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.success?"Başarılı":"Hatalı"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Komut:"}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm block",children:s.command})]}),s.response&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Yanıt:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded max-h-20 overflow-y-auto",children:s.response})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs(ns,{size:"sm",variant:"outline",onClick:()=>{return e=s.command,navigator.clipboard.writeText(e),void T.success("Komut kopyalandı");var e},className:"text-xs",children:[e.jsx(De,{className:"h-3 w-3 mr-1"}),"Kopyala"]}),a&&e.jsxs(ns,{size:"sm",onClick:()=>{return e=s.command,void(a&&(a(e),t(),T.success("Komut seçildi")));var e},className:"text-xs bg-blue-500 hover:bg-blue-600",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Kullan"]}),e.jsx(ns,{size:"sm",variant:"outline",onClick:()=>(e=>{const s=i.filter(s=>s.id!==e);r(s),localStorage.setItem("ai-command-history",JSON.stringify(s)),T.success("Komut silindi")})(s.id),className:"text-xs text-red-600 border-red-300 hover:bg-red-50",children:e.jsx(Ie,{className:"h-3 w-3"})})]})]})},s.id))})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[e.jsx("span",{children:"Komutlar otomatik olarak kaydedilir ve yerel depolamada saklanır."}),e.jsx(ns,{variant:"outline",onClick:t,children:"Kapat"})]})})]})}):null}function Ln({isOpen:s,onClose:t,userId:a}){const[i,r]=n.useState(null),[l,o]=n.useState(!1);n.useEffect(()=>{s&&c()},[s,a]);const c=async()=>{o(!0);try{const e=[{command:"Hak sahibi listele",timestamp:new Date,result:{success:!0,message:"Başarılı"}},{command:"Bağış ekle",timestamp:new Date,result:{success:!0,message:"Başarılı"}},{command:"Rapor oluştur",timestamp:new Date,result:{success:!1,message:"Hata"}}];r({totalCommands:e.length,successRate:.85,mostUsedCommands:[{command:"Hak sahibi listele",count:15},{command:"Bağış ekle",count:12},{command:"Rapor oluştur",count:8}],learnedPatterns:[{pattern:"Bağış işlemleri",successRate:.92,usageCount:25,lastUsed:new Date},{pattern:"Rapor oluşturma",successRate:.78,usageCount:18,lastUsed:new Date}],recentHistory:e,trends:d(e)})}catch(e){}o(!1)},d=e=>{const s=new Date;s.setDate(s.getDate()-7);const t=e.filter(e=>new Date(e.timestamp)>s),a=new Map;return t.forEach(e=>{const s=new Date(e.timestamp).toDateString();a.set(s,(a.get(s)||0)+1)}),{weeklyTotal:t.length,dailyAverage:t.length/7,dailyBreakdown:Array.from(a.entries())}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-6 h-6 text-purple-500"}),e.jsx("h2",{className:"text-lg font-semibold",children:"AI Asistan Analitikleri"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Toplam Komut"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 mt-1",children:i.totalCommands})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Başarı Oranı"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 mt-1",children:[Math.round(100*i.successRate),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-600",children:"Öğrenilen Pattern"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 mt-1",children:i.learnedPatterns.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Haftalık Kullanım"})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-700 mt-1",children:i.trends.weeklyTotal})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"En Çok Kullanılan Komutlar"]}),e.jsx("div",{className:"space-y-2",children:i.mostUsedCommands.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium",children:s.command}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:s.count/i.mostUsedCommands[0].count*100+"%"}})}),e.jsx("span",{className:"text-sm text-gray-600 min-w-[2rem]",children:s.count})]})]},t))})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),"Öğrenilen AI Paternleri"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.learnedPatterns.map((s,t)=>e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:s.pattern}),e.jsxs("span",{className:"text-xs text-purple-600",children:[Math.round(100*s.successRate),"% başarı"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600",children:[e.jsxs("span",{children:[s.usageCount," kullanım"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Son: ",new Date(s.lastUsed).toLocaleDateString("tr-TR")]})]})]},t))})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Son Komut Geçmişi"]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:i.recentHistory.map((s,t)=>e.jsxs("div",{className:"p-3 rounded border-l-4 "+(s.result.success?"bg-green-50 border-green-400":"bg-red-50 border-red-400"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s.command}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 rounded "+(s.result.success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s.result.success?"✅ Başarılı":"❌ Başarısız"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleString("tr-TR")})]})]}),s.result.message&&e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:s.result.message})]},t))})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Son 7 Gün Kullanım Trendi"]}),e.jsx("div",{className:"space-y-2",children:i.trends.dailyBreakdown.map(([s,t],a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:new Date(s).toLocaleDateString("tr-TR")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-purple-500 transition-all duration-300",style:{width:`${Math.max(t/Math.max(...i.trends.dailyBreakdown.map(([,e])=>e))*100,5)}%`}})}),e.jsx("span",{className:"text-sm min-w-[2rem]",children:t})]})]},a))}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Günlük ortalama: ",Math.round(10*i.trends.dailyAverage)/10," komut"]})]})]}):e.jsx("div",{className:"text-center text-gray-500 mt-8",children:"Analitik verisi bulunamadı"})})]})}):null}function Mn({isOpen:s,onClose:t,context:a,userId:i}){const[r,l]=n.useState([{id:"1",type:"ai",content:"Merhaba! 👋 Size nasıl yardımcı olabilirim? Tüm modülleri kontrol edebilir, raporlar oluşturabilir ve otomatik işlemler yapabilirim.",timestamp:new Date,suggestions:["Hak sahibi listele","Yeni bağış ekle: 1000 TL","Bu ay bağış raporu al","Toplantı oluştur: Yönetim toplantısı","Görevlerimi göster"]}]),[o,c]=n.useState(""),[d,m]=n.useState(!1),[u,h]=n.useState(!1),[x,p]=n.useState([]),[g,f]=n.useState([]),[j,y]=n.useState(-1),[b,v]=n.useState(!1),[N,w]=n.useState(!1),[k,_]=n.useState(!1),[E,S]=n.useState(null),[z,A]=n.useState({sessionId:`session-${Date.now()}`,userId:i||"anonymous",startTime:new Date,turns:[],userPreferences:{language:"tr",formality:"informal",responseLength:"medium"}}),I=n.useRef(null),R=n.useRef(null),P=n.useRef(null);n.useEffect(()=>{s&&R.current&&R.current.focus()},[s]),n.useEffect(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[r]),n.useEffect(()=>{if(o.trim()){const e=function(e){const s=[];return e.toLowerCase().includes("create")&&(s.push("Create new user"),s.push("Create new meeting"),s.push("Create new task")),e.toLowerCase().includes("show")&&(s.push("Show users"),s.push("Show meetings"),s.push("Show tasks")),e.toLowerCase().includes("update")&&(s.push("Update user profile"),s.push("Update meeting details"),s.push("Update task status")),s.slice(0,5)}(o),s=kn.process(o);S(s),n.startTransition(()=>{p(e)})}else n.startTransition(()=>{p([]),S(null)})},[o]),n.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.webkitSpeechRecognition||window.SpeechRecognition;P.current=new e,P.current.continuous=!1,P.current.interimResults=!1,P.current.lang="tr-TR",P.current.onresult=e=>{const s=e.results[0][0].transcript;n.startTransition(()=>{c(s),h(!1)})},P.current.onerror=()=>{n.startTransition(()=>{h(!1)}),T.error("Ses tanıma hatası")},P.current.onend=()=>{n.startTransition(()=>{h(!1)})}}},[]);const L=e=>{const s={...e,id:Date.now().toString(),timestamp:new Date};n.startTransition(()=>{l(e=>[...e,s])})},M=e=>{n.startTransition(()=>{c(e)}),R.current?.focus()};return s?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-lg font-semibold",children:"AI Komut Merkezi"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"Aktif"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"AI Analitikleri",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Ayarlar",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Komut Geçmişi",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"✕"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(s=>{const t="user"===s.type,a="system"===s.type;return e.jsx("div",{className:`flex ${t?"justify-end":"justify-start"} mb-4`,children:e.jsxs("div",{className:`flex max-w-[80%] ${t?"flex-row-reverse":"flex-row"} items-start gap-2`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(t?"bg-blue-500":a?"bg-gray-500":"bg-green-500"),children:t?e.jsx(D,{className:"w-4 h-4 text-white"}):a?e.jsx(ze,{className:"w-4 h-4 text-white"}):e.jsx(C,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"rounded-lg p-3 "+(t?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),children:[e.jsx("div",{className:"whitespace-pre-wrap",children:s.content}),s.data?e.jsx("div",{className:"mt-2 p-2 bg-white bg-opacity-20 rounded text-xs",children:Array.isArray(s.data)?e.jsx("div",{children:s.data.map((s,t)=>e.jsx("div",{className:"mb-1",children:"object"==typeof s&&null!==s?JSON.stringify(s,null,2):String(s)},t))}):e.jsx("pre",{children:JSON.stringify(s.data,null,2)})}):null,s.suggestions&&s.suggestions.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("div",{className:"text-xs opacity-75",children:"Öneriler:"}),s.suggestions.map((s,t)=>e.jsx("button",{onClick:()=>M(s),className:"block w-full text-left p-1 text-xs bg-white bg-opacity-20 rounded hover:bg-opacity-30 transition-colors",children:s},t))]}),E&&"user"===s.type&&e.jsxs("div",{className:"mt-2 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-700 font-medium mb-2",children:"🧠 Gelişmiş AI Analizi:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Intent:"})," ",E.intent.primary,e.jsxs("span",{className:"text-blue-600",children:[" (",Math.round(100*E.intent.confidence),"%)"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Sentiment:"}),e.jsx("span",{className:"ml-1 px-1 py-0.5 rounded "+("positive"===E.sentiment.label?"bg-green-100 text-green-700":"negative"===E.sentiment.label?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:"positive"===E.sentiment.label?"😊 Pozitif":"negative"===E.sentiment.label?"😟 Negatif":"😐 Nötr"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Güven:"}),e.jsxs("span",{className:"ml-1 px-1 py-0.5 rounded "+(E.confidence>.8?"bg-green-100 text-green-700":E.confidence>.6?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[Math.round(100*E.confidence),"%"]})]})]}),e.jsxs("div",{className:"space-y-1",children:["low"!==E.contextAnalysis.urgency&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Aciliyet:"}),e.jsx("span",{className:"ml-1 px-1 py-0.5 rounded text-xs "+("high"===E.contextAnalysis.urgency?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"high"===E.contextAnalysis.urgency?"🚨 Yüksek":"⚡ Orta"})]}),"simple"!==E.contextAnalysis.complexity&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Karmaşıklık:"}),e.jsx("span",{className:"ml-1 px-1 py-0.5 rounded text-xs "+("complex"===E.contextAnalysis.complexity?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"complex"===E.contextAnalysis.complexity?"🔬 Karmaşık":"⚙️ Orta"})]})]})]}),E.structuredEntities&&e.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[E.structuredEntities.money?.map((s,t)=>e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:["💰 ",s.amount," ",s.currency]},t)),E.structuredEntities.persons?.map((s,t)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:["👤 ",s.fullName]},t)),E.structuredEntities.phones?.map((s,t)=>e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:["📞 ",s]},t)),E.structuredEntities.emails?.map((s,t)=>e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs",children:["📧 ",s]},t))]})})]}),e.jsx("div",{className:"text-xs opacity-50 mt-1",children:(s.timestamp instanceof Date?s.timestamp:new Date(s.timestamp)).toLocaleTimeString("tr-TR")})]})]})},s.id)}),d&&e.jsx("div",{className:"flex justify-start mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(Me,{className:"w-4 h-4 text-white animate-spin"})}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"İşleniyor..."})]})})]})}),e.jsx("div",{ref:I})]}),e.jsxs("div",{className:"border-t p-4",children:[x.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Öneriler:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((s,t)=>e.jsx("button",{onClick:()=>M(s),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm transition-colors",children:s},t))})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!o.trim()||d)return;const s=o.trim();L({type:"user",content:s}),n.startTransition(()=>{f(e=>[s,...e.slice(0,19)]),y(-1),c(""),m(!0)});try{L({type:"system",content:"🤖 Komutunuz işleniyor..."});const e=kn.process(s),t={id:Date.now().toString(),timestamp:new Date,speaker:"user",content:s,intent:e.intent.primary,confidence:e.confidence,entities:Object.values(e.structuredEntities).flat().map(e=>({entity:e}))},r={...z,turns:[...z.turns,t]};A(r);const o=await En.processSmartCommand(s,i,a);if(o.requiredConfirmation)return L({type:"ai",content:`⚠️ Bu işlem onay gerektiriyor. Devam etmek istiyor musunuz?\n\nTahmini süre: ${o.estimatedDuration} saniye`,suggestions:["Evet, devam et","Hayır, iptal et","Detayları göster"]}),m(!1),{success:!0,message:"Onay bekleniyor",data:{requiresConfirmation:!0,smartCommand:o}};const c=await En.executeSmartCommand(o,i);n.startTransition(()=>{l(e=>e.slice(0,-1))});const d=An.analyzeConversation(r),u=Dn.generateContextualResponse(e,r,d,{success:"ok"===c.status,data:c.data,error:"ok"!==c.status?c.message:void 0});Dn.learnFromUserInteraction(i||"anonymous",s,u.content),"ok"===c.status?(L({type:"ai",content:u.content,data:c.data,suggestions:u.suggestions,intent:e.intent.primary,confidence:u.confidence,entities:e.structuredEntities?Object.values(e.structuredEntities).flat().map(e=>({entity:e})):[]}),c.data&&(Array.isArray(c.data)?L({type:"system",content:`📊 ${c.data.length} kayıt bulundu`,data:c.data.slice(0,5)}):"object"==typeof c.data&&L({type:"system",content:"📋 İşlem detayları:",data:c.data}))):L({type:"ai",content:u.content,suggestions:u.suggestions,intent:e.intent.primary,confidence:u.confidence,entities:e.structuredEntities?Object.values(e.structuredEntities).flat().map(e=>({entity:e})):[]})}catch(t){const e=t instanceof Error?t.message:"Bilinmeyen hata";n.startTransition(()=>{l(e=>e.slice(0,-1))});try{const t=kn.process(s),a=An.analyzeConversation(z),n=Dn.generateContextualResponse(t,z,a,{success:!1,error:e});L({type:"ai",content:n.content,suggestions:n.suggestions,intent:t.intent.primary,confidence:n.confidence})}catch{L({type:"ai",content:`🚨 Beklenmeyen hata: ${e}`,suggestions:["Lütfen komutu kontrol edip tekrar deneyin"]})}}finally{n.startTransition(()=>{m(!1)})}},className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{ref:R,type:"text",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{if("ArrowUp"===e.key){if(e.preventDefault(),j<g.length-1){const e=j+1;y(e),c(g[e])}}else if("ArrowDown"===e.key)if(e.preventDefault(),j>0){const e=j-1;y(e),c(g[e])}else 0===j&&(y(-1),c(""))},placeholder:"Komutunuzu yazın... (örn: 'Hak sahibi listele', 'Yeni bağış ekle: 1000 TL')",disabled:d,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),P.current&&e.jsx("button",{type:"button",onClick:()=>{P.current?u?(P.current.stop(),h(!1)):(P.current.start(),h(!0),T.success("Dinliyorum... Konuşabilirsiniz")):T.error("Ses tanıma desteklenmiyor")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded "+(u?"text-red-500":"text-gray-400 hover:text-gray-600"),title:u?"Dinlemeyi durdur":"Sesli komut",children:u?e.jsx($e,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"})})]}),e.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsx(Me,{className:"w-4 h-4 animate-spin"}):e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>M("Sistem durumu göster"),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm hover:bg-blue-200 transition-colors",children:"📊 Sistem Durumu"}),e.jsx("button",{onClick:()=>M("Bu ay raporu al"),className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm hover:bg-green-200 transition-colors",children:"📈 Aylık Rapor"}),e.jsx("button",{onClick:()=>M("Bekleyen görevler"),className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm hover:bg-orange-200 transition-colors",children:"⏰ Bekleyen Görevler"}),e.jsx("button",{onClick:()=>M("Yardım"),className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm hover:bg-purple-200 transition-colors",children:"❓ Yardım"})]})]})]}),e.jsx(Rn,{isOpen:b,onClose:()=>v(!1)}),e.jsx(Pn,{isOpen:N,onClose:()=>w(!1),onSelectCommand:e=>c(e)}),e.jsx(Ln,{isOpen:k,onClose:()=>_(!1),userId:i})]}):null}var $n=function(){return null};const Bn=()=>{const{isOnline:s,queueLength:t,showIndicator:a,indicatorText:n,indicatorColor:i}=(()=>{const{isOnline:e,wasOffline:s}=tn(),{queueLength:t}=an();return{isOnline:e,wasOffline:s,queueLength:t,showIndicator:!e||t>0,indicatorText:e?t>0?`${t} işlem bekliyor`:"Online":"Offline",indicatorColor:e?t>0?"orange":"green":"red"}})();if(!a)return null;return e.jsx("div",{className:"fixed bottom-4 left-4 z-50",children:e.jsxs("div",{className:us("flex items-center gap-2 px-3 py-2 rounded-lg border shadow-lg transition-all duration-300",(()=>{switch(i){case"red":return"bg-red-500 text-white border-red-600";case"orange":return"bg-orange-500 text-white border-orange-600";case"green":return"bg-green-500 text-white border-green-600";default:return"bg-gray-500 text-white border-gray-600"}})(),"animate-in slide-in-from-bottom-2"),children:[s?t>0?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:n}),t>0&&e.jsxs("div",{className:"flex items-center gap-1 ml-2 px-2 py-1 bg-white/20 rounded text-xs",children:[e.jsx(Te,{className:"w-3 h-3"}),e.jsx("span",{children:t})]})]})})},Vn=n.forwardRef(({className:a,value:n,...i},r)=>e.jsx(s,{ref:r,className:us("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...i,children:e.jsx(t,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`}})}));function Kn({isOpen:s,onClose:t,onComplete:a,steps:i}){const{t:r}=Je(),[l,o]=n.useState(0),[c,d]=n.useState(new Set),[m,u]=n.useState(!1),[h,x]=n.useState(!1);n.useEffect(()=>{if(s){const e=setTimeout(()=>x(!0),3e3);return()=>clearTimeout(e)}},[s]);const p=(l+1)/i.length*100,g=()=>{d(new Set(i.map(e=>e.id))),a()};if(!s)return null;const j=i[l];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(is,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-cyan-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:l+1})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r(j.title)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r("common.step")," ",l+1," / ",i.length]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[h&&e.jsxs(ns,{variant:"ghost",size:"sm",onClick:()=>{window.confirm(r("onboarding.skip")+"?")&&a()},className:"text-gray-500 hover:text-gray-700",children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),r("onboarding.skip")]}),e.jsx(ns,{variant:"ghost",size:"sm",onClick:()=>{t()},className:"text-gray-500 hover:text-gray-700",children:e.jsx(f,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"px-6 py-3 bg-gray-50",children:e.jsx(Vn,{value:p,className:"h-2"})}),e.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:j.description})}),j.video&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",children:[e.jsxs("video",{className:"w-full h-64 object-cover",controls:!0,onPlay:()=>u(!0),onPause:()=>u(!1),children:[e.jsx("source",{src:j.video,type:"video/mp4"}),r("common.videoNotSupported")]}),e.jsx("div",{className:"absolute top-4 right-4",children:m?e.jsx(Ue,{className:"w-6 h-6 text-white bg-black/50 rounded-full p-1"}):e.jsx(Ye,{className:"w-6 h-6 text-white bg-black/50 rounded-full p-1"})})]})}),e.jsx("div",{className:"mb-6",children:j.content}),j.interactive&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:r("onboarding.stepCompleted")}),e.jsx(ns,{size:"sm",onClick:()=>{return e=j.id,void d(s=>new Set([...s,e]));var e},disabled:c.has(j.id),className:"bg-blue-600 hover:bg-blue-700",children:c.has(j.id)?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-1"}),r("onboarding.completed")]}):r("onboarding.complete")})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t bg-gray-50",children:[e.jsxs(ns,{variant:"outline",onClick:()=>{l>0&&o(l-1)},disabled:0===l,className:"flex items-center",children:[e.jsx(Ge,{className:"w-4 h-4 mr-1"}),r("onboarding.previous")]}),e.jsx("div",{className:"flex items-center space-x-2",children:i.map((s,t)=>e.jsx("div",{className:"w-3 h-3 rounded-full transition-colors "+(t===l?"bg-blue-600":t<l?"bg-green-500":"bg-gray-300")},s.id))}),e.jsx(ns,{onClick:()=>{l<i.length-1?o(l+1):g()},className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:l===i.length-1?r("onboarding.complete"):e.jsxs(e.Fragment,{children:[r("onboarding.next"),e.jsx(P,{className:"w-4 h-4 ml-1"})]})})]})]})})}Vn.displayName=s.displayName;const Un=[{id:"welcome",title:"onboarding.welcome",description:"onboarding.welcomeDescription",content:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-cyan-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(B,{className:"w-10 h-10 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dernek Yönetim Paneli"}),e.jsx("p",{className:"text-gray-600",children:"Modern, güvenli ve kullanıcı dostu dernek yönetim sistemi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(b,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Kullanıcı Yönetimi"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(ge,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Yardım Sistemi"})]})]})]}),interactive:!1},{id:"dashboard",title:"onboarding.dashboardTitle",description:"onboarding.dashboardDescription",content:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(is,{className:"p-4 text-center",children:[e.jsx(M,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"İstatistikler"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Güncel veriler ve grafikler"})]}),e.jsxs(is,{className:"p-4 text-center",children:[e.jsx(w,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Aktiviteler"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Son aktiviteler ve bildirimler"})]}),e.jsxs(is,{className:"p-4 text-center",children:[e.jsx(xe,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Görevler"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bekleyen görevler ve öncelikler"})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"İpucu:"})," Dashboard'da widget'ları düzenleyebilir ve kişiselleştirebilirsiniz."]})})]}),interactive:!0},{id:"modules",title:"onboarding.modulesTitle",description:"onboarding.modulesDescription",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(b,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Yardım Modülü"}),e.jsx("p",{className:"text-xs text-gray-600",children:"İhtiyaç sahipleri ve başvurular"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(ge,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Bağış Modülü"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Bağış takibi ve yönetimi"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[e.jsx(w,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Mesajlaşma"}),e.jsx("p",{className:"text-xs text-gray-600",children:"İletişim ve bildirimler"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(_,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Toplantılar"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Ajanda ve toplantı yönetimi"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-red-50 rounded-lg",children:[e.jsx(xe,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Görevler"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Proje ve görev takibi"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(O,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Sistem"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Ayarlar ve yönetim"})]})]})]})]})}),interactive:!0},{id:"navigation",title:"Navigasyon - Sistemde Gezinme",description:"Sol menüden tüm modüllere erişebilir, üst menüden hızlı işlemler yapabilirsiniz.",content:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Sol Menü"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Dashboard - Ana sayfa"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Yardım - İhtiyaç sahipleri"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Bağışlar - Bağış yönetimi"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{children:"Mesajlar - İletişim"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Üst Menü"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{children:["🔍 ",e.jsx("strong",{children:"Arama"})," - Hızlı arama yapın"]}),e.jsxs("li",{children:["🔔 ",e.jsx("strong",{children:"Bildirimler"})," - Yeni mesajlar ve uyarılar"]}),e.jsxs("li",{children:["👤 ",e.jsx("strong",{children:"Profil"})," - Hesap ayarları"]}),e.jsxs("li",{children:["🎨 ",e.jsx("strong",{children:"Tema"})," - Açık/koyu tema değiştirme"]})]})]})]}),interactive:!0},{id:"ai-assistant",title:"AI Asistan - Akıllı Yardımcı",description:"AI Asistan ile doğal dil kullanarak sistemde işlemler yapabilir, sorular sorabilirsiniz.",content:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"AI Asistan Özellikleri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"💬 Doğal Dil:"})," Türkçe konuşun"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"🎯 Hızlı İşlemler:"})," Komutlarla işlem yapın"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"📊 Raporlar:"})," Otomatik rapor oluşturun"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"🔍 Arama:"})," Akıllı arama yapın"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"📈 Analiz:"})," Veri analizi yapın"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"⚡ Otomasyon:"})," Tekrarlayan işlemler"]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Örnek Komutlar"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:['"',e.jsx("strong",{children:"Hak sahibi listele"}),'" - Tüm ihtiyaç sahiplerini göster']}),e.jsxs("p",{children:['"',e.jsx("strong",{children:"Yeni bağış ekle: 1000 TL"}),'" - Bağış kaydı oluştur']}),e.jsxs("p",{children:['"',e.jsx("strong",{children:"Bu ay bağış raporu al"}),'" - Aylık rapor oluştur']}),e.jsxs("p",{children:['"',e.jsx("strong",{children:"Toplantı oluştur: Yönetim toplantısı"}),'" - Toplantı planla']})]})]})]}),interactive:!0},{id:"permissions",title:"Yetkiler ve Güvenlik",description:"Sistem, rol tabanlı yetkilendirme kullanır. Her kullanıcının belirli yetkileri vardır.",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Kullanıcı Rolleri"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Super Admin"}),e.jsx("span",{className:"text-xs text-red-600",children:"Tam yetki"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Admin"}),e.jsx("span",{className:"text-xs text-orange-600",children:"Yönetim"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Manager"}),e.jsx("span",{className:"text-xs text-yellow-600",children:"Operasyon"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Coordinator"}),e.jsx("span",{className:"text-xs text-green-600",children:"Koordinasyon"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Operator"}),e.jsx("span",{className:"text-xs text-blue-600",children:"İşlem"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Viewer"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Görüntüleme"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Güvenlik Özellikleri"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"JWT tabanlı kimlik doğrulama"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Row Level Security (RLS)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"İki faktörlü doğrulama"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Otomatik oturum sonlandırma"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Şifre politikaları"})]})]})]})]})}),interactive:!0},{id:"completion",title:"Tebrikler! 🎉",description:"Onboarding rehberini tamamladınız. Artık sistemi kullanmaya başlayabilirsiniz.",content:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(xe,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hazırsınız!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Artık Dernek Yönetim Paneli'nin tüm özelliklerini kullanabilirsiniz."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(y,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Dokümantasyon"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Detaylı kullanım kılavuzu"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(w,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Destek"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Yardım ve destek"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx(O,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Ayarlar"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Kişiselleştirme"})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"İpucu:"})," Herhangi bir sorunuz olduğunda AI Asistan'ı kullanabilir veya destek ekibimizle iletişime geçebilirsiniz."]})})]}),interactive:!1}],Yn=({className:s="",variant:t="banner",position:a="bottom",showIcon:i=!0,autoHide:r=!1,autoHideDelay:l=1e4})=>{const{isInstallable:o,isInstalled:c,installApp:d}=function(){const{isInstallable:e,isInstalled:s,installApp:t}=en();return n.useMemo(()=>({isInstallable:e,isInstalled:s,installApp:t}),[e,s,t])}(),[u,h]=n.useState(!0),[x,p]=n.useState(!1);m.useEffect(()=>{if(r&&u&&o){const e=setTimeout(()=>{h(!1)},l);return()=>clearTimeout(e)}},[r,l,u,o]);const g=n.useCallback(async()=>{p(!0);try{await d()&&h(!1)}catch(e){}finally{p(!1)}},[d]),j=n.useCallback(()=>{h(!1),localStorage.setItem("pwa_install_dismissed",Date.now().toString())},[]);if(!o||c||!u)return null;const y=localStorage.getItem("pwa_install_dismissed");if(y){if(new Date(parseInt(y))>new Date(Date.now()-6048e5))return null}return"modal"===t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-white rounded-lg shadow-xl max-w-md w-full p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(X,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Uygulamayı Yükle"})]}),e.jsx("button",{onClick:j,className:"p-1 hover:bg-gray-100 rounded","aria-label":"Kapat",children:e.jsx(f,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Dernek Yönetim Paneli'ni cihazınıza yükleyerek daha hızlı erişim sağlayın. Offline çalışma, bildirimler ve daha iyi performans özelliklerinden yararlanın."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:g,disabled:x,className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Yükleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4"}),"Yükle"]})}),e.jsx("button",{onClick:j,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Daha Sonra"})]})]})}):"floating"===t?e.jsx("div",{className:`fixed ${"top"===a?"top-4":"bottom-4"} right-4 z-40 ${s}`,children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg border p-4 max-w-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i&&e.jsx(S,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-medium text-sm",children:"App Yükle"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Daha iyi deneyim için uygulamayı yükleyin"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:g,disabled:x,className:"bg-blue-500 text-white text-xs py-1 px-3 rounded hover:bg-blue-600 disabled:opacity-50",children:x?"Yükleniyor...":"Yükle"}),e.jsx("button",{onClick:j,className:"text-gray-500 text-xs py-1 px-2 hover:text-gray-700",children:"Kapat"})]})]}),e.jsx("button",{onClick:j,className:"p-1 hover:bg-gray-100 rounded","aria-label":"Kapat",children:e.jsx(f,{className:"w-4 h-4"})})]})})}):e.jsx("div",{className:`\n      fixed ${"top"===a?"top-0":"bottom-0"} left-0 right-0 z-40 \n      bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 shadow-lg\n      ${s}\n    `,children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(He,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Dernek Paneli'ni Yükle"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Offline erişim, hızlı performans ve bildirimler için uygulamayı cihazınıza yükleyin"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:g,disabled:x,className:"bg-white text-blue-600 py-2 px-4 rounded-lg font-medium hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Yükleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4"}),"Yükle"]})}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-blue-400 rounded","aria-label":"Kapat",children:e.jsx(f,{className:"w-5 h-5"})})]})]})})},Fn=({className:s="",variant:t="toast",position:a="top-right",autoShow:i=!0})=>{const{hasUpdate:r,updateApp:l}=function(){const{hasUpdate:e,updateApp:s}=en();return n.useMemo(()=>({hasUpdate:e,updateApp:s}),[e,s])}(),[o,c]=n.useState(!0),[d,m]=n.useState(!1),u=n.useCallback(async()=>{m(!0);try{await l()}catch(e){m(!1)}},[l]),h=n.useCallback(()=>{c(!1)},[]);if(!r||!o||!i)return null;if("modal"===t)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:`bg-white rounded-lg shadow-xl max-w-md w-full p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Güncelleme Mevcut"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Yeni özellikler ve düzeltmeler"})]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Dernek Yönetim Paneli'nin yeni bir sürümü mevcut. Güncellemek için aşağıdaki butona tıklayın. Uygulama otomatik olarak yeniden başlayacak."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:u,disabled:d,className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Güncelleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4"}),"Şimdi Güncelle"]})}),e.jsx("button",{onClick:h,disabled:d,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Daha Sonra"})]})]})});if("banner"===t)return e.jsx("div",{className:`\n        fixed ${"top"===a?"top-0":"bottom-0"} left-0 right-0 z-40 \n        bg-gradient-to-r from-green-500 to-green-600 text-white p-4 shadow-lg\n        ${s}\n      `,children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Güncelleme Mevcut"}),e.jsx("p",{className:"text-sm text-green-100",children:"Yeni özellikler ve hata düzeltmeleri içeren bir güncelleme mevcut"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:u,disabled:d,className:"bg-white text-green-600 py-2 px-4 rounded-lg font-medium hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:d?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Güncelleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4"}),"Güncelle"]})}),e.jsx("button",{onClick:h,disabled:d,className:"p-2 hover:bg-green-400 rounded disabled:opacity-50","aria-label":"Kapat",children:e.jsx(f,{className:"w-5 h-5"})})]})]})});return e.jsx("div",{className:`fixed ${{top:"top-4 left-1/2 transform -translate-x-1/2",bottom:"bottom-4 left-1/2 transform -translate-x-1/2","top-right":"top-4 right-4"}[a]} z-40 ${s}`,children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-green-200 p-4 max-w-sm min-w-80",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(be,{className:"w-4 h-4 text-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Güncelleme Mevcut"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Yeni özellikler ve düzeltmeler içeren bir sürüm mevcut"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:u,disabled:d,className:"bg-green-500 text-white text-xs py-1.5 px-3 rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:d?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-3 h-3 animate-spin"}),"Güncelleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-3 h-3"}),"Güncelle"]})}),e.jsx("button",{onClick:h,disabled:d,className:"text-gray-500 text-xs py-1.5 px-2 hover:text-gray-700 disabled:opacity-50",children:"Sonra"})]})]})]}),e.jsx("button",{onClick:h,disabled:d,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50","aria-label":"Kapat",children:e.jsx(f,{className:"w-4 h-4"})})]})})})},Gn=({className:s="",variant:t="badge",showQueueInfo:a=!0,position:i="top-right"})=>{const{isOnline:r,isOfflineCapable:l,processOfflineQueue:o}=en(),{queueStats:c}=function(){const{queueStats:e,processOfflineQueue:s,enqueueOfflineAction:t}=en();return n.useMemo(()=>({queueStats:e,processOfflineQueue:s,enqueueOfflineAction:t}),[e,s,t])}(),[d,m]=n.useState(!1),[u,h]=n.useState(!1);n.useEffect(()=>{if("icon"===t){m(!0);const e=setTimeout(()=>m(!1),3e3);return()=>clearTimeout(e)}},[r,t]);const x=async()=>{if(r){h(!0);try{await o()}catch(e){}finally{h(!1)}}},p=()=>r?c&&c.pendingActions>0?"text-yellow-500":"text-green-500":"text-red-500",g=()=>r?c&&c.pendingActions>0?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200":"bg-red-50 border-red-200",f=()=>r?c&&c.pendingActions>0?`${c.pendingActions} Bekliyor`:"Online":"Offline",j=()=>r?c&&c.pendingActions>0?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"}):l?e.jsx(Ee,{className:"w-4 h-4"}):e.jsx(qe,{className:"w-4 h-4"});if("icon"===t){const t={"top-left":"top-4 left-4","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-right":"bottom-4 right-4"};return e.jsx("div",{className:`fixed ${t[i]} z-30 ${s}`,children:e.jsxs("div",{className:`\n            relative cursor-pointer transition-all duration-200\n            ${d?"transform scale-110":""}\n          `,onClick:()=>m(!d),children:[e.jsx("div",{className:`\n            w-10 h-10 rounded-full flex items-center justify-center\n            ${g()} border backdrop-blur-sm\n            ${p()}\n          `,children:j()}),d&&e.jsxs("div",{className:"absolute top-12 right-0 bg-white rounded-lg shadow-lg border p-3 min-w-48 z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j(),e.jsx("span",{className:`font-medium text-sm ${p()}`,children:f()})]}),a&&c&&e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Toplam İşlem: ",c.totalActions]}),e.jsxs("div",{children:["Bekleyen: ",c.pendingActions]}),e.jsxs("div",{children:["Başarısız: ",c.failedActions]}),r&&c.pendingActions>0&&e.jsx("button",{onClick:x,disabled:u,className:"mt-2 w-full bg-blue-500 text-white py-1 px-2 rounded text-xs hover:bg-blue-600 disabled:opacity-50",children:u?"Senkronize ediliyor...":"Şimdi Senkronize Et"})]})]})]})})}return"banner"===t?!r||c&&0!==c.pendingActions?e.jsx("div",{className:`\n        w-full p-3 border-b\n        ${g()}\n        ${s}\n      `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:p(),children:j()}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium text-sm ${p()}`,children:r?`${c?.pendingActions} İşlem Senkronizasyon Bekliyor`:"Offline Modda Çalışıyorsunuz"}),e.jsx("div",{className:"text-xs text-gray-600",children:r?"İnternet bağlantınız mevcut. İşlemleri senkronize edebilirsiniz.":"İşlemleriniz kuyruğa alınıyor. İnternet bağlantısı geldiğinde otomatik senkronize edilecek."})]})]}),r&&c&&c.pendingActions>0&&e.jsx("button",{onClick:x,disabled:u,className:"bg-blue-500 text-white py-1 px-3 rounded text-sm hover:bg-blue-600 disabled:opacity-50 flex items-center gap-1",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 animate-spin"}),"Senkronize ediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4"}),"Senkronize Et"]})})]})}):null:e.jsxs("div",{className:`\n      inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border\n      ${g()} ${p()}\n      ${s}\n    `,children:[j(),e.jsx("span",{children:f()}),a&&c&&c.pendingActions>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs",children:"•"}),e.jsxs("span",{className:"text-xs",children:[c.pendingActions," bekliyor"]}),r&&e.jsx("button",{onClick:x,disabled:u,className:"ml-1 p-1 hover:bg-white hover:bg-opacity-50 rounded",title:"Şimdi senkronize et",children:e.jsx(Oe,{className:"w-3 h-3 "+(u?"animate-spin":"")})})]}),!l&&!r&&e.jsx(We,{className:"w-4 h-4 text-orange-500"})]})},Hn=({children:s,showInstallBanner:t=!0,showUpdateNotification:a=!0,showOfflineStatus:n=!0,installBannerVariant:i="floating",updateNotificationVariant:r="toast",offlineStatusVariant:l="icon",className:o=""})=>e.jsxs("div",{className:o,children:[s,t&&e.jsx(Yn,{variant:i,position:"bottom",autoHide:!0,autoHideDelay:15e3}),a&&e.jsx(Fn,{variant:r,position:"top-right",autoShow:!0}),n&&e.jsx(Gn,{variant:l,position:"top-right",showQueueInfo:!0})]});function Wn({user:s,resetOnboarding:t,setShowOnboarding:a}){const[r,l]=n.useState(!1),[o,c]=n.useState(!1),{isOpen:d,openCommandCenter:m,closeCommandCenter:u,actionContext:h,userId:x}=function(){const[e,s]=n.useState(!1),t=i(),{user:a}=A(),{setTheme:r}=Ds(),l=n.useCallback(()=>{const e=new CustomEvent("toggle-chat");window.dispatchEvent(e)},[]),o={navigateTo:n.useCallback(e=>{t(e),s(!1)},[t]),setTheme:n.useCallback(e=>{r(e)},[r]),toggleChat:n.useCallback(()=>{l()},[l])};n.useEffect(()=>{const t=t=>{(t.metaKey||t.ctrlKey)&&"k"===t.key&&(t.preventDefault(),s(e=>!e)),"Escape"===t.key&&e&&s(!1)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);const c=n.useCallback(()=>{s(!0)},[]),d=n.useCallback(()=>{s(!1)},[]);return{isOpen:e,openCommandCenter:c,closeCommandCenter:d,actionContext:o,userId:a?.id}}();n.useEffect(()=>{const e=()=>{n.startTransition(()=>{c(!0)})};return window.addEventListener("open-command-palette",e),()=>window.removeEventListener("open-command-palette",e)},[]);const p=()=>{n.startTransition(()=>{l(!r)})};return e.jsxs(Bs,{onOpenAICenter:m,children:[e.jsx(Fa,{level:"page",children:e.jsx(Ya,{})}),e.jsx(Qe,{position:"top-right",expand:!0,richColors:!0,closeButton:!0}),e.jsx(sn,{}),e.jsx(Bn,{}),s&&e.jsx(ys,{currentUserId:s.id,isOpen:r,onToggle:p}),e.jsx(hn,{isOpen:o,onClose:()=>c(!1),toggleChat:p,onOpenAICenter:m}),e.jsx(Mn,{isOpen:d,onClose:u,context:h,userId:x}),!1]})}function qn(){const{initializing:s,initialize:t}=A(),{user:a}=A(),{showOnboarding:i,completeOnboarding:r,resetOnboarding:l,setShowOnboarding:o,closeOnboarding:c}=function(){const{user:e}=A(),[s,t]=n.useState({isCompleted:!1,currentStep:0,completedSteps:[]}),[a,i]=n.useState(!1);n.useEffect(()=>{if(e){const a=localStorage.getItem(`onboarding_${e.id}`);if(a)try{const e=JSON.parse(a);n.startTransition(()=>{t(e)})}catch(s){}}},[e]),n.useEffect(()=>{if(e){const t=localStorage.getItem(`onboarding_${e.id}`);if(t)try{const e=JSON.parse(t);n.startTransition(()=>{e.isCompleted?i(!1):i(!0)})}catch(s){n.startTransition(()=>{i(!0)})}else n.startTransition(()=>{i(!0)})}},[e]);const r=()=>{if(!e)return;const s={isCompleted:!0,currentStep:0,completedSteps:[],lastCompletedAt:(new Date).toISOString()};n.startTransition(()=>{t(s),i(!1)}),localStorage.setItem(`onboarding_${e.id}`,JSON.stringify(s))};return{showOnboarding:a,onboardingState:s,markStepComplete:s=>{e&&n.startTransition(()=>{t(t=>{const a={...t,completedSteps:[...t.completedSteps,s],currentStep:t.currentStep+1};return localStorage.setItem(`onboarding_${e.id}`,JSON.stringify(a)),a})})},completeOnboarding:r,resetOnboarding:()=>{if(!e)return;const s={isCompleted:!1,currentStep:0,completedSteps:[]};n.startTransition(()=>{t(s),i(!0)}),localStorage.removeItem(`onboarding_${e.id}`)},skipOnboarding:()=>{r()},setShowOnboarding:i,closeOnboarding:()=>{n.startTransition(()=>{i(!1)})}}}();return n.useEffect(()=>{t()},[t]),n.useEffect(()=>{hs.loadFromStorage();const e=()=>{hs.saveToStorage()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Uygulama yükleniyor..."})]})}):e.jsx(Fa,{level:"global",showDetails:!1,children:e.jsx(Os,{children:e.jsx(xs,{children:e.jsxs(Ns,{client:ps,children:[e.jsx(rn,{children:e.jsx(js,{children:e.jsxs(Hn,{showInstallBanner:!0,showUpdateNotification:!0,showOfflineStatus:!0,installBannerVariant:"floating",updateNotificationVariant:"toast",offlineStatusVariant:"icon",children:[e.jsx(Wn,{user:a,resetOnboarding:l,setShowOnboarding:o}),e.jsx(Kn,{isOpen:i,onClose:c,onComplete:r,steps:Un})]})})}),e.jsx($n,{initialIsOpen:!1})]})})})})}const Qn=document.getElementById("root");if(!Qn)throw new Error("Root element not found");_s(Qn).render(e.jsx(m.StrictMode,{children:e.jsx(u,{children:e.jsx(qn,{})})}));export{Ss as g};
