import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as t}from"./react-vendor-DCtPEfzS.js";import{D as a}from"./donations-DMDPGCBk.js";import{P as s}from"./aid-DeFRiBQl.js";import{M as r}from"./messages-BBXjWSN2.js";import"./auth-aCCa6xWs.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";import"./chart-vendor-CNXqmhrW.js";import"./dashboard-xaTgABQW.js";function l({query:t,setQuery:a,statusFilter:s,setStatusFilter:r,priorityFilter:l,setPriorityFilter:n,departmentFilter:i,setDepartmentFilter:d,approvalFilter:o,setApprovalFilter:m,paymentFilter:u,setPaymentFilter:c,dateFilter:p,setDateFilter:x}){return e.jsxs("div",{className:"bg-white p-4 rounded-lg border mb-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Arama"}),e.jsx("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"Talep no, kişi, amaç...",className:"w-full border rounded px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Durum"}),e.jsxs("select",{value:s,onChange:e=>r(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"taslak",children:"Taslak"}),e.jsx("option",{value:"gönderildi",children:"Gönderildi"}),e.jsx("option",{value:"işlemde",children:"İşlemde"}),e.jsx("option",{value:"tamamlandı",children:"Tamamlandı"}),e.jsx("option",{value:"iptal",children:"İptal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),e.jsxs("select",{value:l,onChange:e=>n(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"düşük",children:"Düşük"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"yüksek",children:"Yüksek"}),e.jsx("option",{value:"acil",children:"Acil"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departman"}),e.jsx("input",{type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"Departman adı...",className:"w-full border rounded px-3 py-2 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Durumu"}),e.jsxs("select",{value:o,onChange:e=>m(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"reddedildi",children:"Reddedildi"}),e.jsx("option",{value:"revizyon",children:"Revizyon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ödeme Durumu"}),e.jsxs("select",{value:u,onChange:e=>c(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Tümü"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"kısmi",children:"Kısmi"}),e.jsx("option",{value:"tamamlandı",children:"Tamamlandı"}),e.jsx("option",{value:"iptal",children:"İptal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tarih Filtresi"}),e.jsx("input",{type:"date",value:p,onChange:e=>x(e.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})]})}function n(t){return[{key:"requestId",header:"Talep No",render:(e,a)=>{const s=t.find(e=>e.id===a.requestId);return s?s.requestNumber:"Bilinmiyor"}},{key:"itemType",header:"Tip",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("nakit"===a.itemType?"bg-green-100 text-green-800":"gıda"===a.itemType?"bg-blue-100 text-blue-800":"giyim"===a.itemType?"bg-purple-100 text-purple-800":"barınma"===a.itemType?"bg-orange-100 text-orange-800":"sağlık"===a.itemType?"bg-red-100 text-red-800":"eğitim"===a.itemType?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:a.itemType})},{key:"itemName",header:"Kalem Adı"},{key:"description",header:"Açıklama"},{key:"quantity",header:"Miktar/Birim",render:(e,t)=>`${t.quantity} ${t.unit}`},{key:"unitPrice",header:"Birim/Toplam",render:(t,a)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[a.unitPrice.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{className:"text-gray-500 font-medium",children:[a.totalPrice.toLocaleString("tr-TR")," ₺"]})]})},{key:"supplier",header:"Tedarikçi"},{key:"deliveryDate",header:"Teslimat",render:(e,t)=>t.deliveryDate?new Date(t.deliveryDate).toLocaleDateString("tr-TR"):"-"},{key:"status",header:"Durum",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("teslim-edildi"===a.status?"bg-green-100 text-green-800":"sipariş-verildi"===a.status?"bg-blue-100 text-blue-800":"onaylandı"===a.status?"bg-yellow-100 text-yellow-800":"beklemede"===a.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:a.status})}]}function i(t){return[{key:"requestId",header:"Talep No",render:(e,a)=>{const s=t.find(e=>e.id===a.requestId);return s?s.requestNumber:"Bilinmiyor"}},{key:"paymentDate",header:"Ödeme Tarihi",render:(e,t)=>new Date(t.paymentDate).toLocaleDateString("tr-TR")},{key:"amount",header:"Tutar",render:(e,t)=>`${t.amount.toLocaleString("tr-TR")} ${t.currency}`},{key:"paymentMethod",header:"Ödeme Yöntemi",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("nakit"===a.paymentMethod?"bg-green-100 text-green-800":"banka"===a.paymentMethod?"bg-blue-100 text-blue-800":"kredi-kartı"===a.paymentMethod?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"),children:a.paymentMethod})},{key:"referenceNumber",header:"Referans No"},{key:"paidBy",header:"Ödeyen"},{key:"receivedBy",header:"Alan"},{key:"receiptNumber",header:"Makbuz No"},{key:"status",header:"Durum",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("tamamlandı"===a.status?"bg-green-100 text-green-800":"beklemede"===a.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:a.status})}]}function d({selectedRequest:t,items:s,payments:l,requests:d,isItemsModalOpen:o,setIsItemsModalOpen:m,isPaymentsModalOpen:u,setIsPaymentsModalOpen:c,isApprovalModalOpen:p,setIsApprovalModalOpen:x,isAddModalOpen:h,setIsAddModalOpen:y,onApprovalSubmit:b}){const g=n(d),j=i(d);return e.jsxs(e.Fragment,{children:[e.jsx(r,{isOpen:o,onClose:()=>m(!1),title:`Kalemler - ${t?.requestNumber}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Talep Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:["Amaç: ",t?.purpose]}),e.jsxs("div",{children:["Toplam Tutar: ",t?.totalAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{children:["Faydalanıcı: ",t?.beneficiaryCount," kişi"]}),e.jsxs("div",{children:["Hedef Tarih: ",t?.targetDate]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx(a,{columns:g,data:s.filter(e=>e.requestId===t?.id)})})]})}),e.jsx(r,{isOpen:u,onClose:()=>c(!1),title:`Ödemeler - ${t?.requestNumber}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Ödeme Özeti"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Toplam Tutar:"}),e.jsxs("div",{className:"font-medium",children:[t?.totalAmount.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Ödenen:"}),e.jsxs("div",{className:"font-medium text-green-600",children:[t?.paidAmount.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Kalan:"}),e.jsxs("div",{className:"font-medium text-orange-600",children:[t?.remainingAmount.toLocaleString("tr-TR")," ₺"]})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx(a,{columns:j,data:l.filter(e=>e.requestId===t?.id)})})]})}),e.jsx(r,{isOpen:p,onClose:()=>x(!1),title:`Talep Onayı - ${t?.requestNumber}`,children:e.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget),a={status:t.get("status"),notes:t.get("notes")};b?.(a),x(!1)},className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Talep Detayları"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:["Talep Eden: ",t?.requestedBy]}),e.jsxs("div",{children:["Departman: ",t?.department]}),e.jsxs("div",{children:["Amaç: ",t?.purpose]}),e.jsxs("div",{children:["Tutar: ",t?.totalAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{children:["Faydalanıcı: ",t?.beneficiaryCount," kişi"]}),e.jsxs("div",{children:["Hedef Tarih: ",t?.targetDate]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Açıklama:"}),e.jsx("p",{className:"text-sm mt-1",children:t?.description})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Durumu"}),e.jsxs("select",{name:"status",className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"onaylandı",children:"Onayla"}),e.jsx("option",{value:"reddedildi",children:"Reddet"}),e.jsx("option",{value:"revizyon",children:"Revizyon İste"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Notları"}),e.jsx("textarea",{name:"notes",className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Onay/ret gerekçesi...",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Kaydet"})]})]})}),e.jsx(r,{isOpen:h,onClose:()=>y(!1),title:"Yeni Provizyon Talebi",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.currentTarget);t.get("title"),t.get("description"),t.get("priority"),t.get("type"),t.get("amount"),(new Date).toISOString();try{alert("Talep başarıyla eklendi!"),y(!1)}catch(a){alert("Talep eklenirken hata oluştu!")}},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Talep Başlığı"}),e.jsx("input",{type:"text",name:"title",className:"w-full border rounded px-3 py-2",placeholder:"Talep başlığını girin...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departman"}),e.jsxs("select",{name:"department",className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Departman seçin..."}),e.jsx("option",{value:"IT",children:"IT"}),e.jsx("option",{value:"İnsan Kaynakları",children:"İnsan Kaynakları"}),e.jsx("option",{value:"Muhasebe",children:"Muhasebe"}),e.jsx("option",{value:"Satış",children:"Satış"}),e.jsx("option",{value:"Pazarlama",children:"Pazarlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),e.jsxs("select",{name:"priority",className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Öncelik seçin..."}),e.jsx("option",{value:"Düşük",children:"Düşük"}),e.jsx("option",{value:"Orta",children:"Orta"}),e.jsx("option",{value:"Yüksek",children:"Yüksek"}),e.jsx("option",{value:"Acil",children:"Acil"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama"}),e.jsx("textarea",{name:"description",className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Talep açıklaması...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bütçe (TL)"}),e.jsx("input",{type:"number",name:"budget",className:"w-full border rounded px-3 py-2",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Talep Oluştur"})]})]})})]})}function o(){const[r]=t.useState([]),[o]=t.useState([]),[m]=t.useState([]),[u,c]=t.useState(""),[p,x]=t.useState(""),[h,y]=t.useState(""),[b,g]=t.useState(""),[j,v]=t.useState(""),[N,k]=t.useState(""),[f,T]=t.useState(""),[w,S]=t.useState("requests"),[D,q]=t.useState(!1),[A,O]=t.useState(!1),[C,F]=t.useState(!1),[M,L]=t.useState(!1),[I,R]=t.useState(null),P=t.useMemo(()=>r.filter(e=>{const t=JSON.stringify(e).toLowerCase().includes(u.toLowerCase()),a=!p||e.status===p,s=!h||e.priority===h,r=!b||e.department.toLowerCase().includes(b.toLowerCase()),l=!j||e.approvalStatus===j,n=!N||e.paymentStatus===N,i=!f||e.requestDate.includes(f);return t&&a&&s&&r&&l&&n&&i}),[r,u,p,h,b,j,N,f]),B=t.useMemo(()=>o.filter(e=>JSON.stringify(e).toLowerCase().includes(u.toLowerCase())),[o,u]),z=t.useMemo(()=>m.filter(e=>JSON.stringify(e).toLowerCase().includes(u.toLowerCase())),[m,u]),K=function({onEdit:t,onViewItems:a,onViewPayments:s,onApproval:r}){return[{key:"requestNumber",header:"Talep No"},{key:"requestDate",header:"Tarih",render:(e,t)=>new Date(t.requestDate).toLocaleDateString("tr-TR")},{key:"requestedBy",header:"Talep Eden"},{key:"department",header:"Departman"},{key:"priority",header:"Öncelik",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("acil"===a.priority?"bg-red-100 text-red-800":"yüksek"===a.priority?"bg-orange-100 text-orange-800":"normal"===a.priority?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:a.priority})},{key:"totalAmount",header:"Tutar/Faydalanıcı",render:(t,a)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium",children:[a.totalAmount.toLocaleString("tr-TR")," ₺"]}),e.jsxs("div",{className:"text-gray-500",children:[a.beneficiaryCount," kişi"]})]})},{key:"purpose",header:"Amaç"},{key:"targetDate",header:"Hedef Tarih",render:(e,t)=>new Date(t.targetDate).toLocaleDateString("tr-TR")},{key:"approvalStatus",header:"Onay Durumu",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("onaylandı"===a.approvalStatus?"bg-green-100 text-green-800":"beklemede"===a.approvalStatus?"bg-yellow-100 text-yellow-800":"reddedildi"===a.approvalStatus?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:a.approvalStatus})},{key:"paymentStatus",header:"Ödeme Durumu",render:(t,a)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("tamamlandı"===a.paymentStatus?"bg-green-100 text-green-800":"kısmi"===a.paymentStatus?"bg-yellow-100 text-yellow-800":"beklemede"===a.paymentStatus?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:a.paymentStatus}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.paidAmount.toLocaleString("tr-TR")," / ",a.totalAmount.toLocaleString("tr-TR")," ₺"]})]})},{key:"status",header:"Durum",render:(t,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("tamamlandı"===a.status?"bg-green-100 text-green-800":"işlemde"===a.status?"bg-blue-100 text-blue-800":"gönderildi"===a.status?"bg-yellow-100 text-yellow-800":"taslak"===a.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:a.status})},{key:"id",header:"İşlemler",render:(l,n)=>e.jsxs("div",{className:"flex gap-1 text-xs",children:[t&&e.jsx("button",{onClick:()=>t(n),className:"text-blue-600 hover:text-blue-800 px-2 py-1 rounded",children:"Düzenle"}),e.jsx("button",{onClick:()=>a(n),className:"text-green-600 hover:text-green-800 px-2 py-1 rounded",children:"Kalemler"}),e.jsx("button",{onClick:()=>s(n),className:"text-purple-600 hover:text-purple-800 px-2 py-1 rounded",children:"Ödemeler"}),"beklemede"===n.approvalStatus&&e.jsx("button",{onClick:()=>r(n),className:"text-orange-600 hover:text-orange-800 px-2 py-1 rounded",children:"Onayla"})]})}]}({onViewItems:e=>{R(e),q(!0)},onViewPayments:e=>{R(e),O(!0)},onApproval:e=>{R(e),F(!0)}}),$=n(r),Y=i(r);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Toplu Provizyon Alma"}),e.jsxs("div",{className:"flex border rounded",children:[e.jsx("button",{onClick:()=>S("requests"),className:"px-4 py-2 text-sm "+("requests"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Talepler"}),e.jsx("button",{onClick:()=>S("items"),className:"px-4 py-2 text-sm "+("items"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Kalemler"}),e.jsx("button",{onClick:()=>S("payments"),className:"px-4 py-2 text-sm "+("payments"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Ödemeler"}),e.jsx("button",{onClick:()=>S("analytics"),className:"px-4 py-2 text-sm "+("analytics"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Analitik"})]})]}),"requests"===w&&e.jsx("button",{onClick:()=>L(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Talep"})]}),"requests"===w&&e.jsxs(e.Fragment,{children:[e.jsx(l,{query:u,setQuery:c,statusFilter:p,setStatusFilter:x,priorityFilter:h,setPriorityFilter:y,departmentFilter:b,setDepartmentFilter:g,approvalFilter:j,setApprovalFilter:v,paymentFilter:N,setPaymentFilter:k,dateFilter:f,setDateFilter:T}),e.jsx(a,{columns:K,data:P})]}),"items"===w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{value:u,onChange:e=>c(e.target.value),className:"border rounded px-3 py-2 w-full max-w-md",placeholder:"Kalem adı, tedarikçi ile ara..."})}),e.jsx(a,{columns:$,data:B})]}),"payments"===w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{value:u,onChange:e=>c(e.target.value),className:"border rounded px-3 py-2 w-full max-w-md",placeholder:"Referans no, ödeyen kişi ile ara..."})}),e.jsx(a,{columns:Y,data:z})]}),"analytics"===w&&e.jsx(s,{requests:P})]}),e.jsx(d,{selectedRequest:I,items:o,payments:m,requests:r,isItemsModalOpen:D,setIsItemsModalOpen:q,isPaymentsModalOpen:A,setIsPaymentsModalOpen:O,isApprovalModalOpen:C,setIsApprovalModalOpen:F,isAddModalOpen:M,setIsAddModalOpen:L,onApprovalSubmit:e=>{F(!1),R(null)}})]})}export{o as default};
