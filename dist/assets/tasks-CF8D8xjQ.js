import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as t}from"./react-vendor-DCtPEfzS.js";import{C as s,B as a}from"./dashboard-DU4k1qlk.js";import{u as r,b as i,n,s as l,e as d}from"./form-vendor-CfNvelWt.js";import{t as c,V as o}from"./meetings-CSL3uVn4.js";import{a1 as m,X as u,a0 as x,a4 as h,d as p,a5 as g,w as j,e as y,u as f,q as v,m as w,n as N,F as b,M as _,K as k,A as S,a6 as D,a7 as T,y as G,l as C,k as z,i as O,a8 as I,R as A,p as M,_ as B,E as Y,a as E}from"./auth-CY9yrbMl.js";import{h as $}from"./utils-vendor-DxpoukG0.js";import{l as H}from"./messages-BdWFJ_-b.js";import"./file-vendor-D5NpndWQ.js";import"./state-vendor-rPBjJaR_.js";import"./chart-vendor-CNXqmhrW.js";import"./supabase-vendor-AMUhAiAi.js";import"./donations-Cs-DOdlb.js";const F=(e,t)=>{const s=e?.message||`Error in ${t}`;throw m.error(s),new Error(s)},K=()=>[{id:"task_1",title:"Yıllık Bütçe Raporu Hazırlama",description:"Dernek 2024 yılı bütçe raporunu hazırlamak ve sunuma uygun hale getirmek",assigned_to:"user2",assigned_by:"user1",due_date:new Date(Date.now()+6048e5).toISOString(),priority:"high",status:"in_progress",category:"Finans",estimated_hours:20,actual_hours:12,created_at:new Date(Date.now()-432e6).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString()},{id:"task_2",title:"Yeni Proje Önerisi Değerlendirmesi",description:"Gelen proje önerilerini teknik ve bütçe açısından değerlendirme",assigned_to:"user3",assigned_by:"user1",due_date:new Date(Date.now()+2592e5).toISOString(),priority:"medium",status:"pending",category:"Proje Yönetimi",estimated_hours:8,created_at:new Date(Date.now()-2592e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()},{id:"task_3",title:"Web Sitesi Güncelleme",description:"Dernek web sitesindeki güncel olmayan bilgileri güncelleme",assigned_to:"user1",assigned_by:"user2",due_date:new Date(Date.now()+12096e5).toISOString(),priority:"low",status:"pending",category:"İletişim",estimated_hours:4,created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString()},{id:"task_4",title:"Toplantı Salonu Rezervasyonu",description:"Gelecek ay yapılacak genel kurul için toplantı salonu rezerve etme",assigned_to:"user2",assigned_by:"user3",due_date:new Date(Date.now()-1728e5).toISOString(),priority:"urgent",status:"overdue",category:"Organizasyon",estimated_hours:2,actual_hours:1,created_at:new Date(Date.now()-864e6).toISOString(),updated_at:new Date(Date.now()-2592e5).toISOString()},{id:"task_5",title:"Bağışçı Teşekkür Mektupları",description:"Bu ay bağış yapan tüm kişilere teşekkür mektupları hazırlayıp gönderme",assigned_to:"user3",assigned_by:"user1",priority:"medium",status:"completed",category:"İletişim",estimated_hours:6,actual_hours:5,completion_notes:"Tüm mektuplar hazırlandı ve gönderildi. Pozitif geri dönüşler alındı.",completed_at:new Date(Date.now()-864e5).toISOString(),created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()}],P=e=>[{id:"comment_1",task_id:e,user_id:"user1",content:"Bu görev için ek kaynaklara ihtiyacımız olabilir. Finans ekibiyle görüştüm.",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString()},{id:"comment_2",task_id:e,user_id:"user2",content:"Öncelikli verilerimi topladım. Yakında raporlamaya başlayacağım.",created_at:new Date(Date.now()-36e5).toISOString(),updated_at:new Date(Date.now()-36e5).toISOString()},{id:"comment_3",task_id:e,user_id:"user3",content:"Harika! Herhangi bir desteğe ihtiyaç duyarsan bana ulaşabilirsin.",created_at:new Date(Date.now()-18e5).toISOString(),updated_at:new Date(Date.now()-18e5).toISOString()}],L={async getTasks(){try{return K()}catch(e){return F(e,"getTasks"),[]}},async getTask(e){try{return K().find(t=>t.id===e)||null}catch(t){return F(t,"getTask"),null}},async createTask(e){try{const t={id:`task_${Date.now()}`,title:e.title,description:e.description,assigned_to:e.assigned_to,assigned_by:"current_user",due_date:e.due_date,priority:e.priority,status:"pending",category:e.category,estimated_hours:e.estimated_hours,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return await this.createActivity(t.id,"created","Görev oluşturuldu"),await this.createActivity(t.id,"assigned","Görev atandı","",e.assigned_to),await this.createNotification(e.assigned_to,t.id,"assignment","Yeni Görev",`"${t.title}" görevi size atandı.`),m.success("Görev başarıyla oluşturuldu"),t}catch(t){throw F(t,"createTask"),t}},async updateTask(e,t){try{const s=K().find(t=>t.id===e);if(!s)throw new Error("Görev bulunamadı");const a={...s,...t,updated_at:(new Date).toISOString(),..."completed"!==t.status||s.completed_at?{}:{completed_at:(new Date).toISOString()}};return t.status&&t.status!==s.status&&(await this.createActivity(e,"status_changed",`Durum "${this.getStatusText(s.status)}" den "${this.getStatusText(t.status)}" ya değiştirildi`,s.status,t.status),"completed"===t.status&&await this.createNotification(s.assigned_by,e,"completion","Görev Tamamlandı",`"${s.title}" görevi tamamlandı.`)),m.success("Görev başarıyla güncellendi"),a}catch(s){throw F(s,"updateTask"),s}},async deleteTask(e){try{m.success("Görev başarıyla silindi")}catch(t){throw F(t,"deleteTask"),t}},async assignTask(e,t){try{const s=await this.getTask(e);if(!s)throw new Error("Görev bulunamadı");await this.updateTask(e,{assigned_to:t}),await this.createActivity(e,"assigned","Görev yeniden atandı",s.assigned_to,t),await this.createNotification(t,e,"assignment","Görev Atandı",`"${s.title}" görevi size atandı.`)}catch(s){throw F(s,"assignTask"),s}},async getTaskComments(e){try{return P(e)}catch(t){return F(t,"getTaskComments"),[]}},async addTaskComment(e,t){try{const s={id:`comment_${Date.now()}`,task_id:e,user_id:"current_user",content:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};await this.createActivity(e,"commented","Göreve yorum eklendi");const a=await this.getTask(e);return a&&await this.createNotification(a.assigned_to,e,"comment","Yeni Yorum",`"${a.title}" görevine yeni yorum eklendi.`),m.success("Yorum eklendi"),s}catch(s){throw F(s,"addTaskComment"),s}},async updateTaskComment(e,t){try{const s=P("task_1").find(t=>t.id===e);if(!s)throw new Error("Yorum bulunamadı");const a={...s,content:t,updated_at:(new Date).toISOString()};return m.success("Yorum güncellendi"),a}catch(s){throw F(s,"updateTaskComment"),s}},async deleteTaskComment(e){try{m.success("Yorum silindi")}catch(t){throw F(t,"deleteTaskComment"),t}},async getTaskAttachments(e){try{return(e=>[{id:"attachment_1",task_id:e,file_name:"budget_template.xlsx",file_url:"https://example.com/budget_template.xlsx",file_size:156780,uploaded_by:"user1",uploaded_at:new Date(Date.now()-2592e5).toISOString()},{id:"attachment_2",task_id:e,file_name:"requirements.pdf",file_url:"https://example.com/requirements.pdf",file_size:245890,uploaded_by:"user2",uploaded_at:new Date(Date.now()-864e5).toISOString()}])(e)}catch(t){return F(t,"getTaskAttachments"),[]}},async uploadTaskAttachment(e,t){try{const s=10485760,a=["image/jpeg","image/png","image/gif","image/webp","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(t.size>s)throw new Error("Dosya boyutu 10MB'den küçük olmalıdır");if(!a.includes(t.type))throw new Error("Desteklenmeyen dosya türü");const r=t.name.split(".").pop(),i=`${Date.now()}_${Math.random().toString(36).substring(2)}.${r}`,n={id:`attachment_${Date.now()}`,task_id:e,file_name:t.name,file_url:`https://example.com/${i}`,file_size:t.size,uploaded_by:"current_user",uploaded_at:(new Date).toISOString()};return m.success("Dosya yüklendi"),n}catch(s){throw F(s,"uploadTaskAttachment"),s}},async deleteTaskAttachment(e){try{m.success("Dosya silindi")}catch(t){throw F(t,"deleteTaskAttachment"),t}},async getTaskActivities(e){try{return(e=>[{id:"activity_1",task_id:e,user_id:"user1",activity_type:"created",description:"Görev oluşturuldu",created_at:new Date(Date.now()-432e6).toISOString()},{id:"activity_2",task_id:e,user_id:"user1",activity_type:"assigned",old_value:"",new_value:"user2",description:"Görev kullanıcıya atandı",created_at:new Date(Date.now()-432e6).toISOString()},{id:"activity_3",task_id:e,user_id:"user2",activity_type:"status_changed",old_value:"pending",new_value:"in_progress",description:'Durum "Bekliyor" den "Devam Ediyor" ya değiştirildi',created_at:new Date(Date.now()-2592e5).toISOString()},{id:"activity_4",task_id:e,user_id:"user3",activity_type:"commented",description:"Göreve yorum ekledi",created_at:new Date(Date.now()-864e5).toISOString()}])(e)}catch(t){return F(t,"getTaskActivities"),[]}},async createActivity(e,t,s,a,r){try{return{id:`activity_${Date.now()}`,task_id:e,user_id:"current_user",activity_type:t,old_value:a,new_value:r,description:s,created_at:(new Date).toISOString()}}catch(i){throw i}},async getTaskNotifications(e){try{return[{id:"notif_1",task_id:"task_1",user_id:e,type:"assignment",title:"Yeni Görev Atandı",message:'"Yıllık Bütçe Raporu Hazırlama" görevi size atandı.',is_read:!1,created_at:new Date(Date.now()-72e5).toISOString()},{id:"notif_2",task_id:"task_2",user_id:e,type:"due_reminder",title:"Görev Süresi Yaklaşıyor",message:'"Yeni Proje Önerisi Değerlendirmesi" görevinin süresi yaklaşıyor.',is_read:!1,created_at:new Date(Date.now()-36e5).toISOString()}]}catch(t){return F(t,"getTaskNotifications"),[]}},async createNotification(e,t,s,a,r){try{return{id:`notif_${Date.now()}`,task_id:t,user_id:e,type:s,title:a,message:r,is_read:!1,created_at:(new Date).toISOString()}}catch(i){throw i}},async markNotificationAsRead(e){},async getTaskStats(){try{const e=K(),t={total:e.length,pending:e.filter(e=>"pending"===e.status).length,in_progress:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,overdue:e.filter(e=>"overdue"===e.status).length,completion_rate:e.length>0?e.filter(e=>"completed"===e.status).length/e.length*100:0};return t}catch(e){return F(e,"getTaskStats"),{total:0,pending:0,in_progress:0,completed:0,overdue:0,completion_rate:0}}},async searchTasks(e,t){try{let s=K();return e&&(s=s.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description?.toLowerCase().includes(e.toLowerCase())||t.category?.toLowerCase().includes(e.toLowerCase()))),t&&(t.status&&(s=s.filter(e=>e.status===t.status)),t.priority&&(s=s.filter(e=>e.priority===t.priority)),t.assigned_to&&(s=s.filter(e=>e.assigned_to===t.assigned_to)),t.category&&(s=s.filter(e=>e.category===t.category))),s}catch(s){return F(s,"searchTasks"),[]}},async getTasksByUser(e){try{return K().filter(t=>t.assigned_to===e)}catch(t){return F(t,"getTasksByUser"),[]}},async getOverdueTasks(){try{const e=K(),t=new Date;return e.filter(e=>!(!e.due_date||"completed"===e.status||"cancelled"===e.status)&&new Date(e.due_date)<t)}catch(e){return F(e,"getOverdueTasks"),[]}},getStatusText:e=>({pending:"Bekliyor",in_progress:"Devam Ediyor",completed:"Tamamlandı",cancelled:"İptal Edildi",overdue:"Süresi Geçti"}[e]||e),getPriorityText:e=>({low:"Düşük",medium:"Orta",high:"Yüksek",urgent:"Acil"}[e]||e),getPriorityColor:e=>({low:"bg-blue-100 text-blue-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),getStatusColor:e=>({pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800",overdue:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800")},R=i({title:l().min(1,"Görev başlığı zorunludur"),description:l().optional(),assigned_to:l().min(1,"Görev atanacak kişi seçilmelidir"),due_date:l().optional(),priority:d(["low","medium","high","urgent"]),category:l().optional(),estimated_hours:n().min(0).optional()});function V({onSuccess:i,onCancel:n,initialData:l,isEditMode:d=!1,taskId:m}){const[f,v]=t.useState(!1),{register:w,handleSubmit:N,watch:b,formState:{errors:_}}=r({resolver:c(R),defaultValues:{title:l?.title||"",description:l?.description||"",assigned_to:l?.assigned_to||"",due_date:l?.due_date?new Date(l.due_date).toISOString().slice(0,16):"",priority:l?.priority||"medium",category:l?.category||"",estimated_hours:l?.estimated_hours||0}}),k=b("priority"),S=e=>{switch(e){case"urgent":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-blue-500 bg-blue-50";default:return"border-gray-300 bg-white"}},D=e=>{switch(e){case"urgent":return"Acil";case"high":return"Yüksek";case"medium":default:return"Orta";case"low":return"Düşük"}};return e.jsxs(s,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:d?"Görev Düzenle":"Yeni Görev Oluştur"}),n&&e.jsx(a,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(u,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:N(async e=>{v(!0);try{const t={title:e.title,description:e.description,assigned_to:e.assigned_to,due_date:e.due_date?new Date(e.due_date).toISOString():void 0,priority:e.priority,category:e.category,estimated_hours:e.estimated_hours};d&&m?(await L.updateTask(m,t),o.success("Görev güncellendi")):(await L.createTask(t),o.success("Görev oluşturuldu")),i?.()}catch(t){o.error(d?"Görev güncellenirken hata oluştu":"Görev oluşturulurken hata oluştu")}finally{v(!1)}}),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Görev Başlığı *"}),e.jsx("input",{...w("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Görev başlığını giriniz"}),_.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),e.jsx("textarea",{...w("description"),rows:4,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Görev açıklamasını giriniz"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"assigned_to",className:"block text-sm font-medium mb-2",children:[e.jsx(x,{className:"h-4 w-4 inline mr-2"}),"Atanan Kişi *"]}),e.jsxs("select",{...w("assigned_to"),className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",disabled:!1,children:[e.jsx("option",{value:"",children:"Kişi seçin"}),e.jsx("option",{value:"user1",children:"Ali Veli"}),e.jsx("option",{value:"user2",children:"Ayşe Demir"}),e.jsx("option",{value:"user3",children:"Mehmet Can"})]}),_.assigned_to&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.assigned_to.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"priority",className:"block text-sm font-medium mb-2",children:[e.jsx(h,{className:"h-4 w-4 inline mr-2"}),"Öncelik"]}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:["low","medium","high","urgent"].map(t=>e.jsxs("label",{className:`flex items-center justify-center p-2 border-2 rounded-md cursor-pointer transition-all ${k===t?S(t):"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{...w("priority"),type:"radio",value:t,className:"sr-only"}),e.jsx("span",{className:"text-xs font-medium",children:D(t)})]},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"due_date",className:"block text-sm font-medium mb-2",children:[e.jsx(p,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi"]}),e.jsx("input",{...w("due_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:[e.jsx(g,{className:"h-4 w-4 inline mr-2"}),"Kategori"]}),e.jsxs("select",{...w("category"),className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",children:[e.jsx("option",{value:"",children:"Kategori seçin"}),e.jsx("option",{value:"development",children:"Geliştirme"}),e.jsx("option",{value:"reporting",children:"Raporlama"}),e.jsx("option",{value:"database",children:"Veritabanı"}),e.jsx("option",{value:"design",children:"Tasarım"}),e.jsx("option",{value:"testing",children:"Test"}),e.jsx("option",{value:"documentation",children:"Dökümantasyon"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"estimated_hours",className:"block text-sm font-medium mb-2",children:[e.jsx(j,{className:"h-4 w-4 inline mr-2"}),"Tahmini Süre (Saat)"]}),e.jsx("input",{...w("estimated_hours",{valueAsNumber:!0}),type:"number",min:"0",step:"0.5",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n&&e.jsx(a,{type:"button",variant:"outline",onClick:n,children:"İptal"}),e.jsxs(a,{type:"submit",disabled:f,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),f?"Kaydediliyor...":d?"Güncelle":"Oluştur"]})]})]})]})}function q({taskId:r,isOpen:i,onClose:n,onEdit:l,onDelete:d}){const[c,m]=t.useState(null),[g,y]=t.useState([]),[M,B]=t.useState([]),[Y,E]=t.useState([]),[F,K]=t.useState(!1),[P,R]=t.useState("overview"),[V,q]=t.useState(""),[U,W]=t.useState(!1),[Z,J]=t.useState(!1),{user:Q}=f(),X=Q?.id;t.useEffect(()=>{i&&r&&ee()},[i,r]);const ee=async()=>{K(!0);try{const[e,t,s,a]=await Promise.all([L.getTask(r),L.getTaskComments(r),L.getTaskAttachments(r),L.getTaskActivities(r)]);m(e),y(t),B(s),E(a)}catch(e){o.error("Görev detayları yüklenirken hata oluştu")}finally{K(!1)}},te=async e=>{if(c)try{const t=await L.updateTask(r,{status:e});m(t);const s=await L.getTaskActivities(r);E(s),o.success("Görev durumu güncellendi")}catch(t){o.error("Görev durumu güncellenirken hata oluştu")}},se=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ae=t=>{switch(t){case"created":return e.jsx(C,{className:"h-4 w-4 text-green-600"});case"assigned":return e.jsx(x,{className:"h-4 w-4 text-blue-600"});case"status_changed":return e.jsx(A,{className:"h-4 w-4 text-orange-600"});case"commented":return e.jsx(_,{className:"h-4 w-4 text-purple-600"});case"completed":return e.jsx(G,{className:"h-4 w-4 text-green-600"});case"due_date_changed":return e.jsx(p,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(S,{className:"h-4 w-4 text-gray-600"})}};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Görev Detayları"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[c&&e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>l?.(c),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),e.jsxs(a,{size:"sm",variant:"outline",onClick:async()=>{if(c&&window.confirm("Bu görevi silmek istediğinizden emin misiniz?"))try{await L.deleteTask(r),o.success("Görev silindi"),d?.(r),n()}catch(e){o.error("Görev silinirken hata oluştu")}},className:"text-red-600 hover:text-red-700",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Sil"]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(u,{className:"h-4 w-4"})})]})]}),F?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):c?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"overview",label:"Genel Bakış",icon:b},{id:"comments",label:"Yorumlar",icon:_,count:g.length},{id:"attachments",label:"Dosyalar",icon:k,count:M.length},{id:"activity",label:"Aktivite",icon:S,count:Y.length}].map(t=>e.jsxs("button",{onClick:()=>R(t.id),className:"flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap "+(P===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[e.jsx(t.icon,{className:"h-4 w-4 mr-2"}),t.label,void 0!==t.count&&e.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:t.count})]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===P&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:c.title}),c.description&&e.jsx("p",{className:"text-muted-foreground text-lg",children:c.description})]}),c.assigned_to===X&&e.jsxs("div",{className:"flex space-x-2 ml-4",children:["pending"===c.status&&e.jsxs(a,{size:"sm",onClick:()=>te("in_progress"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Başlat"]}),"in_progress"===c.status&&e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>te("pending"),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Duraklat"]}),("pending"===c.status||"in_progress"===c.status)&&e.jsxs(a,{size:"sm",onClick:()=>te("completed"),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(s,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Durum ve Öncelik"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Durum"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(t=>{switch(t){case"completed":return e.jsx(G,{className:"h-4 w-4 text-green-600"});case"in_progress":return e.jsx(D,{className:"h-4 w-4 text-blue-600"});case"overdue":return e.jsx(I,{className:"h-4 w-4 text-red-600"});case"cancelled":return e.jsx(u,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(j,{className:"h-4 w-4 text-yellow-600"})}})(c.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.getStatusColor(c.status)}`,children:L.getStatusText(c.status)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Öncelik"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(t=>{switch(t){case"urgent":return e.jsx(I,{className:"h-4 w-4 text-red-600"});case"high":return e.jsx(h,{className:"h-4 w-4 text-orange-600"});case"medium":return e.jsx(h,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(h,{className:"h-4 w-4 text-blue-600"})}})(c.priority),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.getPriorityColor(c.priority)}`,children:L.getPriorityText(c.priority)})]})]})]})]}),e.jsxs(s,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Atama ve Tarihler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Atanan"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Kullanıcı ",c.assigned_to]}),c.assigned_to===X&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Benim"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Oluşturan"}),e.jsxs("span",{className:"text-sm",children:["Kullanıcı ",c.assigned_by]})]}),c.due_date&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Bitiş Tarihi"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:$(new Date(c.due_date),"dd MMM yyyy",{locale:H})})]})]})]})]}),(c.estimated_hours||c.actual_hours)&&e.jsxs(s,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Zaman Takibi"}),e.jsxs("div",{className:"space-y-3",children:[c.estimated_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tahmini Süre"}),e.jsxs("span",{className:"text-sm",children:[c.estimated_hours," saat"]})]}),c.actual_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Harcanan Süre"}),e.jsxs("span",{className:"text-sm",children:[c.actual_hours," saat"]})]}),c.estimated_hours&&c.actual_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Verimlilik"}),e.jsxs("span",{className:"text-sm "+(c.actual_hours<=c.estimated_hours?"text-green-600":"text-red-600"),children:[(c.estimated_hours/c.actual_hours*100).toFixed(0),"%"]})]})]})]}),e.jsxs(s,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Kategori ve Tarihler"}),e.jsxs("div",{className:"space-y-3",children:[c.category&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Kategori"}),e.jsx("span",{className:"text-sm bg-gray-100 text-gray-800 px-2 py-1 rounded",children:c.category})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Oluşturulma"}),e.jsx("span",{className:"text-sm",children:$(new Date(c.created_at),"dd MMM yyyy HH:mm",{locale:H})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Son Güncelleme"}),e.jsx("span",{className:"text-sm",children:$(new Date(c.updated_at),"dd MMM yyyy HH:mm",{locale:H})})]}),c.completed_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tamamlanma"}),e.jsx("span",{className:"text-sm text-green-600",children:$(new Date(c.completed_at),"dd MMM yyyy HH:mm",{locale:H})})]})]})]})]}),c.completion_notes&&e.jsxs(s,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Tamamlanma Notları"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:c.completion_notes})]})]}),"comments"===P&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Yorumlar (",g.length,")"]}),!U&&e.jsxs(a,{size:"sm",onClick:()=>W(!0),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Yorum Ekle"]})]}),U&&e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:V,onChange:e=>q(e.target.value),placeholder:"Yorumunuzu yazın...",className:"w-full h-24 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",onClick:async()=>{if(V.trim())try{const e=await L.addTaskComment(r,V);y(t=>[...t,e]),q(""),W(!1);const t=await L.getTaskActivities(r);E(t)}catch(e){o.error("Yorum eklenirken hata oluştu")}},children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Gönder"]}),e.jsx(a,{size:"sm",variant:"outline",onClick:()=>{W(!1),q("")},children:"İptal"})]})]})}),g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(t=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"font-medium text-sm",children:["Kullanıcı ",t.user_id]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:$(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:H})})]}),e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:t.content})]})]})},t.id))}):!U&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz yorum eklenmemiş"})]})]}),"attachments"===P&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Dosyalar (",M.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:async e=>{const t=e.target.files?.[0];if(t){J(!0);try{const e=await L.uploadTaskAttachment(r,t);B(t=>[...t,e])}catch(s){o.error("Dosya yüklenirken hata oluştu")}finally{J(!1),e.target.value=""}}},disabled:Z}),e.jsxs(a,{size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),disabled:Z,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),Z?"Yükleniyor...":"Dosya Ekle"]})]})]}),M.length>0?e.jsx("div",{className:"grid gap-3",children:M.map(t=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(k,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.file_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[se(t.file_size)," • Yüklendi: ",$(new Date(t.uploaded_at),"dd MMM yyyy",{locale:H})," • Yükleyen: Kullanıcı ",t.uploaded_by]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>window.open(t.file_url,"_blank"),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"İndir"]}),e.jsx(a,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(window.confirm("Bu dosyayı silmek istediğinizden emin misiniz?"))try{await L.deleteTaskAttachment(e),B(t=>t.filter(t=>t.id!==e))}catch(t){o.error("Dosya silinirken hata oluştu")}})(t.id),className:"text-red-600 hover:text-red-700",children:e.jsx(N,{className:"h-4 w-4"})})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz dosya eklenmemiş"})]})]}),"activity"===P&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Aktivite Geçmişi (",Y.length,")"]}),Y.length>0?e.jsx("div",{className:"space-y-3",children:Y.map(t=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-0.5",children:ae(t.activity_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("span",{className:"font-medium text-sm",children:["Kullanıcı ",t.user_id]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:$(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:H})})]}),e.jsx("p",{className:"text-sm text-gray-800",children:t.description}),t.old_value&&t.new_value&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"line-through",children:t.old_value})," → ",e.jsx("span",{className:"font-medium",children:t.new_value})]})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(S,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz aktivite kaydı yok"})]})]})]})]}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Görev bulunamadı"})]})}):null}function U(){const[r,i]=t.useState([]),[n,l]=t.useState(!0),[d,c]=t.useState(""),[m,u]=t.useState("all"),[h,p]=t.useState("all"),[g,y]=t.useState("all"),[v,w]=t.useState(!1),[N,b]=t.useState(null),[_,k]=t.useState(!1),[S,T]=t.useState(null),{user:z}=f(),O=z?.id;t.useEffect(()=>{A()},[]);const A=async()=>{l(!0);try{const e=await L.getTasks();i(e)}catch(e){o.error("Görevler yüklenirken hata oluştu")}finally{l(!1)}},F=()=>{w(!1),T(null),A()},K=async(e,t)=>{try{const s=await L.updateTask(e,{status:t});i(t=>t.map(t=>t.id===e?s:t)),o.success("Görev durumu güncellendi")}catch(s){o.error("Görev durumu güncellenirken hata oluştu")}},P=r.filter(e=>{const t=e.title.toLowerCase().includes(d.toLowerCase())||e.description?.toLowerCase().includes(d.toLowerCase()),s="all"===m||e.status===m,a="all"===h||e.priority===h,r="all"===g||"me"===g&&e.assigned_to===O||"others"===g&&e.assigned_to!==O;return t&&s&&a&&r}),R={total:r.length,inProgress:r.filter(e=>"in_progress"===e.status).length,completed:r.filter(e=>"completed"===e.status).length,overdue:r.filter(e=>"overdue"===e.status).length,myTasks:r.filter(e=>e.assigned_to===O).length},U=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},W=e=>{switch(e){case"urgent":return"Acil";case"high":return"Yüksek";case"medium":default:return"Orta";case"low":return"Düşük"}},Z=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},J=e=>{switch(e){case"completed":return"Tamamlandı";case"in_progress":return"Devam Ediyor";case"overdue":return"Süresi Geçti";case"cancelled":return"İptal Edildi";default:return"Bekliyor"}};return v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(a,{variant:"outline",onClick:()=>{w(!1),T(null)},children:"← Geri"}),e.jsx("h1",{className:"text-3xl font-bold",children:S?"Görev Düzenle":"Yeni Görev"})]}),e.jsx(V,{onSuccess:F,onCancel:()=>{w(!1),T(null)},initialData:S||void 0,isEditMode:!!S,taskId:S?.id})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Görevler"}),e.jsx("p",{className:"text-muted-foreground",children:"Görev atama ve takip sistemi"})]}),e.jsxs(a,{onClick:()=>w(!0),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Yeni Görev"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Görev"}),e.jsx("p",{className:"text-2xl font-bold",children:R.total})]}),e.jsx(G,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),e.jsx("p",{className:"text-2xl font-bold",children:R.inProgress})]}),e.jsx(j,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),e.jsx("p",{className:"text-2xl font-bold",children:R.completed})]}),e.jsx(G,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Süresi Geçen"}),e.jsx("p",{className:"text-2xl font-bold",children:R.overdue})]}),e.jsx(I,{className:"h-8 w-8 text-red-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Benim Görevlerim"}),e.jsx("p",{className:"text-2xl font-bold",children:R.myTasks})]}),e.jsx(x,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Görev ara...",value:d,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"pending",children:"Bekliyor"}),e.jsx("option",{value:"in_progress",children:"Devam Ediyor"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"overdue",children:"Süresi Geçti"}),e.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),e.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Öncelikler"}),e.jsx("option",{value:"urgent",children:"Acil"}),e.jsx("option",{value:"high",children:"Yüksek"}),e.jsx("option",{value:"medium",children:"Orta"}),e.jsx("option",{value:"low",children:"Düşük"})]}),e.jsxs("select",{value:g,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Atamalar"}),e.jsx("option",{value:"me",children:"Benim Görevlerim"}),e.jsx("option",{value:"others",children:"Diğer Görevler"})]}),e.jsxs(a,{variant:"outline",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Görevler yükleniyor..."})]}):e.jsx(s,{className:"overflow-hidden",children:P.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Görev"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Atanan"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Bitiş Tarihi"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Öncelik"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),e.jsx("tbody",{children:P.map(t=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.title}),t.description&&e.jsx("div",{className:"text-sm text-muted-foreground mt-1 truncate max-w-xs",children:t.description}),t.category&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 capitalize",children:t.category})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Kullanıcı ",t.assigned_to]}),t.assigned_to===O&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Benim"})]})}),e.jsx("td",{className:"p-4",children:t.due_date?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:$(new Date(t.due_date),"dd MMM yyyy",{locale:H})})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Belirsiz"})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U(t.priority)}`,children:W(t.priority)})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z(t.status)}`,children:J(t.status)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>(e=>{b(e),k(!0)})(t),children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Detay"]}),t.assigned_to===O&&e.jsxs(e.Fragment,{children:["pending"===t.status&&e.jsx(a,{size:"sm",variant:"outline",onClick:()=>K(t.id,"in_progress"),className:"text-blue-600 hover:text-blue-700",children:e.jsx(D,{className:"h-4 w-4"})}),("pending"===t.status||"in_progress"===t.status)&&e.jsx(a,{size:"sm",variant:"outline",onClick:()=>K(t.id,"completed"),className:"text-green-600 hover:text-green-700",children:e.jsx(E,{className:"h-4 w-4"})})]})]})})]},t.id))})]})}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:d||"all"!==m||"all"!==h||"all"!==g?"Arama kriterlerine uygun görev bulunamadı":"Henüz görev oluşturulmamış"})}),N&&e.jsx(q,{taskId:N.id,isOpen:_,onClose:()=>{k(!1),b(null)},onEdit:e=>{T(e),w(!0),k(!1)},onDelete:e=>{i(t=>t.filter(t=>t.id!==e))}})]})}export{U as default};
