import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as a}from"./react-vendor-DCtPEfzS.js";import{e as t,D as l}from"./donations-DMDPGCBk.js";import{M as r}from"./messages-BBXjWSN2.js";import"./auth-aCCa6xWs.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";const n=[{id:"1",code:"GENEL001",name:"Genel Bağış Fonu",description:"Derneğin genel faaliyetleri için kullanılacak bağışlar",category:"genel",targetAmount:1e5,collectedAmount:75e3,currency:"TRY",startDate:"2024-01-01",endDate:"2024-12-31",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Nakit","Banka","Kredi Kartı","Online"],autoAllocation:!0,allocationRules:"Gelen bağışların %100'ü bu fona aktarılır",responsiblePerson:"Ahmet Yılmaz",approvalRequired:!1,donationCount:245,lastDonationDate:"2024-01-14",notes:"Ana bağış fonu",createdDate:"2024-01-01",createdBy:"Admin"},{id:"2",code:"EGITIM001",name:"Eğitim Yardımı Fonu",description:"Öğrencilere burs ve eğitim materyali desteği",category:"eğitim",targetAmount:5e4,collectedAmount:32e3,currency:"TRY",startDate:"2024-01-01",endDate:"2024-06-30",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Banka","Kredi Kartı","Online"],autoAllocation:!1,responsiblePerson:"Zeynep Kaya",approvalRequired:!0,donationCount:89,lastDonationDate:"2024-01-13",notes:"Okul öncesi ve ilkokul öğrencileri öncelikli",createdDate:"2024-01-01",createdBy:"Admin"},{id:"3",code:"SAGLIK001",name:"Sağlık Yardımı Fonu",description:"Tedavi masrafları ve ilaç yardımları",category:"sağlık",targetAmount:3e4,collectedAmount:18500,currency:"TRY",startDate:"2024-01-01",isActive:!0,priority:"kritik",allowedPaymentMethods:["Nakit","Banka","Kredi Kartı"],autoAllocation:!1,responsiblePerson:"Dr. Mehmet Öz",approvalRequired:!0,donationCount:67,lastDonationDate:"2024-01-12",notes:"Acil tedavi durumları öncelikli",createdDate:"2024-01-01",createdBy:"Admin"},{id:"4",code:"KURBAN2024",name:"Kurban Bağışları 2024",description:"2024 yılı kurban bağışları ve organizasyonu",category:"kurban",targetAmount:8e4,collectedAmount:45e3,currency:"TRY",startDate:"2024-03-01",endDate:"2024-07-31",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Nakit","Banka","Kredi Kartı","Online"],autoAllocation:!0,allocationRules:"Kurban bağışları otomatik olarak bu fona aktarılır",responsiblePerson:"Ali Demir",approvalRequired:!1,donationCount:156,lastDonationDate:"2024-01-14",createdDate:"2024-03-01",createdBy:"Admin"},{id:"5",code:"RAMAZAN2024",name:"Ramazan Yardımları 2024",description:"Ramazan ayı gıda kolisi ve iftar organizasyonları",category:"ramazan",targetAmount:6e4,collectedAmount:25e3,currency:"TRY",startDate:"2024-02-01",endDate:"2024-05-31",isActive:!0,priority:"yüksek",allowedPaymentMethods:["Nakit","Banka","Online"],autoAllocation:!1,responsiblePerson:"Fatma Şahin",approvalRequired:!1,donationCount:98,lastDonationDate:"2024-01-11",notes:"Gıda kolisi ve iftar organizasyonu",createdDate:"2024-02-01",createdBy:"Admin"}];function o(){const[o,s]=a.useState(n),[i,d]=a.useState(""),[c,m]=a.useState(""),[u,x]=a.useState(""),[p,g]=a.useState(!1),[h,b]=a.useState(null),[y,v]=a.useState({code:"",name:"",description:"",category:"genel",targetAmount:"",currency:"TRY",startDate:"",endDate:"",priority:"orta",allowedPaymentMethods:[],autoAllocation:!1,allocationRules:"",responsiblePerson:"",approvalRequired:!1,notes:""}),j=a.useMemo(()=>o.filter(e=>{const a=JSON.stringify(e).toLowerCase().includes(i.toLowerCase()),t=!c||e.category===c,l=!u||"aktif"===u&&e.isActive||"pasif"===u&&!e.isActive;return a&&t&&l}),[o,i,c,u]),k=j.reduce((e,a)=>e+(a.targetAmount||0),0),N=j.reduce((e,a)=>e+a.collectedAmount,0),f=j.filter(e=>e.isActive).length,A=[{key:"code",header:"Kod"},{key:"name",header:"Fon Adı"},{key:"category",header:"Kategori",render:(a,t)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("genel"===t.category?"bg-gray-100 text-gray-800":"eğitim"===t.category?"bg-blue-100 text-blue-800":"sağlık"===t.category?"bg-red-100 text-red-800":"gıda"===t.category?"bg-green-100 text-green-800":"kurban"===t.category?"bg-purple-100 text-purple-800":"ramazan"===t.category?"bg-yellow-100 text-yellow-800":"acil"===t.category?"bg-red-100 text-red-800":"bg-indigo-100 text-indigo-800"),children:t.category})},{key:"targetAmount",header:"Hedef",render:(e,a)=>a.targetAmount?`${a.targetAmount.toLocaleString("tr-TR")} ${a.currency}`:"-"},{key:"collectedAmount",header:"Toplanan",render:(e,a)=>`${a.collectedAmount.toLocaleString("tr-TR")} ${a.currency}`},{key:"targetAmount",header:"İlerleme",render:(a,t)=>{if(!t.targetAmount)return"-";const l=Math.round(t.collectedAmount/t.targetAmount*100);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(l,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[l,"%"]})]})}},{key:"priority",header:"Öncelik",render:(a,t)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("kritik"===t.priority?"bg-red-100 text-red-800":"yüksek"===t.priority?"bg-orange-100 text-orange-800":"orta"===t.priority?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:t.priority})},{key:"donationCount",header:"Bağış Sayısı"},{key:"responsiblePerson",header:"Sorumlu"},{key:"isActive",header:"Durum",render:(a,t)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+(t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.isActive?"Aktif":"Pasif"})},{key:"id",header:"İşlemler",render:(a,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>D(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>w(t.id),className:"text-sm "+(t.isActive?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"),children:t.isActive?"Pasifleştir":"Aktifleştir"}),e.jsx("button",{onClick:()=>R(t.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],D=e=>{b(e),v({code:e.code,name:e.name,description:e.description,category:e.category,targetAmount:e.targetAmount?.toString()||"",currency:e.currency,startDate:e.startDate||"",endDate:e.endDate||"",priority:e.priority,allowedPaymentMethods:e.allowedPaymentMethods,autoAllocation:e.autoAllocation,allocationRules:e.allocationRules||"",responsiblePerson:e.responsiblePerson,approvalRequired:e.approvalRequired,notes:e.notes||""}),g(!0)},w=e=>{s(o.map(a=>a.id===e?{...a,isActive:!a.isActive}:a))},R=e=>{confirm("Bu fonlama tanımını silmek istediğinizden emin misiniz?")&&s(o.filter(a=>a.id!==e))},C=()=>{v({code:"",name:"",description:"",category:"genel",targetAmount:"",currency:"TRY",startDate:"",endDate:"",priority:"orta",allowedPaymentMethods:[],autoAllocation:!1,allocationRules:"",responsiblePerson:"",approvalRequired:!1,notes:""})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Fonlama Tanımları"}),e.jsx("button",{onClick:()=>{b(null),C(),g(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Fonlama Tanımı"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Fon"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:j.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Aktif Fon"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:f})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Toplam Hedef"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[k.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-600",children:"Toplanan"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[N.toLocaleString("tr-TR")," ₺"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Kategori Dağılımı"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:["genel","eğitim","sağlık","gıda","kurban","ramazan","acil","proje"].map(a=>{const t=j.filter(e=>e.category===a).length,l=j.filter(e=>e.category===a).reduce((e,a)=>e+a.collectedAmount,0);return e.jsxs("div",{className:"border rounded-lg p-3 text-center",children:[e.jsx("h4",{className:"font-medium capitalize text-sm",children:a}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t," fon"]}),e.jsxs("p",{className:"text-sm font-bold",children:[l.toLocaleString("tr-TR")," ₺"]})]},a)})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:i,onChange:e=>d(e.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Fon adı, kod, sorumlu ile ara..."}),e.jsxs("select",{value:c,onChange:e=>m(e.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Kategoriler"}),e.jsx("option",{value:"genel",children:"Genel"}),e.jsx("option",{value:"eğitim",children:"Eğitim"}),e.jsx("option",{value:"sağlık",children:"Sağlık"}),e.jsx("option",{value:"gıda",children:"Gıda"}),e.jsx("option",{value:"kurban",children:"Kurban"}),e.jsx("option",{value:"ramazan",children:"Ramazan"}),e.jsx("option",{value:"acil",children:"Acil"}),e.jsx("option",{value:"proje",children:"Proje"})]}),e.jsxs("select",{value:u,onChange:e=>x(e.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"aktif",children:"Aktif"}),e.jsx("option",{value:"pasif",children:"Pasif"})]}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",placeholder:"Başlangıç tarihi"}),e.jsx("button",{onClick:()=>t("fonlama-tanimlari.csv",j),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Excel İndir"})]}),e.jsx(l,{columns:A,data:j})]}),e.jsx(r,{isOpen:p,onClose:()=>g(!1),title:h?"Fonlama Tanımı Düzenle":"Yeni Fonlama Tanımı",children:e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),h)s(o.map(e=>e.id===h.id?{...e,...y,targetAmount:y.targetAmount?parseFloat(y.targetAmount):void 0}:e));else{const e={id:Date.now().toString(),...y,targetAmount:y.targetAmount?parseFloat(y.targetAmount):void 0,collectedAmount:0,isActive:!0,donationCount:0,createdDate:(new Date).toISOString().split("T")[0],createdBy:"Admin"};s([...o,e])}g(!1),b(null),C()},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fon Kodu *"}),e.jsx("input",{type:"text",value:y.code,onChange:e=>v({...y,code:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"GENEL001",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori *"}),e.jsxs("select",{value:y.category,onChange:e=>v({...y,category:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"genel",children:"Genel"}),e.jsx("option",{value:"eğitim",children:"Eğitim"}),e.jsx("option",{value:"sağlık",children:"Sağlık"}),e.jsx("option",{value:"gıda",children:"Gıda"}),e.jsx("option",{value:"kurban",children:"Kurban"}),e.jsx("option",{value:"ramazan",children:"Ramazan"}),e.jsx("option",{value:"acil",children:"Acil"}),e.jsx("option",{value:"proje",children:"Proje"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fon Adı *"}),e.jsx("input",{type:"text",value:y.name,onChange:e=>v({...y,name:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Genel Bağış Fonu",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama *"}),e.jsx("textarea",{value:y.description,onChange:e=>v({...y,description:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Fonun amacı ve kullanım alanları...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hedef Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:y.targetAmount,onChange:e=>v({...y,targetAmount:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"100000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:y.currency,onChange:e=>v({...y,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),e.jsxs("select",{value:y.priority,onChange:e=>v({...y,priority:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"düşük",children:"Düşük"}),e.jsx("option",{value:"orta",children:"Orta"}),e.jsx("option",{value:"yüksek",children:"Yüksek"}),e.jsx("option",{value:"kritik",children:"Kritik"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Başlangıç Tarihi"}),e.jsx("input",{type:"date",value:y.startDate,onChange:e=>v({...y,startDate:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bitiş Tarihi"}),e.jsx("input",{type:"date",value:y.endDate,onChange:e=>v({...y,endDate:e.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sorumlu Kişi *"}),e.jsx("input",{type:"text",value:y.responsiblePerson,onChange:e=>v({...y,responsiblePerson:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Ahmet Yılmaz",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"İzin Verilen Ödeme Yöntemleri"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Nakit","Banka","Kredi Kartı","Online","Çek","Havale"].map(a=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y.allowedPaymentMethods.includes(a),onChange:e=>((e,a)=>{v(a?{...y,allowedPaymentMethods:[...y.allowedPaymentMethods,e]}:{...y,allowedPaymentMethods:y.allowedPaymentMethods.filter(a=>a!==e)})})(a,e.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm",children:a})]},a))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y.autoAllocation,onChange:e=>v({...y,autoAllocation:e.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Otomatik Tahsis"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y.approvalRequired,onChange:e=>v({...y,approvalRequired:e.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Onay Gerekli"})]})]}),y.autoAllocation&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tahsis Kuralları"}),e.jsx("textarea",{value:y.allocationRules,onChange:e=>v({...y,allocationRules:e.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Otomatik tahsis kurallarını açıklayın..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:y.notes,onChange:e=>v({...y,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Ek bilgiler ve notlar..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:h?"Güncelle":"Oluştur"})]})]})})]})}export{o as default};
