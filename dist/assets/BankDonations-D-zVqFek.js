import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as a}from"./react-vendor-DCtPEfzS.js";import{e as n,D as s}from"./donations-o5PE7GOT.js";import{M as r}from"./messages-Dn-JV80C.js";import{L as t}from"./LazyCameraScanner-CzJUi8O9.js";import{e as l,a as o}from"./pdfExport-CmoZx5Sn.js";import{F as i,h as d}from"./auth-ZaPfAXhT.js";import"./dashboard-Bum9Xlfr.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";import"./state-vendor-rPBjJaR_.js";import"./chart-vendor-BDEFy5qM.js";import"./supabase-vendor-AMUhAiAi.js";const m=[{id:"1",date:"2024-01-15",transactionDate:"2024-01-15",donorName:"Mehmet Yılmaz",donorIban:"TR33 0006 1005 1978 6457 8413 26",amount:2500,currency:"TRY",bankName:"Ziraat Bankası",accountName:"Dernek Genel Hesap",transactionRef:"TXN123456789",description:"EFT Gönderimi",purpose:"Genel Bağış",status:"eşleştirildi",matchedDonor:"Mehmet Yılmaz",notes:"Düzenli bağışçı"},{id:"2",date:"2024-01-14",transactionDate:"2024-01-14",donorName:"Bilinmeyen",amount:1e3,currency:"TRY",bankName:"İş Bankası",accountName:"Dernek Eğitim Hesap",transactionRef:"TXN987654321",description:"Havale",purpose:"Belirsiz",status:"beklemede",notes:"Bağışçı bilgisi eksik"}],c=[{name:"Dernek Genel Hesap",iban:"TR33 0006 1005 1978 6457 8413 26",bank:"Ziraat Bankası"},{name:"Dernek Eğitim Hesap",iban:"TR64 0001 2009 4520 0058 0012 34",bank:"İş Bankası"},{name:"Dernek Sağlık Hesap",iban:"TR98 0004 6007 8800 0000 1234 56",bank:"Akbank"}];function u(){const[u,p]=a.useState(m),[x,h]=a.useState(""),[b,j]=a.useState(!1),[N,g]=a.useState(!1),[v,k]=a.useState(null),[f,y]=a.useState(null),[B,R]=a.useState({donorName:"",donorIban:"",amount:"",currency:"TRY",bankName:"",accountName:"",transactionRef:"",description:"",purpose:"",notes:""}),[S,D]=a.useState({donorName:"",donorPhone:"",donorEmail:"",purpose:""}),[T,w]=a.useState(!1),C=a.useMemo(()=>u.filter(e=>JSON.stringify(e).toLowerCase().includes(x.toLowerCase())),[u,x]),E=C.reduce((e,a)=>e+a.amount,0),Y=C.filter(e=>"beklemede"===e.status).length,z=[{key:"transactionDate",header:"İşlem Tarihi"},{key:"transactionRef",header:"Referans No"},{key:"donorName",header:"Gönderen"},{key:"amount",header:"Tutar",render:(e,a)=>`${a.amount.toLocaleString("tr-TR")} ${a.currency}`},{key:"bankName",header:"Banka"},{key:"accountName",header:"Hesap"},{key:"description",header:"Açıklama"},{key:"purpose",header:"Amaç"},{key:"status",header:"Durum",render:(a,n)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("eşleştirildi"===n.status?"bg-green-100 text-green-800":"onaylandı"===n.status?"bg-blue-100 text-blue-800":"beklemede"===n.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:n.status})},{key:"id",header:"İşlemler",render:(a,n)=>e.jsxs("div",{className:"flex gap-2",children:["beklemede"===n.status&&e.jsx("button",{onClick:()=>$(n),className:"text-green-600 hover:text-green-800 text-sm",children:"Eşleştir"}),e.jsx("button",{onClick:()=>G(n),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>A(n.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],G=e=>{k(e),R({donorName:e.donorName,donorIban:e.donorIban||"",amount:e.amount.toString(),currency:e.currency,bankName:e.bankName,accountName:e.accountName,transactionRef:e.transactionRef,description:e.description,purpose:e.purpose,notes:e.notes||""}),j(!0)},$=e=>{y(e),D({donorName:"Bilinmeyen"!==e.donorName?e.donorName:"",donorPhone:"",donorEmail:"",purpose:"Belirsiz"!==e.purpose?e.purpose:""}),g(!0)},A=e=>{confirm("Bu banka bağışını silmek istediğinizden emin misiniz?")&&p(u.filter(a=>a.id!==e))},I=()=>{R({donorName:"",donorIban:"",amount:"",currency:"TRY",bankName:"",accountName:"",transactionRef:"",description:"",purpose:"",notes:""})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Banka Bağışları"}),e.jsx("button",{onClick:()=>{k(null),I(),j(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Banka Bağışı"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Bağış"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:C.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Toplam Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[E.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-600",children:"Bekleyen"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:Y})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Bugünkü"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"1"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Banka Hesaplarımız"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:c.map((a,n)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.bank}),e.jsx("p",{className:"text-sm font-mono",children:a.iban})]},n))})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:x,onChange:e=>h(e.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Gönderen, referans no, banka ile ara..."}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"eşleştirildi",children:"Eşleştirildi"}),e.jsx("option",{value:"onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"iptal",children:"İptal"})]}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Bankalar"}),e.jsx("option",{value:"Ziraat Bankası",children:"Ziraat Bankası"}),e.jsx("option",{value:"İş Bankası",children:"İş Bankası"}),e.jsx("option",{value:"Akbank",children:"Akbank"})]}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>n("bank-donations.csv",C),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center gap-2",children:[e.jsx(i,{size:16}),"CSV İndir"]}),e.jsxs("button",{onClick:()=>l(C,{}),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(d,{size:16}),"Excel İndir"]}),e.jsxs("button",{onClick:()=>o(C,{}),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2",children:[e.jsx(i,{size:16}),"PDF İndir"]})]})]}),e.jsx(s,{columns:z,data:C})]}),e.jsxs(r,{isOpen:b,onClose:()=>j(!1),title:v?"Banka Bağışı Düzenle":"Yeni Banka Bağışı",children:[T&&e.jsx("div",{className:"mb-4",children:e.jsx(t,{onScanResult:e=>{e&&(null!=e.donorName&&R(a=>({...a,donorName:e.donorName??a.donorName})),null!=e.donorIban&&R(a=>({...a,donorIban:e.donorIban??a.donorIban})),null!=e.amount&&R(a=>({...a,amount:(e.amount??Number(a.amount||0)).toString()})),null!=e.currency&&R(a=>({...a,currency:["TRY","USD","EUR"].includes(e.currency)?e.currency:a.currency})),null!=e.bankName&&R(a=>({...a,bankName:e.bankName??a.bankName})),null!=e.transactionRef&&R(a=>({...a,transactionRef:e.transactionRef??a.transactionRef})),null!=e.description&&R(a=>({...a,description:e.description??a.description})),null!=e.purpose&&R(a=>({...a,purpose:e.purpose??a.purpose})),null!=e.notes&&R(a=>({...a,notes:e.notes??a.notes})),e.firstName&&e.lastName&&R(a=>({...a,donorName:`${e.firstName} ${e.lastName}`})),e.idNumber&&R(a=>({...a,description:`TC: ${e.idNumber}`})),e.passportNumber&&R(a=>({...a,description:`Pasaport: ${e.passportNumber}`})),e.phone&&R(a=>({...a,notes:a.notes?`${a.notes} | Tel: ${e.phone}`:`Tel: ${e.phone}`})),e.address&&R(a=>({...a,notes:a.notes?`${a.notes} | Adres: ${e.address}`:`Adres: ${e.address}`})),e.birthDate&&R(a=>({...a,notes:a.notes?`${a.notes} | Doğum: ${e.birthDate}`:`Doğum: ${e.birthDate}`})),w(!1))},onError:e=>{}})}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),v)p(u.map(e=>e.id===v.id?{...e,...B,amount:parseFloat(B.amount)}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],transactionDate:(new Date).toISOString().split("T")[0],...B,amount:parseFloat(B.amount),status:"onaylandı"};p([...u,e])}j(!1),k(null),I()},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gönderen Adı"}),e.jsx("input",{type:"text",value:B.donorName,onChange:e=>R({...B,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gönderen IBAN"}),e.jsx("input",{type:"text",value:B.donorIban,onChange:e=>R({...B,donorIban:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"TR33 0006 1005 1978 6457 8413 26"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:B.amount,onChange:e=>R({...B,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:B.currency,onChange:e=>R({...B,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Banka"}),e.jsx("input",{type:"text",value:B.bankName,onChange:e=>R({...B,bankName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alıcı Hesap"}),e.jsxs("select",{value:B.accountName,onChange:e=>R({...B,accountName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),c.map((a,n)=>e.jsx("option",{value:a.name,children:a.name},n))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Referans No"}),e.jsx("input",{type:"text",value:B.transactionRef,onChange:e=>R({...B,transactionRef:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem Açıklaması"}),e.jsx("input",{type:"text",value:B.description,onChange:e=>R({...B,description:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"EFT, Havale, vb."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:B.purpose,onChange:e=>R({...B,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:B.notes,onChange:e=>R({...B,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:v?"Güncelle":"Kaydet"})]})]})]}),e.jsx(r,{isOpen:N,onClose:()=>g(!1),title:"Bağışçı Eşleştir",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),f&&p(u.map(e=>e.id===f.id?{...e,donorName:S.donorName,purpose:S.purpose,status:"eşleştirildi",matchedDonor:S.donorName}:e)),g(!1),y(null),D({donorName:"",donorPhone:"",donorEmail:"",purpose:""})},className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"İşlem Bilgileri"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tutar:"})," ",f?.amount.toLocaleString("tr-TR")," ",f?.currency]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Referans:"})," ",f?.transactionRef]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tarih:"})," ",f?.transactionDate]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:S.donorName,onChange:e=>D({...S,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:S.donorPhone,onChange:e=>D({...S,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),e.jsx("input",{type:"email",value:S.donorEmail,onChange:e=>D({...S,donorEmail:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:S.purpose,onChange:e=>D({...S,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Eşleştir"})]})]})})]})}export{u as default};
