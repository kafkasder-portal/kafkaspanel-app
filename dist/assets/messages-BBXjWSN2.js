import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as t}from"./react-vendor-DCtPEfzS.js";import{l as s,p as a,I as n,J as r,K as i,O as l,k as o,X as c,V as d,U as m,F as u,Y as h,M as x,B as g,Z as p,g as f,i as b,_ as y,d as j,y as v,w as N,x as w,q as k,$ as C,E as S,m as E,n as T}from"./auth-aCCa6xWs.js";import{b as M,d as I,e as A,f as _,g as z}from"./utils-vendor-DxpoukG0.js";import{D as P}from"./donations-DMDPGCBk.js";var O={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarım dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklaşık 1 saat",other:"yaklaşık {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gün",other:"{{count}} gün"},aboutXWeeks:{one:"yaklaşık 1 hafta",other:"yaklaşık {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklaşık 1 ay",other:"yaklaşık {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklaşık 1 yıl",other:"yaklaşık {{count}} yıl"},xYears:{one:"1 yıl",other:"{{count}} yıl"},overXYears:{one:"1 yıldan fazla",other:"{{count}} yıldan fazla"},almostXYears:{one:"neredeyse 1 yıl",other:"neredeyse {{count}} yıl"}},D={date:M({formats:{full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},defaultWidth:"full"}),time:M({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:M({formats:{full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},R={lastWeek:"'geçen hafta' eeee 'saat' p",yesterday:"'dün saat' p",today:"'bugün saat' p",tomorrow:"'yarın saat' p",nextWeek:"eeee 'saat' p",other:"P"},W={code:"tr",formatDistance:function(e,t,s){var a,n=O[e];return a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),null!=s&&s.addSuffix?s.comparison&&s.comparison>0?a+" sonra":a+" önce":a},formatLong:D,formatRelative:function(e,t,s,a){return R[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"."},era:I({values:{narrow:["MÖ","MS"],abbreviated:["MÖ","MS"],wide:["Milattan Önce","Milattan Sonra"]},defaultWidth:"wide"}),quarter:I({values:{narrow:["1","2","3","4"],abbreviated:["1Ç","2Ç","3Ç","4Ç"],wide:["İlk çeyrek","İkinci Çeyrek","Üçüncü çeyrek","Son çeyrek"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:I({values:{narrow:["O","Ş","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],wide:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"]},defaultWidth:"wide"}),day:I({values:{narrow:["P","P","S","Ç","P","C","C"],short:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","Çar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},defaultWidth:"wide"}),dayPeriod:I({values:{narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"},wide:{am:"Ö.Ö.",pm:"Ö.S.",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"}},defaultWidth:"wide",formattingValues:{narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"},wide:{am:"ö.ö.",pm:"ö.s.",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:_({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:A({matchPatterns:{narrow:/^(mö|ms)/i,abbreviated:/^(mö|ms)/i,wide:/^(milattan önce|milattan sonra)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(^mö|^milattan önce)/i,/(^ms|^milattan sonra)/i]},defaultParseWidth:"any"}),quarter:A({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234]ç/i,wide:/^((i|İ)lk|(i|İ)kinci|üçüncü|son) çeyrek/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1ç/i,/2ç/i,/3ç/i,/4ç/i],wide:[/^(i|İ)lk çeyrek/i,/(i|İ)kinci çeyrek/i,/üçüncü çeyrek/i,/son çeyrek/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:A({matchPatterns:{narrow:/^[oşmnhtaek]/i,abbreviated:/^(oca|şub|mar|nis|may|haz|tem|ağu|eyl|eki|kas|ara)/i,wide:/^(ocak|şubat|mart|nisan|mayıs|haziran|temmuz|ağustos|eylül|ekim|kasım|aralık)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^o/i,/^ş/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^ş/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^ağ/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},defaultParseWidth:"any"}),day:A({matchPatterns:{narrow:/^[psçc]/i,short:/^(pz|pt|sa|ça|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|çar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|salı|çarşamba|perşembe|cuma(?!rtesi)|cumartesi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^p/i,/^p/i,/^s/i,/^ç/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^ça/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^salı/i,/^çarşamba/i,/^perşembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},defaultParseWidth:"any"}),dayPeriod:A({matchPatterns:{narrow:/^(öö|ös|gy|ö|sa|ös|ak|ge)/i,any:/^(ö\.?\s?[ös]\.?|öğleden sonra|gece yarısı|öğle|(sabah|öğ|akşam|gece)(leyin))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^ö\.?ö\.?/i,pm:/^ö\.?s\.?/i,midnight:/^(gy|gece yarısı)/i,noon:/^öğ/i,morning:/^sa/i,afternoon:/^öğleden sonra/i,evening:/^ak/i,night:/^ge/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};const H={CONNECT:"connect",DISCONNECT:"disconnect",RECONNECT:"reconnect",ERROR:"error",HEARTBEAT:"heartbeat",PONG:"pong",USER_JOINED:"user:joined",USER_LEFT:"user:left",USER_TYPING:"user:typing",DATA_UPDATED:"data:updated",NOTIFICATION:"notification",MESSAGE_RECEIVED:"message:received",DONATION_CREATED:"donation:created",BENEFICIARY_UPDATED:"beneficiary:updated",MEETING_STARTED:"meeting:started",TASK_ASSIGNED:"task:assigned"},L={url:"ws://localhost:3001",reconnectInterval:3e3,maxReconnectAttempts:10,heartbeatInterval:3e4,connectionTimeout:1e4,enableHeartbeat:!0,enableReconnect:!0};class B{static instance;socket=null;config;events=new Map;connectionStatus={isConnected:!1,isConnecting:!1,reconnectAttempts:0};reconnectTimer=null;heartbeatTimer=null;connectionTimer=null;messageQueue=[];constructor(e={}){this.config={...L,...e},document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this))}static getInstance(e){return B.instance||(B.instance=new B(e)),B.instance}async connect(e){if(this.socket?.readyState===WebSocket.CONNECTING)return new Promise(e=>{this.once(H.CONNECT,()=>e(!0)),this.once(H.ERROR,()=>e(!1))});if(this.socket?.readyState===WebSocket.OPEN)return!0;const t=e||this.config.url;return this.updateConnectionStatus({isConnecting:!0,connectionError:void 0}),new Promise((e,s)=>{try{this.socket=new WebSocket(t),this.connectionTimer=setTimeout(()=>{this.socket?.readyState===WebSocket.CONNECTING&&(this.socket.close(),this.updateConnectionStatus({isConnecting:!1,connectionError:"Connection timeout"}),s(new Error("Connection timeout")))},this.config.connectionTimeout),this.socket.onopen=()=>{this.connectionTimer&&(clearTimeout(this.connectionTimer),this.connectionTimer=null),this.updateConnectionStatus({isConnected:!0,isConnecting:!1,lastConnected:new Date,reconnectAttempts:0,connectionError:void 0}),this.startHeartbeat(),this.processMessageQueue(),this.emit(H.CONNECT,{timestamp:Date.now()}),e(!0)},this.socket.onmessage=e=>{this.handleMessage(e)},this.socket.onclose=e=>{this.handleClose(e)},this.socket.onerror=e=>{this.connectionTimer&&(clearTimeout(this.connectionTimer),this.connectionTimer=null),this.updateConnectionStatus({isConnecting:!1,connectionError:"Connection failed"}),this.emit(H.ERROR,{error:e,timestamp:Date.now()}),s(e)}}catch(a){this.updateConnectionStatus({isConnecting:!1,connectionError:a instanceof Error?a.message:"Unknown error"}),s(a)}})}disconnect(){this.stopHeartbeat(),this.stopReconnect(),this.socket&&(this.socket.close(1e3,"User disconnected"),this.socket=null),this.updateConnectionStatus({isConnected:!1,isConnecting:!1})}on(e,t){this.events.has(e)||this.events.set(e,new Set);const s={event:e,callback:t};this.events.get(e).add(s)}once(e,t){this.events.has(e)||this.events.set(e,new Set);const s={event:e,callback:t,once:!0};this.events.get(e).add(s)}off(e,t){const s=this.events.get(e);if(s){if(t){for(const e of s)if(e.callback===t){s.delete(e);break}}else s.clear();0===s.size&&this.events.delete(e)}}emit(e,t){const s=this.events.get(e);if(!s)return;const a=[];for(const r of s)try{r.callback(t),r.once&&a.push(r)}catch(n){}a.forEach(e=>s.delete(e))}send(e,t,s={}){const a={id:this.generateMessageId(),type:"message",event:e,data:t,timestamp:Date.now(),userId:s.userId,roomId:s.roomId};if(this.socket?.readyState!==WebSocket.OPEN)return this.queueMessage(a),!1;try{return this.socket.send(JSON.stringify(a)),!0}catch(n){return this.queueMessage(a),!1}}joinRoom(e,t){this.send("room:join",{roomId:e,userId:t})}leaveRoom(e,t){this.send("room:leave",{roomId:e,userId:t})}sendTyping(e,t,s){this.send(H.USER_TYPING,{roomId:e,userId:t,isTyping:s})}getConnectionStatus(){return{...this.connectionStatus}}async measureLatency(){if(!this.connectionStatus.isConnected)return-1;const e=Date.now();return new Promise(t=>{const s=setTimeout(()=>{t(-1)},5e3);this.once("pong",()=>{clearTimeout(s);const a=Date.now()-e;this.updateConnectionStatus({latency:a}),t(a)}),this.send("ping",{timestamp:e})})}handleMessage(e){try{const t=JSON.parse(e.data);if("pong"===t.event)return void this.emit("pong",t.data);this.emit(t.event,t.data)}catch(t){}}handleClose(e){this.stopHeartbeat(),this.updateConnectionStatus({isConnected:!1,isConnecting:!1,connectionError:e.reason||"Connection closed"}),this.emit(H.DISCONNECT,{code:e.code,reason:e.reason,timestamp:Date.now()}),this.config.enableReconnect&&1e3!==e.code&&this.scheduleReconnect()}scheduleReconnect(){this.connectionStatus.reconnectAttempts>=this.config.maxReconnectAttempts||(this.updateConnectionStatus({reconnectAttempts:this.connectionStatus.reconnectAttempts+1}),this.reconnectTimer=setTimeout(()=>{this.connect().catch(()=>{this.scheduleReconnect()})},this.config.reconnectInterval))}stopReconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}startHeartbeat(){this.config.enableHeartbeat&&(this.heartbeatTimer=setInterval(()=>{this.socket?.readyState===WebSocket.OPEN&&this.send("ping",{timestamp:Date.now()})},this.config.heartbeatInterval))}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}queueMessage(e){this.messageQueue=[...this.messageQueue,e].slice(-100)}processMessageQueue(){const e=[...this.messageQueue];this.messageQueue=[],e.forEach(e=>{if(this.socket?.readyState===WebSocket.OPEN)try{this.socket.send(JSON.stringify(e))}catch(t){}})}updateConnectionStatus(e){this.connectionStatus={...this.connectionStatus,...e}}generateMessageId(){return`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}handleVisibilityChange(){document.hidden?this.stopHeartbeat():this.connectionStatus.isConnected&&this.startHeartbeat()}handleOnline(){this.connectionStatus.isConnected||this.connectionStatus.isConnecting||this.connect().catch(console.error)}handleOffline(){this.stopHeartbeat()}}const U=B.getInstance(),G=t.createContext(void 0);function Y({children:s,serverUrl:a="ws://localhost:3001/ws",autoConnect:n=!1}){const[r,i]=t.useState(!1),[l,o]=t.useState(null),[c,d]=t.useState(0);t.useEffect(()=>{const e=()=>{const e=U.getConnectionStatus();i(e.isConnected),o(e.connectionError||null),d(e.reconnectAttempts)};return e(),U.on("connect",e),U.on("disconnect",e),U.on("error",e),()=>{U.off("connect",e),U.off("disconnect",e),U.off("error",e)}},[]),t.useEffect(()=>{n&&!r&&U.connect(a).catch(e=>{})},[n,a,r]);const m={isConnected:r,connectionError:l,reconnectAttempts:c,emit:(e,t)=>{U.send(e,t)},on:(e,t)=>{U.on(e,t)},off:(e,t)=>{U.off(e,t)},connect:async e=>await U.connect(e||a),disconnect:()=>{U.disconnect()}};return e.jsx(G.Provider,{value:m,children:s})}function K(){const e=t.useContext(G);if(void 0===e)throw new Error("useSocket must be used within a SocketProvider");return e}const $=({onSelectConversation:r,selectedConversationId:i,currentUserId:l})=>{const[o,c]=t.useState([]),[d,m]=t.useState([]),[u,h]=t.useState(""),[x,g]=t.useState(!0),[p,f]=t.useState(!1),[b,y]=t.useState(""),{on:j,off:v,isConnected:N}=K();t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("/api/messages/conversations",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();c(e.conversations)}}catch(e){}finally{g(!1)}})()},[]),t.useEffect(()=>{if(!p)return;(async()=>{try{const e=localStorage.getItem("auth_token"),t=new URLSearchParams;b&&t.append("search",b);const s=await fetch(`/api/messages/users?${t}`,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();m(e.users)}}catch(e){}})()},[p,b]),t.useEffect(()=>{if(!N)return;const e=e=>{c(t=>t.map(t=>t.id===e.conversationId?{...t,lastMessage:{content:e.message.content,created_at:e.message.created_at,sender_id:e.message.sender_id},updatedAt:e.message.created_at}:t).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()))};return j("new_message",e),()=>{v("new_message",e)}},[N,j,v]);const w=o.filter(e=>e.participant.full_name.toLowerCase().includes(u.toLowerCase()));return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"h-full flex flex-col bg-white border-r border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mesajlar"}),e.jsx("button",{onClick:()=>f(!p),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full",children:e.jsx(s,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Sohbetlerde ara...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),p&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Yeni Sohbet Başlat"}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Kullanıcı ara...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:d.map(t=>e.jsxs("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("auth_token"),s=await fetch("/api/messages/conversations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({participant_id:e.id})});if(s.ok){const t=await s.json(),a={id:t.conversation.id,participant:e,lastMessage:null,updatedAt:t.conversation.created_at,unreadCount:0};c(e=>[a,...e]),r(a),f(!1),y("")}}catch(t){}})(t),className:"w-full flex items-center space-x-3 p-2 hover:bg-white rounded-lg transition-colors",children:[t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:t.full_name,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-semibold",children:t.full_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.full_name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.role})]})]},t.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:0===w.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(n,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-sm",children:"Henüz mesajınız yok"}),e.jsx("p",{className:"text-xs",children:"Yeni bir sohbet başlatın"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:w.map(t=>{return e.jsx("button",{onClick:()=>r(t),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors "+(i===t.id?"bg-blue-50 border-r-2 border-blue-600":""),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[t.participant.avatar_url?e.jsx("img",{src:t.participant.avatar_url,alt:t.participant.full_name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold",children:t.participant.full_name.charAt(0).toUpperCase()}),t.unreadCount>0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:t.unreadCount})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.participant.full_name}),t.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:(s=t.lastMessage.created_at,z(new Date(s),{addSuffix:!1,locale:W}))})]}),t.lastMessage?e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[t.lastMessage.sender_id===l?"Sen: ":"",t.lastMessage.content]}):e.jsx("p",{className:"text-sm text-gray-400 italic",children:"Henüz mesaj yok"})]})]})},t.id);var s})})})]})};const q=({conversationId:s,participant:a,currentUserId:n,onClose:c})=>{const[d,m]=t.useState([]),[u,h]=t.useState(""),[x,g]=t.useState(!0),p=t.useRef(null),f=t.useRef(null),{emit:b,on:y,off:j,isConnected:v}=K(),{sendMessage:N,typingUsers:w}=function(){const{isConnected:e,emit:s,on:a,off:n}=K(),[r,i]=t.useState([]),[l,o]=t.useState([]),c=t.useCallback(e=>{i(t=>[...t,e])},[]),d=t.useCallback(e=>{o(t=>e.isTyping?t.includes(e.userId)?t:[...t,e.userId]:t.filter(t=>t!==e.userId))},[]);return t.useEffect(()=>{if(e)return a("new_message",c),a("user_typing",d),()=>{n("new_message",c),n("user_typing",d)}},[e,a,n,c,d]),{messages:r,typingUsers:l,sendMessage:t.useCallback(e=>{s("send_message",e)},[s]),setTyping:t.useCallback(e=>{s("typing",{isTyping:e})},[s])}}();t.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[d]),t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch(`/api/messages/conversations/${s}/messages`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();m(e.messages)}}catch(e){}finally{g(!1)}})()},[s]),t.useEffect(()=>{if(!v)return;const e=e=>{e.conversationId===s&&m(t=>[...t,e.message])};return y("new_message",e),()=>{j("new_message",e)}},[v,y,j,s]),t.useEffect(()=>{if(!v)return;let e;const t=()=>{b("typing",{conversationId:s,userId:n}),clearTimeout(e),e=setTimeout(()=>{b("stop_typing",{conversationId:s,userId:n})},1e3)},a=f.current;return a?(a.addEventListener("input",t),()=>{a.removeEventListener("input",t),clearTimeout(e)}):void 0},[v,b,s,n]);return x?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.full_name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold",children:a.full_name.charAt(0).toUpperCase()}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.full_name}),w.length>0&&e.jsx("p",{className:"text-sm text-blue-600",children:"yazıyor..."})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:e.jsx(r,{className:"w-5 h-5"})}),c&&e.jsx("button",{onClick:c,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:"×"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.map(t=>{const s=t.sender_id===n;return e.jsx("div",{className:"flex "+(s?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+(s?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[e.jsx("p",{className:"text-sm",children:t.content}),e.jsx("p",{className:"text-xs mt-1 "+(s?"text-blue-100":"text-gray-500"),children:(a=t.created_at,z(new Date(a),{addSuffix:!0,locale:W}))})]})},t.id);var a}),e.jsx("div",{ref:p})]}),e.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),!u.trim())return;const t=u.trim();h("");try{await N({content:t,userId:"current_user",type:"text"})}catch(s){}},className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:e.jsx(i,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{ref:f,type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Mesajınızı yazın...",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(l,{className:"w-5 h-5"})})]}),e.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(o,{className:"w-5 h-5"})})]})})]})},X=({currentUserId:s,isOpen:a,onToggle:r})=>{const[i,l]=t.useState(null),{isConnected:o}=K(),d=e=>{l(e)};return a?e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border border-gray-200 w-96 h-[600px] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-600 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold",children:"Mesajlar"}),!o&&e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"})]}),e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(c,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 flex overflow-hidden",children:i?e.jsxs("div",{className:"w-full flex",children:[e.jsx("div",{className:"w-full md:hidden",children:e.jsx(q,{conversationId:i.id,participant:i.participant,currentUserId:s,onClose:()=>{l(null)}})}),e.jsxs("div",{className:"hidden md:flex w-full",children:[e.jsx("div",{className:"w-1/3 border-r border-gray-200",children:e.jsx($,{onSelectConversation:d,selectedConversationId:i.id,currentUserId:s})}),e.jsx("div",{className:"w-2/3",children:e.jsx(q,{conversationId:i.id,participant:i.participant,currentUserId:s})})]})]}):e.jsx("div",{className:"w-full",children:e.jsx($,{onSelectConversation:d,currentUserId:s})})}),!o&&e.jsx("div",{className:"p-2 bg-red-50 border-t border-red-200",children:e.jsx("p",{className:"text-xs text-red-600 text-center",children:"Bağlantı kesildi. Yeniden bağlanılıyor..."})})]})}):e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition-colors relative",children:[e.jsx(n,{className:"w-6 h-6"}),!o&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]})})};function F({open:s,isOpen:a,title:n,onClose:r,children:i,ariaLabel:l,ariaDescribedBy:o,size:c="medium"}){const d=Boolean(a??s),m=t.useRef(null),u=t.useRef(null),h=t.useCallback(e=>{if(!m.current)return;const t=m.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),s=t[0],a=t[t.length-1];"Tab"===e.key&&(e.shiftKey?document.activeElement===s&&(e.preventDefault(),a?.focus()):document.activeElement===a&&(e.preventDefault(),s?.focus()))},[]);return t.useEffect(()=>{if(d)return u.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{const e=m.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e?.focus()},10),()=>{document.body.style.overflow="unset",u.current?.focus()}},[d]),t.useEffect(()=>{const e=e=>{"Escape"===e.key&&r()};if(d)return document.addEventListener("keydown",e),document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keydown",h)}},[d,r,h]),d?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true","aria-label":l||("string"==typeof n?n:"Modal"),"aria-describedby":o,children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r,"aria-hidden":"true"}),e.jsxs("div",{ref:m,className:"relative z-10 w-full rounded-lg border bg-background p-0 shadow-xl "+("small"===c?"max-w-md":"medium"===c?"max-w-2xl":"large"===c?"max-w-4xl":"xl"===c?"max-w-6xl":"max-w-2xl"),role:"document",children:[n&&e.jsxs("div",{className:"border-b px-4 py-3 text-base font-semibold flex items-center justify-between",children:[e.jsx("h2",{id:"modal-title",children:n}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 text-xl p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Kapat",type:"button",children:"×"})]}),e.jsx("div",{id:o||"modal-content",children:i})]})]}):null}function Q({currentPath:t="/messages"}){const s=[{title:"Mesaj Listesi",href:"/messages",icon:e.jsx(d,{className:"h-4 w-4"}),description:"Tüm mesajları görüntüle ve yönet",isActive:"/messages"===t},{title:"Toplu Gönderim",href:"/messages/bulk-send",icon:e.jsx(o,{className:"h-4 w-4"}),description:"Toplu mesaj gönderimi yap",isActive:"/messages/bulk-send"===t},{title:"Gruplar",href:"/messages/groups",icon:e.jsx(m,{className:"h-4 w-4"}),description:"Mesaj gruplarını yönet",isActive:"/messages/groups"===t},{title:"Şablonlar",href:"/messages/templates",icon:e.jsx(u,{className:"h-4 w-4"}),description:"Mesaj şablonlarını düzenle",isActive:"/messages/templates"===t},{title:"SMS Gönderimleri",href:"/messages/sms-deliveries",icon:e.jsx(h,{className:"h-4 w-4"}),description:"SMS gönderim geçmişi",isActive:"/messages/sms-deliveries"===t},{title:"E-posta Gönderimleri",href:"/messages/email-deliveries",icon:e.jsx(x,{className:"h-4 w-4"}),description:"E-posta gönderim geçmişi",isActive:"/messages/email-deliveries"===t},{title:"Analitik",href:"/messages/analytics",icon:e.jsx(g,{className:"h-4 w-4"}),description:"Mesaj performans raporları",isActive:"/messages/analytics"===t},{title:"Modül Bilgileri",href:"/messages/info",icon:e.jsx(p,{className:"h-4 w-4"}),description:"Modül hakkında bilgi",isActive:"/messages/info"===t}];return e.jsxs("div",{className:"bg-white border rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(d,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mesaj Yönetimi"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:s.map((t,s)=>e.jsx("a",{href:t.href,className:"group p-3 rounded-lg border transition-all duration-200 hover:shadow-md "+(t.isActive?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+(t.isActive?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600 group-hover:bg-gray-200"),children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm "+(t.isActive?"text-blue-900":"text-gray-900"),children:t.title}),e.jsx("p",{className:"text-xs mt-1 leading-relaxed "+(t.isActive?"text-blue-700":"text-gray-600"),children:t.description})]})]})},s))})]})}const J=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[n,r]=t.useState(""),[i,l]=t.useState("all"),[c,d]=t.useState("all"),[m,u]=t.useState("all"),[h,x]=t.useState(null),[g,p]=t.useState(!1),[M,I]=t.useState(!1),A=[],_=t.useMemo(()=>A.filter(e=>{const t=e.subject.toLowerCase().includes(n.toLowerCase())||e.sender.toLowerCase().includes(n.toLowerCase())||e.recipient.toLowerCase().includes(n.toLowerCase()),s="all"===i||e.status===i,a="all"===c||e.type===c,r="all"===m||e.priority===m;return t&&s&&a&&r}),[n,i,c,m,A]),z=t=>{switch(t){case"sent":return e.jsx(o,{className:"h-4 w-4 text-blue-500"});case"delivered":return e.jsx(v,{className:"h-4 w-4 text-green-500"});case"read":return e.jsx(S,{className:"h-4 w-4 text-green-600"});case"failed":return e.jsx(C,{className:"h-4 w-4 text-red-500"});default:return e.jsx(N,{className:"h-4 w-4 text-gray-500"})}},O=t=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{low:"bg-gray-100 text-gray-800",normal:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[t]}`,children:"low"===t?"Düşük":"normal"===t?"Normal":"high"===t?"Yüksek":"Acil"}),D=t=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{sms:"bg-green-100 text-green-800",email:"bg-blue-100 text-blue-800",notification:"bg-purple-100 text-purple-800"}[t]}`,children:"sms"===t?"SMS":"email"===t?"E-posta":"Bildirim"}),R=[{key:"id",header:"ID",render:(t,s)=>e.jsxs("span",{className:"font-mono text-sm text-gray-600",children:["#",s.id]})},{key:"subject",header:"Konu",render:(t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[z(s.status),e.jsx("span",{className:"font-medium",children:s.subject})]})},{key:"sender",header:"Gönderen",render:(t,s)=>e.jsx("span",{className:"text-sm",children:s.sender})},{key:"recipient",header:"Alıcı",render:(t,s)=>e.jsx("span",{className:"text-sm",children:s.recipient})},{key:"type",header:"Tür",render:(e,t)=>D(t.type)},{key:"priority",header:"Öncelik",render:(e,t)=>O(t.priority)},{key:"date",header:"Tarih",render:(t,s)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.date}),e.jsx("div",{className:"text-gray-500",children:s.time})]})},{key:"actions",header:"İşlemler",render:(t,s)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>(e=>{x(e),p(!0)})(s),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Görüntüle",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Düzenle",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Sil",children:e.jsx(T,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Q,{currentPath:"/messages"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mesaj Listesi"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gönderilmiş ve alınmış mesajları görüntüle ve yönet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(f,{className:"h-4 w-4"}),"Yenile"]}),e.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(b,{className:"h-4 w-4"}),"Dışa Aktar"]}),e.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(s,{className:"h-4 w-4"}),"Yeni Mesaj"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4 text-gray-400"}),e.jsx("input",{value:n,onChange:e=>r(e.target.value),className:"flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Konu, gönderen veya alıcı ara..."})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtreler:"})]}),e.jsxs("select",{value:i,onChange:e=>l(e.target.value),className:"border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"sent",children:"Gönderildi"}),e.jsx("option",{value:"delivered",children:"Teslim Edildi"}),e.jsx("option",{value:"read",children:"Okundu"}),e.jsx("option",{value:"failed",children:"Başarısız"})]}),e.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"all",children:"Tüm Türler"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"email",children:"E-posta"}),e.jsx("option",{value:"notification",children:"Bildirim"})]}),e.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"all",children:"Tüm Öncelikler"}),e.jsx("option",{value:"low",children:"Düşük"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"Yüksek"}),e.jsx("option",{value:"urgent",children:"Acil"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx(j,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{className:"bg-transparent border-0 text-sm focus:outline-none",children:[e.jsx("option",{value:"today",children:"Bugün"}),e.jsx("option",{value:"week",children:"Bu Hafta"}),e.jsx("option",{value:"month",children:"Bu Ay"}),e.jsx("option",{value:"all",children:"Tüm Zamanlar"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(o,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Mesaj"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Son 30 gün"})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(v,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Başarılı"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.filter(e=>"delivered"===e.status||"read"===e.status).length}),e.jsxs("p",{className:"text-xs text-gray-500",children:["%",(A.filter(e=>"delivered"===e.status||"read"===e.status).length/A.length*100).toFixed(1)]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(N,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Beklemede"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.filter(e=>"sent"===e.status).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"İşleniyor"})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(w,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Başarısız"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.filter(e=>"failed"===e.status).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tekrar denenecek"})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(k,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Acil"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.filter(e=>"urgent"===e.priority).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Öncelikli"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsx(P,{columns:R,data:_})}),e.jsx(F,{isOpen:g,onClose:()=>p(!1),title:"Mesaj Detayları",children:h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konu"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),e.jsxs("div",{className:"flex items-center gap-2",children:[z(h.status),e.jsx("span",{className:"text-sm",children:"sent"===h.status?"Gönderildi":"delivered"===h.status?"Teslim Edildi":"read"===h.status?"Okundu":"Başarısız"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gönderen"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.sender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alıcı"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.recipient})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tür"}),D(h.type)]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Öncelik"}),O(h.priority)]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarih"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[h.date," ",h.time]})]}),h.group&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grup"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.group})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mesaj İçeriği"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:h.content})})]})]})}),e.jsx(F,{isOpen:M,onClose:()=>I(!1),title:"Yeni Mesaj Oluştur",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesaj Türü"}),e.jsxs("select",{className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"notification",children:"Bildirim"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"email",children:"E-posta"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Öncelik"}),e.jsxs("select",{className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"low",children:"Düşük"}),e.jsx("option",{value:"high",children:"Yüksek"}),e.jsx("option",{value:"urgent",children:"Acil"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alıcı"}),e.jsx("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Alıcı adı veya grup seçin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konu"}),e.jsx("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mesaj konusu"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesaj İçeriği"}),e.jsx("textarea",{rows:4,className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mesaj içeriğini yazın..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Gönder"})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{X as C,J as I,F as M,Y as S,H as W,Q as a,W as l,U as w};
