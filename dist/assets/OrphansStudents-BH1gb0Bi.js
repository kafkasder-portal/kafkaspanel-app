import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as s}from"./react-vendor-DCtPEfzS.js";import{e as a,D as t}from"./donations-o5PE7GOT.js";import{U as r,a9 as l,F as n,v as i,p as d,_ as c,l as o,i as m,E as x,m as u,n as g,s as h}from"./auth-ZaPfAXhT.js";import{S as p}from"./aid-wzZDfVvT.js";import{M as j}from"./messages-Dn-JV80C.js";import"./dashboard-Bum9Xlfr.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";import"./state-vendor-rPBjJaR_.js";import"./chart-vendor-BDEFy5qM.js";import"./supabase-vendor-AMUhAiAi.js";function y(){const[h,y]=s.useState(""),[f,k]=s.useState("all"),[w,C]=s.useState("all"),[S,z]=s.useState(!1),[T,O]=s.useState(!1),[B,D]=s.useState(null),[A,K]=s.useState(!1),_=[],E=s.useMemo(()=>_.filter(e=>{const s=JSON.stringify(e).toLowerCase().includes(h.toLowerCase()),a="all"===f||e.status===f,t="all"===w||e.gender===w;return s&&a&&t}),[h,f,w,_]),M=s.useMemo(()=>{const e=_.length;return{total:e,active:_.filter(e=>"Aktif"===e.status).length,preparing:_.filter(e=>"Hazırlanıyor"===e.status).length,avgAge:Math.round(_.reduce((e,s)=>e+s.age,0)/e)}},[_]),Y=[{key:"fileNo",header:"Dosya No"},{key:"partner",header:"Partner & Şube"},{key:"nationality",header:"Uyruk"},{key:"country",header:"Ülke"},{key:"gender",header:"Cinsiyet"},{key:"age",header:"Yaş"},{key:"nameTr",header:"İsim (Tercüme)"},{key:"nameOrig",header:"İsim (Orijinal)"},{key:"status",header:"Durum",render:(s,a)=>e.jsx(b,{v:a.status})},{key:"actions",header:"İşlemler",render:(s,a)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{D(a),K(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Detay Görüntüle",children:e.jsx(x,{size:16})}),e.jsx("button",{className:"rounded p-1 text-green-600 hover:bg-green-50",title:"Düzenle",children:e.jsx(u,{size:16})}),e.jsx("button",{className:"rounded p-1 text-red-600 hover:bg-red-50",title:"Sil",children:e.jsx(g,{size:16})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(p,{title:"Toplam Öğrenci",value:M.total.toString(),icon:r}),e.jsx(p,{title:"Aktif Burslar",value:M.active.toString(),icon:l}),e.jsx(p,{title:"Hazırlanan",value:M.preparing.toString(),icon:n}),e.jsx(p,{title:"Ortalama Yaş",value:M.avgAge.toString(),icon:i})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-3 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(d,{size:16,className:"text-gray-400"}),e.jsx("input",{value:h,onChange:e=>y(e.target.value),className:"min-w-64 flex-1 border-0 outline-none text-sm",placeholder:"Öğrenci adı, dosya no, kimlik no ile arama yapın..."})]}),e.jsxs("button",{onClick:()=>z(!S),className:"flex items-center gap-2 rounded px-3 py-2 text-sm border "+(S?"bg-blue-50 border-blue-200 text-blue-700":"hover:bg-gray-50"),children:[e.jsx(c,{size:16}),"Filtre"]}),e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[e.jsx(o,{size:16}),"Yeni Öğrenci"]}),e.jsxs("button",{onClick:()=>a("yetimler.csv",E),className:"flex items-center gap-2 rounded bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700",children:[e.jsx(m,{size:16}),"Dışa Aktar"]})]}),S&&e.jsx("div",{className:"rounded border bg-gray-50 dark:bg-gray-700 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Durum"}),e.jsxs("select",{value:f,onChange:e=>k(e.target.value),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"Aktif",children:"Aktif"}),e.jsx("option",{value:"Hazırlanıyor",children:"Hazırlanıyor"}),e.jsx("option",{value:"Kontrol",children:"Kontrol"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cinsiyet"}),e.jsxs("select",{value:w,onChange:e=>C(e.target.value),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"Kız",children:"Kız"}),e.jsx("option",{value:"Erkek",children:"Erkek"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{k("all"),C("all"),y("")},className:"rounded border px-3 py-2 text-sm hover:bg-white",children:"Filtreleri Temizle"})})]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[E.length," kayıt gösteriliyor"]}),e.jsxs("span",{children:["Sayfa 1 / ",Math.ceil(E.length/10)]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded border",children:e.jsx(t,{columns:Y,data:E})}),e.jsx(j,{isOpen:T,onClose:()=>O(!1),title:"Yeni Öğrenci Ekle",children:e.jsx(v,{onClose:()=>O(!1)})}),e.jsx(j,{isOpen:A,onClose:()=>K(!1),title:"Öğrenci Detayları",children:B&&e.jsx(N,{student:B})})]})}function b({v:s}){return e.jsx("span",{className:`rounded px-2 py-0.5 text-xs ${{"Hazırlanıyor":"bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200",Aktif:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200",Kontrol:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200",Pasif:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200",Beklemede:"bg-orange-100 dark:bg-orange-800 text-orange-800 dark:text-orange-200"}[s]}`,children:s})}function v({onClose:a}){const[t,r]=s.useState({fileNo:"",partner:"",nationality:"",country:"",gender:"",age:"",nameTr:"",nameOrig:"",status:"Hazırlanıyor"});return e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const{data:e,error:s}=await h.from("students").insert([{file_number:t.fileNo,first_name:t.nameTr,last_name:t.nameOrig,identity_no:t.partner,birth_date:t.nationality,phone:t.country,email:t.gender,address:t.age,school:t.nameTr,grade:t.nameOrig,gpa:parseFloat(t.status)||null,parent_name:t.fileNo,parent_phone:t.partner,monthly_income:parseFloat(t.nationality)||null,status:"active",created_at:(new Date).toISOString()}]);if(s)return void alert("Öğrenci eklenirken hata oluştu: "+s.message);alert("Öğrenci başarıyla eklendi"),a()}catch(s){alert("Öğrenci eklenirken hata oluştu")}},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosya No *"}),e.jsx("input",{type:"text",required:!0,value:t.fileNo,onChange:e=>r({...t,fileNo:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: SERBEST-247"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner & Şube"}),e.jsx("input",{type:"text",value:t.partner,onChange:e=>r({...t,partner:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Serbest"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İsim (Tercüme) *"}),e.jsx("input",{type:"text",required:!0,value:t.nameTr,onChange:e=>r({...t,nameTr:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Türkçe isim"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İsim (Orijinal)"}),e.jsx("input",{type:"text",value:t.nameOrig,onChange:e=>r({...t,nameOrig:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Orijinal isim"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uyruk"}),e.jsx("input",{type:"text",value:t.nationality,onChange:e=>r({...t,nationality:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Çeçenistan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ülke"}),e.jsx("input",{type:"text",value:t.country,onChange:e=>r({...t,country:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Türkiye"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cinsiyet *"}),e.jsxs("select",{required:!0,value:t.gender,onChange:e=>r({...t,gender:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Kız",children:"Kız"}),e.jsx("option",{value:"Erkek",children:"Erkek"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yaş *"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"30",value:t.age,onChange:e=>r({...t,age:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Yaş"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"rounded bg-green-600 px-4 py-2 text-sm text-white hover:bg-green-700",children:"Kaydet"})]})]})}function N({student:s}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Kişisel Bilgiler"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Dosya No:"}),e.jsx("p",{className:"font-medium",children:s.fileNo})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"İsim (Tercüme):"}),e.jsx("p",{className:"font-medium",children:s.nameTr})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"İsim (Orijinal):"}),e.jsx("p",{className:"font-medium",children:s.nameOrig})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Yaş:"}),e.jsx("p",{className:"font-medium",children:s.age})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Cinsiyet:"}),e.jsx("p",{className:"font-medium",children:s.gender})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Konum Bilgileri"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Uyruk:"}),e.jsx("p",{className:"font-medium",children:s.nationality})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Ülke:"}),e.jsx("p",{className:"font-medium",children:s.country})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Partner & Şube:"}),e.jsx("p",{className:"font-medium",children:s.partner})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Durum:"}),e.jsx(b,{v:s.status})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Burs Bilgileri"}),e.jsx("div",{className:"bg-gray-50 rounded p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Burs Türü:"}),e.jsx("p",{className:"font-medium",children:"Eğitim Bursu"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Aylık Miktar:"}),e.jsx("p",{className:"font-medium",children:"₺2,500"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Başlangıç Tarihi:"}),e.jsx("p",{className:"font-medium",children:"01.09.2024"})]})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Akademik Bilgiler"}),e.jsx("div",{className:"bg-blue-50 rounded p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Okul:"}),e.jsx("p",{className:"font-medium",children:"İstanbul Üniversitesi"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bölüm:"}),e.jsx("p",{className:"font-medium",children:"Bilgisayar Mühendisliği"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sınıf:"}),e.jsx("p",{className:"font-medium",children:"2. Sınıf"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Not Ortalaması:"}),e.jsx("p",{className:"font-medium",children:"3.45 / 4.00"})]})]})})]})]})}export{y as default};
