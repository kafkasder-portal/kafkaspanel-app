import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r}from"./react-vendor-DCtPEfzS.js";import{T as a,M as s,a as n,e as t,D as o}from"./donations-Cs-DOdlb.js";import{M as l}from"./messages-BdWFJ_-b.js";import{L as d}from"./LazyCameraScanner-C0X2HgCx.js";import{e as i,a as c}from"./pdfExport-CmoZx5Sn.js";import{l as u,p as m,_ as p,F as x,h,aX as b}from"./auth-CY9yrbMl.js";import"./utils-vendor-DxpoukG0.js";import"./file-vendor-D5NpndWQ.js";import"./dashboard-DU4k1qlk.js";import"./state-vendor-rPBjJaR_.js";import"./chart-vendor-CNXqmhrW.js";import"./supabase-vendor-AMUhAiAi.js";const g=[{id:"1",date:"2024-01-15",donorName:"Ahmet Yılmaz",donorPhone:"0532 123 4567",amount:1e3,currency:"TRY",purpose:"Genel Bağış",receiptNo:"NAK-2024-001",receivedBy:"Fatma Demir",notes:"Nakit olarak teslim alındı",status:"onaylandı"},{id:"2",date:"2024-01-14",donorName:"Zeynep Kaya",donorPhone:"0543 987 6543",amount:500,currency:"TRY",purpose:"Eğitim Yardımı",receiptNo:"NAK-2024-002",receivedBy:"Mehmet Özkan",status:"onaylandı"}];function j(){const[j,y]=r.useState(g),[N,v]=r.useState(""),[f,k]=r.useState(!1),[w,S]=r.useState(null),[B,T]=r.useState({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),[D,C]=r.useState(!1),z=r.useMemo(()=>j.filter(e=>JSON.stringify(e).toLowerCase().includes(N.toLowerCase())),[j,N]),P=z.reduce((e,r)=>e+r.amount,0),Y=z.filter(e=>{const r=new Date(e.date),a=new Date;return r.toDateString()===a.toDateString()}).reduce((e,r)=>e+r.amount,0),$=[{key:"date",header:"Tarih"},{key:"receiptNo",header:"Fiş No"},{key:"donorName",header:"Bağışçı Adı"},{key:"donorPhone",header:"Telefon"},{key:"amount",header:"Tutar",render:(e,r)=>`${r.amount.toLocaleString("tr-TR")} ${r.currency}`},{key:"purpose",header:"Amaç"},{key:"receivedBy",header:"Teslim Alan"},{key:"status",header:"Durum",render:(r,a)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("onaylandı"===a.status?"bg-green-100 text-green-800":"beklemede"===a.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:a.status})},{key:"id",header:"İşlemler",render:(r,a)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(a),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>K(a),className:"text-green-600 hover:text-green-800 text-sm",children:"Yazdır"}),e.jsx("button",{onClick:()=>A(a.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],R=e=>{S(e),T({donorName:e.donorName,donorPhone:e.donorPhone,amount:e.amount.toString(),currency:e.currency,purpose:e.purpose,notes:e.notes||""}),k(!0)},A=e=>{confirm("Bu nakit bağışı silmek istediğinizden emin misiniz?")&&y(j.filter(r=>r.id!==e))},K=e=>{alert(`${e.receiptNo} numaralı makbuz yazdırılıyor...`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nakit Bağışlar"}),e.jsx("p",{className:"text-gray-600",children:"Nakit bağış işlemlerini yönetin ve takip edin"})]}),e.jsxs("button",{onClick:()=>{S(null),T({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),k(!0)},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(u,{className:"w-5 h-5"}),"Yeni Nakit Bağış"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(a,{title:"Toplam Bağış",value:P,change:12,changeType:"increase",period:"Bu Ay",trend:[45,52,48,61,55,67,73]}),e.jsx(s,{title:"Bugünkü Bağışlar",value:Y,change:8,changeType:"increase",period:"Bugün",trend:[32,38,35,42,39,45,48]}),e.jsx(n,{title:"Benzersiz Bağışçı",value:new Set(z.map(e=>e.donorName)).size,change:15,changeType:"increase",period:"Benzersiz Bağışçı",trend:[12,15,13,18,16,21,24]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{value:N,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Bağışçı adı, telefon, fiş no ile ara..."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{className:"pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[140px]",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"iptal",children:"İptal"})]})]}),e.jsx("input",{type:"date",className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Başlangıç Tarihi"}),e.jsx("input",{type:"date",className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Bitiş Tarihi"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>t("cash-donations.csv",z),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 flex items-center gap-2 transition-colors duration-200",children:[e.jsx(x,{size:16}),"CSV İndir"]}),e.jsxs("button",{onClick:()=>i(z,{}),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors duration-200",children:[e.jsx(h,{size:16}),"Excel İndir"]}),e.jsxs("button",{onClick:()=>c(z,{}),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2 transition-colors duration-200",children:[e.jsx(x,{size:16}),"PDF İndir"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx(o,{columns:$,data:z})})]}),e.jsx(l,{isOpen:f,onClose:()=>k(!1),title:w?"Nakit Bağış Düzenle":"Yeni Nakit Bağış",children:e.jsxs("div",{className:"p-4",children:[!D&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>C(!0),className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[e.jsx(b,{size:16}),"Kamera Tara"]})}),D&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded mb-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Kamera Tarama Aktif"}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Kapat"})]}),e.jsx(d,{onScanResult:e=>{e&&(null!=e.donorName&&T(r=>({...r,donorName:e.donorName??r.donorName})),null!=e.donorPhone&&T(r=>({...r,donorPhone:e.donorPhone??r.donorPhone})),null!=e.amount&&T(r=>({...r,amount:(e.amount??Number(r.amount||0)).toString()})),null!=e.currency&&T(r=>({...r,currency:["TRY","USD","EUR"].includes(e.currency)?e.currency:r.currency})),null!=e.purpose&&T(r=>({...r,purpose:e.purpose??r.purpose})),null!=e.notes&&T(r=>({...r,notes:e.notes??r.notes})),e.firstName&&e.lastName&&T(r=>({...r,donorName:`${e.firstName} ${e.lastName}`})),e.phone&&T(r=>({...r,donorPhone:e.phone||""})),e.idNumber&&T(r=>({...r,notes:r.notes?`${r.notes} | TC: ${e.idNumber}`:`TC: ${e.idNumber}`})),e.passportNumber&&T(r=>({...r,notes:r.notes?`${r.notes} | Pasaport: ${e.passportNumber}`:`Pasaport: ${e.passportNumber}`})),e.address&&T(r=>({...r,notes:r.notes?`${r.notes} | Adres: ${e.address}`:`Adres: ${e.address}`})),e.birthDate&&T(r=>({...r,notes:r.notes?`${r.notes} | Doğum: ${e.birthDate}`:`Doğum: ${e.birthDate}`})),C(!1))},onError:e=>{}})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),w)y(j.map(e=>e.id===w.id?{...e,...B,amount:parseFloat(B.amount)}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],...B,amount:parseFloat(B.amount),receiptNo:`NAK-${(new Date).getFullYear()}-${String(j.length+1).padStart(3,"0")}`,receivedBy:"Sistem Kullanıcısı",status:"onaylandı"};y([...j,e])}k(!1),S(null),T({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:B.donorName,onChange:e=>T({...B,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:B.donorPhone,onChange:e=>T({...B,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:B.amount,onChange:e=>T({...B,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:B.currency,onChange:e=>T({...B,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:B.purpose,onChange:e=>T({...B,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:B.notes,onChange:e=>T({...B,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Ek bilgiler..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:w?"Güncelle":"Kaydet"})]})]})]})})]})}export{j as default};
