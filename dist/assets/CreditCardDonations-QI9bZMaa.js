import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as a}from"./react-vendor-DCtPEfzS.js";import{e as r,D as s}from"./donations-BxLZYfOt.js";import{M as t}from"./messages-CxNjntfH.js";import"./dashboard-DKXcjRFP.js";import"./auth-DDWKT-vG.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";import"./chart-vendor-BDEFy5qM.js";const n=[{id:"1",date:"2024-01-15",donorName:"Ayşe Demir",donorPhone:"+90 532 123 4567",donorEmail:"ayse.demir@email.com",amount:500,currency:"TRY",cardNumber:"****-****-****-1234",cardType:"Visa",bankName:"İş Bankası",transactionId:"TXN789123456",authCode:"AUTH123",installments:1,purpose:"Eğitim Yardımı",status:"başarılı",commission:15,netAmount:485,notes:"Online bağış"},{id:"2",date:"2024-01-14",donorName:"Mehmet Kaya",donorPhone:"+90 533 987 6543",amount:1e3,currency:"TRY",cardNumber:"****-****-****-5678",cardType:"Mastercard",bankName:"Garanti BBVA",transactionId:"TXN456789123",authCode:"AUTH456",installments:3,purpose:"Genel Bağış",status:"başarılı",commission:30,netAmount:970},{id:"3",date:"2024-01-13",donorName:"Fatma Özkan",donorEmail:"fatma.ozkan@email.com",amount:250,currency:"TRY",cardNumber:"****-****-****-9012",cardType:"Troy",bankName:"Ziraat Bankası",transactionId:"TXN321654987",authCode:"AUTH789",installments:1,purpose:"Kurban",status:"beklemede",commission:7.5,netAmount:242.5}];function l(){const[l,d]=a.useState(n),[o,i]=a.useState(""),[c,m]=a.useState(!1),[u,x]=a.useState(!1),[p,h]=a.useState(null),[b,j]=a.useState(null),[g,N]=a.useState({donorName:"",donorPhone:"",donorEmail:"",amount:"",currency:"TRY",cardNumber:"",cardType:"Visa",bankName:"",transactionId:"",authCode:"",installments:"1",purpose:"",notes:""}),[v,y]=a.useState({refundAmount:"",refundReason:"",refundNotes:""}),f=a.useMemo(()=>l.filter(e=>JSON.stringify(e).toLowerCase().includes(o.toLowerCase())),[l,o]),k=f.reduce((e,a)=>e+a.amount,0),T=f.reduce((e,a)=>e+a.commission,0),C=f.reduce((e,a)=>e+a.netAmount,0),S=[{key:"date",header:"Tarih"},{key:"transactionId",header:"İşlem No"},{key:"donorName",header:"Bağışçı"},{key:"cardNumber",header:"Kart No"},{key:"cardType",header:"Kart Tipi",render:(a,r)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("Visa"===r.cardType?"bg-blue-100 text-blue-800":"Mastercard"===r.cardType?"bg-red-100 text-red-800":"Troy"===r.cardType?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"),children:r.cardType})},{key:"amount",header:"Tutar",render:(e,a)=>`${a.amount.toLocaleString("tr-TR")} ${a.currency}`},{key:"installments",header:"Taksit",render:(e,a)=>1===a.installments?"Peşin":`${a.installments} Taksit`},{key:"commission",header:"Komisyon",render:(e,a)=>`${a.commission.toLocaleString("tr-TR")} ₺`},{key:"netAmount",header:"Net Tutar",render:(e,a)=>`${a.netAmount.toLocaleString("tr-TR")} ₺`},{key:"purpose",header:"Amaç"},{key:"status",header:"Durum",render:(a,r)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("başarılı"===r.status?"bg-green-100 text-green-800":"beklemede"===r.status?"bg-yellow-100 text-yellow-800":"başarısız"===r.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:r.status})},{key:"id",header:"İşlemler",render:(a,r)=>e.jsxs("div",{className:"flex gap-2",children:["başarılı"===r.status&&e.jsx("button",{onClick:()=>B(r),className:"text-orange-600 hover:text-orange-800 text-sm",children:"İade"}),e.jsx("button",{onClick:()=>w(r),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>A(r.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],w=e=>{h(e),N({donorName:e.donorName,donorPhone:e.donorPhone||"",donorEmail:e.donorEmail||"",amount:e.amount.toString(),currency:e.currency,cardNumber:e.cardNumber,cardType:e.cardType,bankName:e.bankName,transactionId:e.transactionId,authCode:e.authCode,installments:e.installments.toString(),purpose:e.purpose,notes:e.notes||""}),m(!0)},B=e=>{j(e),y({refundAmount:e.amount.toString(),refundReason:"",refundNotes:""}),x(!0)},A=e=>{confirm("Bu kredi kartı bağışını silmek istediğinizden emin misiniz?")&&d(l.filter(a=>a.id!==e))},K=()=>{N({donorName:"",donorPhone:"",donorEmail:"",amount:"",currency:"TRY",cardNumber:"",cardType:"Visa",bankName:"",transactionId:"",authCode:"",installments:"1",purpose:"",notes:""})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Kredi Kartı Bağışları"}),e.jsx("button",{onClick:()=>{h(null),K(),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Kredi Kartı Bağışı"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam İşlem"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:f.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Brüt Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[k.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-600",children:"Komisyon"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[T.toLocaleString("tr-TR")," ₺"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Net Tutar"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[C.toLocaleString("tr-TR")," ₺"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Kart Tipi Dağılımı"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["Visa","Mastercard","Troy","American Express"].map(a=>{const r=f.filter(e=>e.cardType===a).length,s=f.filter(e=>e.cardType===a).reduce((e,a)=>e+a.amount,0);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium",children:a}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r," işlem"]}),e.jsxs("p",{className:"text-lg font-bold",children:[s.toLocaleString("tr-TR")," ₺"]})]},a)})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("input",{value:o,onChange:e=>i(e.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Bağışçı, kart no, işlem no ile ara..."}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"başarılı",children:"Başarılı"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"başarısız",children:"Başarısız"}),e.jsx("option",{value:"iade",children:"İade"})]}),e.jsxs("select",{className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Tüm Kart Tipleri"}),e.jsx("option",{value:"Visa",children:"Visa"}),e.jsx("option",{value:"Mastercard",children:"Mastercard"}),e.jsx("option",{value:"Troy",children:"Troy"}),e.jsx("option",{value:"American Express",children:"American Express"})]}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),e.jsx("button",{onClick:()=>r("kredi-karti-bagislar.csv",f),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Excel İndir"})]}),e.jsx(s,{columns:S,data:f})]}),e.jsx(t,{isOpen:c,onClose:()=>m(!1),title:p?"Kredi Kartı Bağışı Düzenle":"Yeni Kredi Kartı Bağışı",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=parseFloat(g.amount),r=.03*a,s=a-r;if(p)d(l.map(e=>e.id===p.id?{...e,...g,amount:a,installments:parseInt(g.installments),commission:r,netAmount:s}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],...g,amount:a,installments:parseInt(g.installments),commission:r,netAmount:s,status:"başarılı"};d([...l,e])}m(!1),h(null),K()},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:g.donorName,onChange:e=>N({...g,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:g.donorPhone,onChange:e=>N({...g,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),e.jsx("input",{type:"email",value:g.donorEmail,onChange:e=>N({...g,donorEmail:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:g.amount,onChange:e=>N({...g,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:g.currency,onChange:e=>N({...g,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kart Numarası (Maskelenmiş)"}),e.jsx("input",{type:"text",value:g.cardNumber,onChange:e=>N({...g,cardNumber:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"****-****-****-1234",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kart Tipi"}),e.jsxs("select",{value:g.cardType,onChange:e=>N({...g,cardType:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"Visa",children:"Visa"}),e.jsx("option",{value:"Mastercard",children:"Mastercard"}),e.jsx("option",{value:"Troy",children:"Troy"}),e.jsx("option",{value:"American Express",children:"American Express"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Banka"}),e.jsx("input",{type:"text",value:g.bankName,onChange:e=>N({...g,bankName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taksit Sayısı"}),e.jsxs("select",{value:g.installments,onChange:e=>N({...g,installments:e.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"1",children:"Peşin"}),e.jsx("option",{value:"2",children:"2 Taksit"}),e.jsx("option",{value:"3",children:"3 Taksit"}),e.jsx("option",{value:"6",children:"6 Taksit"}),e.jsx("option",{value:"9",children:"9 Taksit"}),e.jsx("option",{value:"12",children:"12 Taksit"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem No"}),e.jsx("input",{type:"text",value:g.transactionId,onChange:e=>N({...g,transactionId:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Yetki Kodu"}),e.jsx("input",{type:"text",value:g.authCode,onChange:e=>N({...g,authCode:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:g.purpose,onChange:e=>N({...g,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:g.notes,onChange:e=>N({...g,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"Güncelle":"Kaydet"})]})]})}),e.jsx(t,{isOpen:u,onClose:()=>x(!1),title:"Kredi Kartı İadesi",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),b&&d(l.map(e=>e.id===b.id?{...e,status:"iade",notes:`İade: ${v.refundReason}. ${v.refundNotes}`}:e)),x(!1),j(null),y({refundAmount:"",refundReason:"",refundNotes:""})},className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"İşlem Bilgileri"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bağışçı:"})," ",b?.donorName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tutar:"})," ",b?.amount.toLocaleString("tr-TR")," ",b?.currency]}),e.jsxs("p",{children:[e.jsx("strong",{children:"İşlem No:"})," ",b?.transactionId]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kart:"})," ",b?.cardNumber]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Tutarı"}),e.jsx("input",{type:"number",step:"0.01",value:v.refundAmount,onChange:e=>y({...v,refundAmount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Sebebi"}),e.jsxs("select",{value:v.refundReason,onChange:e=>y({...v,refundReason:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Bağışçı Talebi",children:"Bağışçı Talebi"}),e.jsx("option",{value:"Teknik Hata",children:"Teknik Hata"}),e.jsx("option",{value:"Yanlış İşlem",children:"Yanlış İşlem"}),e.jsx("option",{value:"İptal Talebi",children:"İptal Talebi"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Notları"}),e.jsx("textarea",{value:v.refundNotes,onChange:e=>y({...v,refundNotes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"İade ile ilgili ek bilgiler..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"İade İşlemini Başlat"})]})]})})]})}export{l as default};
