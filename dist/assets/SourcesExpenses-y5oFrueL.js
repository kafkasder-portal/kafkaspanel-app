import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as a}from"./react-vendor-DCtPEfzS.js";import{e as s,D as t}from"./donations-DMDPGCBk.js";import{l,T as r,m as d,n}from"./auth-aCCa6xWs.js";import{R as i,e as m,a as o,X as c,Y as x,T as u,B as h,P as p,c as j,d as y}from"./chart-vendor-CNXqmhrW.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";const b=[{id:"1",name:"Kurumsal Bağış - ABC Şirketi",code:"SRC-001",type:"Kaynak",category:"Kurumsal Bağış",amount:5e4,date:"2024-01-15",description:"ABC Şirketi kurumsal bağışı",fund:"Genel Fon",status:"Onaylandı",responsible:"Ahmet Yılmaz"},{id:"2",name:"Gıda Paketi Alımı",code:"EXP-001",type:"Harcama",category:"Gıda Malzemesi",amount:-15e3,date:"2024-01-14",description:"Aylık gıda paketi malzeme alımı",fund:"Yardım Fonu",status:"Onaylandı",responsible:"Fatma Demir"},{id:"3",name:"Bireysel Bağışlar",code:"SRC-002",type:"Kaynak",category:"Bireysel Bağış",amount:25e3,date:"2024-01-13",description:"Çeşitli bireysel bağışların toplamı",fund:"Genel Fon",status:"Onaylandı",responsible:"Mehmet Öz"},{id:"4",name:"Eğitim Materyali",code:"EXP-002",type:"Harcama",category:"Eğitim Malzemesi",amount:-8e3,date:"2024-01-12",description:"Öğrenci kırtasiye ve kitap alımı",fund:"Eğitim Fonu",status:"Beklemede",responsible:"Ayşe Kaya"}],g=[{name:"Kurumsal Bağış",kaynak:5e4,harcama:0},{name:"Bireysel Bağış",kaynak:25e3,harcama:0},{name:"Gıda Malzemesi",kaynak:0,harcama:15e3},{name:"Eğitim Malzemesi",kaynak:0,harcama:8e3}],f=[{name:"Kurumsal Bağış",value:5e4,color:"#0088FE"},{name:"Bireysel Bağış",value:25e3,color:"#00C49F"},{name:"Gıda Malzemesi",value:15e3,color:"#FFBB28"},{name:"Eğitim Malzemesi",value:8e3,color:"#FF8042"}];function k(){const[k,N]=a.useState(""),[v,K]=a.useState(!1),[w,B]=a.useState("all"),[S,F]=a.useState("all"),z=a.useMemo(()=>{let e=b;return"all"!==w&&(e=e.filter(e=>e.type===w)),"all"!==S&&(e=e.filter(e=>e.status===S)),k&&(e=e.filter(e=>JSON.stringify(e).toLowerCase().includes(k.toLowerCase()))),e},[k,w,S]),M=a.useMemo(()=>z.filter(e=>"Kaynak"===e.type).reduce((e,a)=>e+a.amount,0),[z]),T=a.useMemo(()=>Math.abs(z.filter(e=>"Harcama"===e.type).reduce((e,a)=>e+a.amount,0)),[z]),C=[{key:"code",header:"Kod"},{key:"name",header:"Açıklama"},{key:"type",header:"Tip",render:a=>{const s=String(a||"");return e.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2 py-1 text-xs "+("Kaynak"===s?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[e.jsx(r,{className:"h-3 w-3"}),s]})}},{key:"category",header:"Kategori"},{key:"amount",header:"Tutar (TL)",render:a=>{const s=Number(a)||0;return e.jsxs("span",{className:s>0?"text-green-600 font-medium":"text-red-600 font-medium",children:["₺",Math.abs(s).toLocaleString()]})}},{key:"fund",header:"Fon"},{key:"date",header:"Tarih"},{key:"status",header:"Durum",render:a=>{const s={"Onaylandı":"bg-green-100 text-green-700",Beklemede:"bg-yellow-100 text-yellow-700","İptal":"bg-red-100 text-red-700"},t=String(a||""),l=t;return e.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${s[l]||s.Beklemede}`,children:t})}},{key:"responsible",header:"Sorumlu"},{key:"actions",header:"İşlemler",render:()=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:e.jsx(d,{className:"h-4 w-4"})}),e.jsx("button",{className:"rounded p-1 text-red-600 hover:bg-red-50",title:"Sil",children:e.jsx(n,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-2",children:[e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-1 text-sm text-white",children:[e.jsx(l,{className:"h-4 w-4"}),"Yeni Kayıt"]}),e.jsxs("select",{value:w,onChange:e=>B(e.target.value),className:"rounded border bg-background px-2 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Tipler"}),e.jsx("option",{value:"Kaynak",children:"Kaynak"}),e.jsx("option",{value:"Harcama",children:"Harcama"})]}),e.jsxs("select",{value:S,onChange:e=>F(e.target.value),className:"rounded border bg-background px-2 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"Onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"Beklemede",children:"Beklemede"}),e.jsx("option",{value:"İptal",children:"İptal"})]}),e.jsx("input",{value:k,onChange:e=>N(e.target.value),className:"min-w-64 flex-1 rounded border px-2 py-1 text-sm",placeholder:"Kaynak/Harcama ara..."}),e.jsx("button",{className:"rounded bg-blue-600 px-3 py-1 text-sm text-white",children:"Ara"}),e.jsx("button",{className:"rounded border px-3 py-1 text-sm",children:"Filtre"}),e.jsx("button",{onClick:()=>s("kaynak-harcama.csv",z),className:"rounded bg-gray-600 px-3 py-1 text-sm text-white",children:"İndir"}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[z.length," Kayıt"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Kaynak"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₺",M.toLocaleString()]})]}),e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Harcama"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["₺",T.toLocaleString()]})]}),e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Net Bakiye"}),e.jsxs("p",{className:"text-2xl font-bold "+(M-T>0?"text-green-600":"text-red-600"),children:["₺",(M-T).toLocaleString()]})]}),e.jsxs("div",{className:"rounded border bg-card p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Bekleyen İşlem"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:z.filter(e=>"Beklemede"===e.status).length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded border bg-card p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Kaynak vs Harcama"}),e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex h-[300px] items-center justify-center",children:"Grafik yükleniyor..."}),children:e.jsx(i,{width:"100%",height:300,children:e.jsxs(m,{data:g,children:[e.jsx(o,{strokeDasharray:"3 3"}),e.jsx(c,{dataKey:"name"}),e.jsx(x,{}),e.jsx(u,{}),e.jsx(h,{dataKey:"kaynak",fill:"#22c55e",name:"Kaynak"}),e.jsx(h,{dataKey:"harcama",fill:"#ef4444",name:"Harcama"})]})})})]}),e.jsxs("div",{className:"rounded border bg-card p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Kategori Dağılımı"}),e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex h-[300px] items-center justify-center",children:"Grafik yükleniyor..."}),children:e.jsx(i,{width:"100%",height:300,children:e.jsxs(p,{children:[e.jsx(j,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:a})=>`${e} ${(100*(a||0)).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:f.map((a,s)=>e.jsx(y,{fill:a.color},`cell-${s}`))}),e.jsx(u,{})]})})})]})]}),e.jsx(t,{columns:C,data:z}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-lg rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Yeni Kaynak/Harcama Ekle"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Kod"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tip"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"Kaynak",children:"Kaynak"}),e.jsx("option",{value:"Harcama",children:"Harcama"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Açıklama"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Kategori"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{children:"Seçiniz..."}),e.jsx("option",{children:"Kurumsal Bağış"}),e.jsx("option",{children:"Bireysel Bağış"}),e.jsx("option",{children:"Gıda Malzemesi"}),e.jsx("option",{children:"Eğitim Malzemesi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Fon"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{children:"Seçiniz..."}),e.jsx("option",{children:"Genel Fon"}),e.jsx("option",{children:"Yardım Fonu"}),e.jsx("option",{children:"Eğitim Fonu"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tutar (TL)"}),e.jsx("input",{type:"number",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tarih"}),e.jsx("input",{type:"date",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Sorumlu Kişi"}),e.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Detay Açıklama"}),e.jsx("textarea",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",rows:3})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>K(!1),className:"flex-1 rounded border px-4 py-2 text-sm",children:"İptal"}),e.jsx("button",{type:"submit",className:"flex-1 rounded bg-green-600 px-4 py-2 text-sm text-white",children:"Kaydet"})]})]})]})})]})}export{k as default};
