import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as s}from"./react-vendor-DCtPEfzS.js";import{u as t,a,b as r,H as i}from"./useAnalytics-OU97AIDN.js";import{aS as l,c,T as n,A as d,U as x,aH as o,x as m,at as g,w as h,a$ as j,y as u,Z as b,a8 as p,q as v,g as N,i as y,B as f,b0 as w}from"./auth-aCCa6xWs.js";import{R as k,P as $,c as D,d as A,T as R,L as S,e as L,a as F,X as E,Y as M,B as T,A as U,f as C,g as z,b as I}from"./chart-vendor-CNXqmhrW.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";const K=({metric:s,className:t=""})=>{return e.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.name}),e.jsxs("div",{className:`flex items-center gap-1 ${(()=>{switch(s.trend){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}})()}`,children:[(()=>{switch(s.trend){case"up":return e.jsx(n,{className:"w-4 h-4"});case"down":return e.jsx(c,{className:"w-4 h-4"});default:return e.jsx(l,{className:"w-4 h-4"})}})(),e.jsx("span",{className:"text-xs font-medium",children:(r=s.change,`${r>=0?"+":""}${Math.abs(r).toFixed(1)}%`)})]})]}),e.jsx("div",{className:"mb-1",children:e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(a=s.value,a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toLocaleString())})}),e.jsx("div",{className:"text-xs text-gray-500",children:s.period})]});var a,r},O=({chart:t,height:a=300,className:r=""})=>{const i=s.useMemo(()=>t.data.map((e,s)=>({name:e.label||e.x.toString(),value:e.y,x:e.x,y:e.y,color:e.color||t.config.colors[s%t.config.colors.length]})),[t]),l=e=>{switch(t.config.yAxis.format){case"currency":return`₺${e.toLocaleString()}`;case"percentage":return`${e.toFixed(1)}%`;default:return e.toLocaleString()}},c=e=>{if("time"===t.config.xAxis.type)try{return new Date(e).toLocaleDateString("tr-TR",{month:"short",day:"numeric"})}catch{return e}return e};return e.jsxs("div",{className:`w-full ${r}`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:t.config.xAxis.label}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.config.yAxis.label})]})]}),e.jsx("div",{style:{height:a},children:e.jsx(k,{width:"100%",height:"100%",children:(()=>{const s={data:i,margin:{top:20,right:30,left:20,bottom:5}};switch(t.type){case"line":return e.jsxs(z,{...s,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(E,{dataKey:"name",tick:{fontSize:12},tickFormatter:c}),e.jsx(M,{tick:{fontSize:12},tickFormatter:e=>l(e)}),e.jsx(R,{formatter:e=>[l(e),t.config.yAxis.label],labelFormatter:e=>`${t.config.xAxis.label}: ${e}`}),e.jsx(S,{}),e.jsx(I,{type:"monotone",dataKey:"value",stroke:t.config.colors[0],strokeWidth:2,dot:{fill:t.config.colors[0],strokeWidth:2,r:4},activeDot:{r:6},animationDuration:t.config.animation?1500:0})]});case"area":return e.jsxs(U,{...s,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(E,{dataKey:"name",tick:{fontSize:12},tickFormatter:c}),e.jsx(M,{tick:{fontSize:12},tickFormatter:e=>l(e)}),e.jsx(R,{formatter:e=>[l(e),t.config.yAxis.label],labelFormatter:e=>`${t.config.xAxis.label}: ${e}`}),e.jsx(S,{}),e.jsx(C,{type:"monotone",dataKey:"value",stroke:t.config.colors[0],fill:t.config.colors[0],fillOpacity:.3,strokeWidth:2,animationDuration:t.config.animation?1500:0})]});case"bar":return e.jsxs(L,{...s,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(E,{dataKey:"name",tick:{fontSize:12},tickFormatter:c}),e.jsx(M,{tick:{fontSize:12},tickFormatter:e=>l(e)}),e.jsx(R,{formatter:e=>[l(e),t.config.yAxis.label],labelFormatter:e=>`${t.config.xAxis.label}: ${e}`}),e.jsx(S,{}),e.jsx(T,{dataKey:"value",fill:t.config.colors[0],radius:[4,4,0,0],animationDuration:t.config.animation?1500:0})]});case"pie":return e.jsxs($,{children:[e.jsx(D,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:s})=>`${e}: ${(100*s).toFixed(1)}%`,outerRadius:Math.min(.35*a,120),fill:"#8884d8",dataKey:"value",animationDuration:t.config.animation?1500:0,children:i.map((s,a)=>e.jsx(A,{fill:s.color||t.config.colors[a%t.config.colors.length]},`cell-${a}`))}),e.jsx(R,{formatter:e=>[l(e),t.config.yAxis.label]}),e.jsx(S,{})]});default:return e.jsxs("div",{className:"flex items-center justify-center h-full text-gray-500",children:["Unsupported chart type: ",t.type]})}})()})})]})},P=({data:s,className:t=""})=>{if(!s)return e.jsxs("div",{className:`bg-gray-50 border border-gray-200 rounded-lg p-8 text-center ${t}`,children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Real-time Data"}),e.jsx("p",{className:"text-gray-500",children:"Real-time analytics data is not available yet."})]});return e.jsxs("div",{className:`space-y-6 ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Real-time Analytics"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",(new Date).toLocaleTimeString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.activeUsers})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Currently online"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Avg Load Time"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.performanceMetrics.avgLoadTime.toFixed(0),"ms"]}),e.jsx("div",{className:"text-xs font-medium "+(r=s.performanceMetrics.avgLoadTime,r<100?"text-green-600":r<300?"text-yellow-600":r<1e3?"text-orange-600":"text-red-600"),children:(e=>e<100?"Excellent":e<300?"Good":e<1e3?"Fair":"Poor")(s.performanceMetrics.avgLoadTime)})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Response time"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Error Rate"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.performanceMetrics.errorRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs font-medium "+(a=s.performanceMetrics.errorRate,a<1?"text-green-600":a<5?"text-yellow-600":a<10?"text-orange-600":"text-red-600"),children:s.performanceMetrics.errorRate<5?"Good":"High"})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Last 5 minutes"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(g,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Pages"})]}),s.activePages.length>0?e.jsx("div",{className:"space-y-3",children:s.activePages.slice(0,8).map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center text-xs font-medium text-gray-600",children:a+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.page}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.users," ",1===t.users?"user":"users"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(t.users/Math.max(...s.activePages.map(e=>e.users))*100,100)}%`}})}),e.jsx("div",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:t.users})]})]},t.page))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(g,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No active pages"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(d,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Events"})]}),s.currentEvents.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.currentEvents.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.event}),e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:s.category})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[s.action," ",s.label&&`• ${s.label}`]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:s.timestamp.toLocaleTimeString()}),s.userId&&e.jsxs("span",{children:["User: ",s.userId]}),e.jsxs("span",{children:["Page: ",s.metadata.page]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(h,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No recent events"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.performanceMetrics.throughput.toFixed(1)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Events/min"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[(100-s.performanceMetrics.errorRate).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-green-600",children:"Success Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.activeUsers>0?(s.currentEvents.length/s.activeUsers).toFixed(1):"0"}),e.jsx("div",{className:"text-sm text-purple-600",children:"Events/User"})]})]})]})]});var a,r},G=({insights:s,className:t=""})=>{const a=s=>{switch(s){case"positive":return e.jsx(n,{className:"w-5 h-5"});case"negative":return e.jsx(c,{className:"w-5 h-5"});case"warning":return e.jsx(p,{className:"w-5 h-5"});default:return e.jsx(b,{className:"w-5 h-5"})}},r=e=>{switch(e){case"positive":return{bg:"bg-green-50",border:"border-green-200",icon:"text-green-600",title:"text-green-900",text:"text-green-700"};case"negative":return{bg:"bg-red-50",border:"border-red-200",icon:"text-red-600",title:"text-red-900",text:"text-red-700"};case"warning":return{bg:"bg-yellow-50",border:"border-yellow-200",icon:"text-yellow-600",title:"text-yellow-900",text:"text-yellow-700"};default:return{bg:"bg-blue-50",border:"border-blue-200",icon:"text-blue-600",title:"text-blue-900",text:"text-blue-700"}}},i=s=>{switch(s){case"high":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded",children:[e.jsx(o,{className:"w-3 h-3"}),"High Impact"]});case"medium":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded",children:[e.jsx(v,{className:"w-3 h-3"}),"Medium Impact"]});case"low":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:[e.jsx(b,{className:"w-3 h-3"}),"Low Impact"]})}};if(0===s.length)return e.jsxs("div",{className:`bg-gray-50 border border-gray-200 rounded-lg p-8 text-center ${t}`,children:[e.jsx(j,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Insights Available"}),e.jsx("p",{className:"text-gray-500",children:"Analytics insights will appear here once enough data is collected."})]});const l=s.reduce((e,s)=>(e[s.type]||(e[s.type]=[]),e[s.type].push(s),e),{});return e.jsxs("div",{className:`space-y-6 ${t}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Analytics Insights"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," insight",1!==s.length?"s":""," found"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["positive","negative","warning","neutral"].map(s=>{const t=l[s]?.length||0,i=r(s);return e.jsxs("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:i.icon,children:a(s)}),e.jsx("span",{className:`text-sm font-medium capitalize ${i.title}`,children:s})]}),e.jsx("div",{className:`text-2xl font-bold ${i.title}`,children:t})]},s)})}),e.jsx("div",{className:"space-y-4",children:[...s].sort((e,s)=>{const t={high:3,medium:2,low:1},a=t[s.impact]-t[e.impact];if(0!==a)return a;const r={negative:4,warning:3,neutral:2,positive:1};return r[s.type]-r[e.type]}).map(s=>{const t=r(s.type);return e.jsx("div",{className:`${t.bg} ${t.border} border rounded-lg p-6`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`${t.icon} mt-1`,children:a(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:`font-semibold ${t.title}`,children:s.title}),i(s.impact),s.actionable&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:[e.jsx(u,{className:"w-3 h-3"}),"Actionable"]})]}),e.jsx("p",{className:`${t.text} mb-4`,children:s.description}),s.suggestions&&s.suggestions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-sm font-medium ${t.title}`,children:"Recommended Actions:"}),e.jsx("ul",{className:"space-y-1",children:s.suggestions.map((s,a)=>e.jsxs("li",{className:`text-sm ${t.text} flex items-start gap-2`,children:[e.jsx("span",{className:"text-xs mt-1",children:"•"}),e.jsx("span",{children:s})]},a))})]})]})]})},s.id)})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.filter(e=>e.actionable).map(s=>e.jsxs("button",{className:"text-left p-4 bg-white border border-gray-200 rounded-lg hover:border-blue-300 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:r(s.type).icon,children:a(s.type)}),e.jsx("span",{className:"font-medium text-gray-900",children:s.title})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.suggestions?.[0]||"View details"})]},s.id)),0===s.filter(e=>e.actionable).length&&e.jsxs("div",{className:"col-span-full text-center py-6 text-gray-500",children:[e.jsx(u,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No actionable insights at this time"})]})]})]})]})},H=({className:r="",defaultDateRange:i})=>{const{isLoading:l,dashboardData:c,error:x,loadDashboardData:o,exportData:m,clearData:g}=t(),{realTimeData:h,refreshRealTimeData:j}=a(),[u,b]=s.useState(i||{start:new Date(Date.now()-6048e5),end:new Date}),[v,k]=s.useState("overview"),[$,D]=s.useState(!1);s.useEffect(()=>{o(u)},[u,o]);const A=async()=>{D(!0);try{await o(u),j()}finally{D(!1)}},R=e=>{const s=m(e),t=new Blob([s],{type:"json"===e?"application/json":"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`analytics-${Date.now()}.${e}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)};return x?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-2",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-medium",children:"Analytics Error"})]}),e.jsx("p",{className:"text-red-600 text-sm",children:x}),e.jsx("button",{onClick:A,className:"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]}):e.jsxs("div",{className:`bg-white rounded-lg shadow border ${r}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[u.start.toLocaleDateString()," - ",u.end.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:["week","month","quarter","year"].map(s=>e.jsx("button",{onClick:()=>(e=>{const s=new Date;let t;switch(e){case"week":t=new Date(s.getTime()-6048e5);break;case"month":t=new Date(s.getTime()-2592e6);break;case"quarter":t=new Date(s.getTime()-7776e6);break;case"year":t=new Date(s.getTime()-31536e6)}b({start:t,end:s})})(s),className:"px-3 py-1 text-sm rounded capitalize hover:bg-white hover:shadow-sm transition-all",children:s},s))}),e.jsxs("button",{onClick:A,disabled:$,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:[e.jsx(N,{className:"w-4 h-4 "+($?"animate-spin":"")}),"Refresh"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:[e.jsx(y,{className:"w-4 h-4"}),"Export"]}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[e.jsx("button",{onClick:()=>R("json"),className:"block w-full text-left px-4 py-2 hover:bg-gray-50",children:"Export JSON"}),e.jsx("button",{onClick:()=>R("csv"),className:"block w-full text-left px-4 py-2 hover:bg-gray-50",children:"Export CSV"})]})]}),e.jsx("button",{onClick:g,className:"px-4 py-2 text-red-600 border border-red-200 rounded hover:bg-red-50",children:"Clear Data"})]})]}),e.jsx("div",{className:"flex items-center gap-1 mt-6 bg-gray-100 rounded-lg p-1",children:[{key:"overview",label:"Overview",icon:f},{key:"charts",label:"Charts",icon:w},{key:"realtime",label:"Real-time",icon:d},{key:"insights",label:"Insights",icon:n}].map(({key:s,label:t,icon:a})=>e.jsxs("button",{onClick:()=>k(s),className:"flex items-center gap-2 px-4 py-2 rounded transition-all "+(v===s?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"),children:[e.jsx(a,{className:"w-4 h-4"}),t]},s))})]}),e.jsx("div",{className:"p-6",children:l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(N,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Loading analytics data..."})]})}):e.jsxs(e.Fragment,{children:["overview"===v&&c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.metrics.map(s=>e.jsx(K,{metric:s},s.name))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.charts.slice(0,2).map(s=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx(O,{chart:s,height:300})},s.id))}),h&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Real-time Activity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.activeUsers}),e.jsx("div",{className:"text-sm text-blue-600",children:"Active Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.currentEvents.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"Recent Events"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[h.performanceMetrics.avgLoadTime.toFixed(0),"ms"]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Avg Load Time"})]})]})]})]}),"charts"===v&&c&&e.jsx("div",{className:"space-y-6",children:c.charts.map(s=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsx(O,{chart:s,height:400})},s.id))}),"realtime"===v&&e.jsx("div",{className:"space-y-6",children:e.jsx(P,{data:h})}),"insights"===v&&c&&e.jsx("div",{className:"space-y-6",children:e.jsx(G,{insights:c.insights})})]})})]})};function q(){r();const{setUser:a}=t();return s.useEffect(()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e);a(s.id||s.email)}catch(s){}},[a]),e.jsxs(e.Fragment,{children:[e.jsxs(i,{children:[e.jsx("title",{children:"Analytics Dashboard - NGO Management System"}),e.jsx("meta",{name:"description",content:"Advanced analytics and insights for NGO management system"})]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(H,{className:"max-w-7xl mx-auto",defaultDateRange:{start:new Date(Date.now()-2592e6),end:new Date}})})})]})}export{q as default};
