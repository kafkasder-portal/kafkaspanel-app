import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as s}from"./react-vendor-DCtPEfzS.js";import{D as t}from"./donations-DMDPGCBk.js";import{M as a}from"./messages-BBXjWSN2.js";import{B as l,i as r,p as i,_ as n,Y as d,y as c,$ as x,d as m,g as o,x as h,w as g,k as p,E as u}from"./auth-aCCa6xWs.js";import"./utils-vendor-DxpoukG0.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";import"./file-vendor-D5NpndWQ.js";function j(){const[j,v]=s.useState(""),[N,b]=s.useState("all"),[y,f]=s.useState("all"),[k,w]=s.useState("all"),[S,M]=s.useState(null),[A,D]=s.useState(!1),[C,z]=s.useState(!1),[T]=s.useState([{id:"SMS001",recipient:"Ahmet Yılmaz",phone:"+90 532 123 4567",content:"Merhaba Ahmet, randevunuz yarın saat 14:00'da. Lütfen zamanında gelin.",status:"delivered",sentAt:"2024-01-15 10:30:00",deliveredAt:"2024-01-15 10:30:15",cost:.05,messageLength:65,parts:1,provider:"Turkcell",campaignId:"CAMP001",campaignName:"Randevu Hatırlatma"},{id:"SMS002",recipient:"Fatma Demir",phone:"+90 533 987 6543",content:"Sayın Fatma, ödemenizin son tarihi yaklaşıyor. Lütfen en kısa sürede ödeme yapın.",status:"sent",sentAt:"2024-01-15 11:15:00",cost:.05,messageLength:78,parts:1,provider:"Vodafone",campaignId:"CAMP002",campaignName:"Ödeme Hatırlatma"},{id:"SMS003",recipient:"Mehmet Kaya",phone:"+90 534 555 1234",content:"Acil: Sistem bakımı nedeniyle hizmetlerimiz geçici olarak durdurulmuştur. Detaylar için web sitemizi ziyaret edin.",status:"failed",sentAt:"2024-01-15 12:00:00",failureReason:"Geçersiz numara",cost:0,messageLength:115,parts:1,provider:"Turk Telekom",campaignId:"CAMP003",campaignName:"Acil Bilgilendirme"},{id:"SMS004",recipient:"Ayşe Özkan",phone:"+90 535 777 8888",content:"Hoş geldiniz! Üyeliğiniz başarıyla oluşturuldu. Kullanıcı adınız: ayse.ozkan, şifrenizi e-posta adresinize gönderdik.",status:"delivered",sentAt:"2024-01-15 13:45:00",deliveredAt:"2024-01-15 13:45:08",cost:.08,messageLength:125,parts:2,provider:"Turkcell",campaignId:"CAMP004",campaignName:"Hoş Geldin Mesajı"},{id:"SMS005",recipient:"Ali Veli",phone:"+90 536 999 0000",content:"Promosyon: %50 indirim fırsatı! Bugün sınırlı süre için tüm ürünlerde geçerli. Kod: INDIRIM50",status:"pending",sentAt:"2024-01-15 14:20:00",cost:.05,messageLength:95,parts:1,provider:"Vodafone",campaignId:"CAMP005",campaignName:"Promosyon Kampanyası"}]),B=["Turkcell","Vodafone","Turk Telekom"],L=s.useMemo(()=>T.filter(e=>{const s=e.recipient.toLowerCase().includes(j.toLowerCase())||e.phone.includes(j)||e.content.toLowerCase().includes(j.toLowerCase())||e.id.toLowerCase().includes(j.toLowerCase()),t="all"===N||e.status===N,a="all"===y||e.provider===y;let l=!0;if("all"!==k){const s=new Date,t=new Date(e.sentAt);switch(k){case"today":l=t.toDateString()===s.toDateString();break;case"yesterday":{const e=new Date(s);e.setDate(e.getDate()-1),l=t.toDateString()===e.toDateString();break}case"week":{const e=new Date(s);e.setDate(e.getDate()-7),l=t>=e;break}case"month":{const e=new Date(s);e.setMonth(e.getMonth()-1),l=t>=e;break}}}return s&&t&&a&&l}),[j,N,y,k,T]),G=s=>{switch(s){case"sent":return e.jsx(p,{className:"h-4 w-4 text-blue-500"});case"delivered":return e.jsx(c,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(x,{className:"h-4 w-4 text-red-500"});case"pending":return e.jsx(g,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(h,{className:"h-4 w-4 text-gray-500"})}},F=s=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"}[s]}`,children:{sent:"Gönderildi",delivered:"Teslim Edildi",failed:"Başarısız",pending:"Beklemede"}[s]}),I=(()=>{const e=T.length,s=T.filter(e=>"delivered"===e.status).length;return{total:e,delivered:s,failed:T.filter(e=>"failed"===e.status).length,pending:T.filter(e=>"pending"===e.status).length,totalCost:T.reduce((e,s)=>e+s.cost,0),deliveryRate:e>0?(s/e*100).toFixed(1):"0"}})(),O=[{key:"id",header:"SMS ID",render:(s,t)=>e.jsx("span",{className:"font-mono text-sm text-gray-600",children:t.id})},{key:"recipient",header:"Alıcı",render:(s,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.recipient}),e.jsx("div",{className:"text-xs text-gray-500",children:t.phone})]})},{key:"content",header:"İçerik",render:(s,t)=>e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"text-sm truncate",title:t.content,children:t.content}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.messageLength," karakter, ",t.parts," parça"]})]})},{key:"status",header:"Durum",render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[G(t.status),F(t.status)]})},{key:"provider",header:"Operatör",render:(s,t)=>e.jsx("span",{className:"text-sm",children:t.provider})},{key:"sentAt",header:"Gönderim Zamanı",render:(s,t)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:t.sentAt.split(" ")[0]}),e.jsx("div",{className:"text-gray-500",children:t.sentAt.split(" ")[1]})]})},{key:"cost",header:"Maliyet",render:(s,t)=>e.jsxs("span",{className:"font-medium text-sm",children:["₺",t.cost.toFixed(2)]})},{key:"actions",header:"İşlemler",render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>(e=>{M(e),D(!0)})(t),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Detayları Görüntüle",children:e.jsx(u,{className:"h-4 w-4"})}),"failed"===t.status&&e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Tekrar Gönder",children:e.jsx(o,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SMS Gönderimleri"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"SMS gönderim geçmişini ve durumlarını takip edin"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),"İstatistikler"]}),e.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(r,{className:"h-4 w-4"}),"Rapor Al"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-4 w-4 text-gray-400"}),e.jsx("input",{value:j,onChange:e=>v(e.target.value),className:"flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SMS ID, alıcı, telefon veya içerik ara..."})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtreler:"})]}),e.jsxs("select",{value:N,onChange:e=>b(e.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"delivered",children:"Teslim Edildi"}),e.jsx("option",{value:"sent",children:"Gönderildi"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"failed",children:"Başarısız"})]}),e.jsxs("select",{value:y,onChange:e=>f(e.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Operatörler"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:k,onChange:e=>w(e.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Tarihler"}),e.jsx("option",{value:"today",children:"Bugün"}),e.jsx("option",{value:"yesterday",children:"Dün"}),e.jsx("option",{value:"week",children:"Son 7 Gün"}),e.jsx("option",{value:"month",children:"Son 30 Gün"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Toplam SMS"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.total})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Teslim Edildi"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.delivered})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Başarısız"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.failed})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Başarı Oranı"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["%",I.deliveryRate]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Maliyet"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₺",I.totalCost.toFixed(2)]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsx(t,{columns:O,data:L})}),e.jsx(a,{isOpen:A,onClose:()=>D(!1),title:"SMS Detayları",children:S&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMS ID"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:S.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),e.jsxs("div",{className:"flex items-center gap-2",children:[G(S.status),F(S.status)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alıcı"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.recipient})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operatör"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.provider})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maliyet"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["₺",S.cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gönderim Zamanı"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.sentAt})]}),S.deliveredAt&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teslim Zamanı"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.deliveredAt})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesaj Uzunluğu"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[S.messageLength," karakter (",S.parts," parça)"]})]}),S.campaignName&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kampanya"}),e.jsx("p",{className:"text-sm text-gray-900",children:S.campaignName})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mesaj İçeriği"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:S.content})})]}),S.failureReason&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hata Nedeni"}),e.jsx("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:e.jsx("p",{className:"text-sm text-red-800",children:S.failureReason})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:["failed"===S.status&&e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(o,{className:"h-4 w-4"}),"Tekrar Gönder"]}),e.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Kapat"})]})]})}),e.jsx(a,{isOpen:C,onClose:()=>z(!1),title:"SMS İstatistikleri",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Genel İstatistikler"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:I.total}),e.jsx("div",{className:"text-sm text-blue-800",children:"Toplam SMS"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:I.delivered}),e.jsx("div",{className:"text-sm text-green-800",children:"Başarılı"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:I.failed}),e.jsx("div",{className:"text-sm text-red-800",children:"Başarısız"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["%",I.deliveryRate]}),e.jsx("div",{className:"text-sm text-purple-800",children:"Başarı Oranı"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Operatör Bazında Dağılım"}),e.jsx("div",{className:"space-y-3",children:B.map(s=>{const t=T.filter(e=>e.provider===s),a=t.filter(e=>"delivered"===e.status).length,l=t.length>0?(a/t.length*100).toFixed(1):"0";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.length," SMS"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["%",l]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]})]},s)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maliyet Analizi"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",I.totalCost.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Maliyet"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",(I.totalCost/Math.max(I.total,1)).toFixed(3)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"SMS Başına Ortalama"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",(I.totalCost/Math.max(I.delivered,1)).toFixed(3)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı SMS Başına"})]})]})})]})]})})]})}export{j as default};
