import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as t}from"./react-vendor-DCtPEfzS.js";import{C as s,B as a}from"./dashboard-CJXjh513.js";import{o as r,r as n,a as i,u as l,b as d,c as o,s as c,e as m,l as u}from"./form-vendor-CfNvelWt.js";import{u as x,a as p,b as h}from"./state-vendor-rPBjJaR_.js";import{s as g,a0 as f,X as y,p as j,a as b,a1 as w,u as v,d as N,w as _,o as S,a2 as k,U as D,e as T,m as E,n as I,F as z,M,q as A,y as O,$ as C,a3 as K,l as $,_ as F,E as B}from"./auth-9wZfjiou.js";import{h as q}from"./utils-vendor-DxpoukG0.js";import{l as U}from"./messages-C4gZlbNu.js";async function P(){const{data:e,error:t}=await g.from("user_management_view").select("*").order("created_at",{ascending:!1});if(t)throw new Error(`Kullanıcılar getirilemedi: ${t.message}`);return e||[]}async function H(){const{data:{user:e},error:t}=await g.auth.getUser();if(t||!e)throw new Error("Oturum bulunamadı");const{data:s,error:a}=await g.from("user_profiles").select("*").eq("id",e.id).single();if(a){return{user:e,profile:{id:e.id,full_name:e.email||null,avatar_url:null,department:null,phone:null,email:e.email||"",role:"viewer",is_active:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},canManageUsers:!1}}return{user:e,profile:s,canManageUsers:["admin","super_admin"].includes(s?.role||"")}}async function L(){const{count:e,error:t}=await g.from("user_management_view").select("*",{count:"exact",head:!0}),{count:s,error:a}=await g.from("user_management_view").select("*",{count:"exact",head:!0}).eq("is_active",!0),{data:r,error:n}=await g.from("user_management_view").select("role"),i=new Date;i.setDate(i.getDate()-7);const{count:l,error:d}=await g.from("user_management_view").select("*",{count:"exact",head:!0}).gte("created_at",i.toISOString());if(t||a||n||d)throw new Error("İstatistikler getirilemedi");const o={super_admin:0,admin:0,manager:0,coordinator:0,operator:0,viewer:0};return r?.forEach(e=>{e.role in o&&o[e.role]++}),{total:e||0,active:s||0,inactive:(e||0)-(s||0),byRole:o,recentSignups:l||0}}async function G(){const e=Date.now(),t=`demo_${e}@example.com`,s=`Demo123!${e.toString().slice(-4)}`;try{const{data:a,error:r}=await g.auth.signUp({email:t,password:s,options:{data:{full_name:`Demo Kullanıcı ${e.toString().slice(-4)}`,department:"Demo Departmanı"}}});if(r||!a.user)throw new Error(`Demo hesabı oluşturulamadı: ${r?.message||"Bilinmeyen hata"}`);const n={id:a.user.id,full_name:`Demo Kullanıcı ${e.toString().slice(-4)}`,email:t,department:"Demo Departmanı",role:"coordinator",is_active:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:i,error:l}=await g.from("user_profiles").insert(n).select().single();if(l)throw await g.auth.admin.deleteUser(a.user.id),new Error(`Demo profili oluşturulamadı: ${l.message}`);return{email:t,password:s,profile:i}}catch(a){throw new Error(`Demo hesabı oluşturma hatası: ${a instanceof Error?a.message:"Bilinmeyen hata"}`)}}var Q=function(e,t){for(var s={};e.length;){var a=e[0],r=a.code,n=a.message,l=a.path.join(".");if(!s[l])if("unionErrors"in a){var d=a.unionErrors[0].errors[0];s[l]={message:d.message,type:d.code}}else s[l]={message:n,type:r};if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var o=s[l].types,c=o&&o[a.code];s[l]=i(l,t,s,r,c?[].concat(c,a.message):a.message)}e.shift()}return s},R=function(e,t,s){return void 0===s&&(s={}),function(a,i,l){try{return Promise.resolve(function(i,d){try{var o=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](a,t)).then(function(e){return l.shouldUseNativeValidation&&r({},l),{errors:{},values:s.raw?a:e}})}catch(n){return d(n)}return o&&o.then?o.then(void 0,d):o}(0,function(e){if(function(e){return Array.isArray(null==e?void 0:e.errors)}(e))return{values:{},errors:n(Q(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw e}))}catch(n){return Promise.reject(n)}}};let Y,V,W,Z={data:""},J=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Z,X=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ee=/\/\*[^]*?\*\/|  +/g,te=/\n+/g,se=(e,t)=>{let s="",a="",r="";for(let n in e){let i=e[n];"@"==n[0]?"i"==n[1]?s=n+" "+i+";":a+="f"==n[1]?se(i,n):n+"{"+se(i,"k"==n[1]?"":t)+"}":"object"==typeof i?a+=se(i,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=i&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=se.p?se.p(n,i):n+":"+i+";")}return s+(t&&r?t+"{"+r+"}":r)+a},ae={},re=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+re(e[s]);return t}return e},ne=(e,t,s,a,r)=>{let n=re(e),i=ae[n]||(ae[n]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(n));if(!ae[i]){let t=n!==e?e:(e=>{let t,s,a=[{}];for(;t=X.exec(e.replace(ee,""));)t[4]?a.shift():t[3]?(s=t[3].replace(te," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(te," ").trim();return a[0]})(e);ae[i]=se(r?{["@keyframes "+i]:t}:t,s?"":"."+i)}let l=s&&ae.g?ae.g:null;return s&&(ae.g=ae[i]),((e,t,s,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(ae[i],t,a,l),i};function ie(e){let t=this||{},s=e.call?e(t.p):e;return ne(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let n=t[r];if(n&&n.call){let e=n(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":se(e,""):!1===e?"":e}return e+a+(null==n?"":n)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,J(t.target),t.g,t.o,t.k)}ie.bind({g:1});let le=ie.bind({k:1});function de(e,t){let s=this||{};return function(){let t=arguments;return function a(r,n){let i=Object.assign({},r),l=i.className||a.className;s.p=Object.assign({theme:V&&V()},i),s.o=/ *go\d+/.test(l),i.className=ie.apply(s,t)+(l?" "+l:"");let d=e;return e[0]&&(d=i.as||e,delete i.as),W&&d[0]&&W(i),Y(d,i)}}}var oe=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ce=(()=>{let e=0;return()=>(++e).toString()})(),me=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ue=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:s}=t;return ue(e,{type:e.toasts.find(e=>e.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+r}))}}},xe=[],pe={toasts:[],pausedAt:void 0},he=e=>{pe=ue(pe,e),xe.forEach(e=>{e(pe)})},ge=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||ce()}))(t,e,s);return he({type:2,toast:a}),a.id},fe=(e,t)=>ge("blank")(e,t);fe.error=ge("error"),fe.success=ge("success"),fe.loading=ge("loading"),fe.custom=ge("custom"),fe.dismiss=e=>{he({type:3,toastId:e})},fe.remove=e=>he({type:4,toastId:e}),fe.promise=(e,t,s)=>{let a=fe.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?oe(t.success,e):void 0;return r?fe.success(r,{id:a,...s,...null==s?void 0:s.success}):fe.dismiss(a),e}).catch(e=>{let r=t.error?oe(t.error,e):void 0;r?fe.error(r,{id:a,...s,...null==s?void 0:s.error}):fe.dismiss(a)}),e};var ye=le`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,je=le`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,be=le`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,we=de("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ye} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${je} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${be} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ve=le`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ne=de("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ve} 1s linear infinite;
`,_e=le`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Se=le`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ke=de("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Se} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,De=de("div")`
  position: absolute;
`,Te=de("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ee=le`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ie=de("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ee} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ze=({toast:e})=>{let{icon:s,type:a,iconTheme:r}=e;return void 0!==s?"string"==typeof s?t.createElement(Ie,null,s):s:"blank"===a?null:t.createElement(Te,null,t.createElement(Ne,{...r}),"loading"!==a&&t.createElement(De,null,"error"===a?t.createElement(we,{...r}):t.createElement(ke,{...r})))},Me=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Ae=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Oe=de("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ce=de("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`;t.memo(({toast:e,position:s,style:a,children:r})=>{let n=e.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=me()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Me(s),Ae(s)];return{animation:t?`${le(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${le(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||s||"top-center",e.visible):{opacity:0},i=t.createElement(ze,{toast:e}),l=t.createElement(Ce,{...e.ariaProps},oe(e.message,e));return t.createElement(Oe,{className:e.className,style:{...n,...a,...e.style}},"function"==typeof r?r({icon:i,message:l}):t.createElement(t.Fragment,null,i,l))}),function(e,t,s,a){se.p=t,Y=e,V=s,W=a}(t.createElement),ie`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Ke=fe;function $e(){const e=p();return h({mutationFn:({targetUserId:e,newRole:t,reason:s})=>async function(e,t,s){const a=await g.auth.getUser();if(!a.data.user)throw new Error("Oturum bulunamadı");const{data:r,error:n}=await g.rpc("change_user_role",{target_user_id:e,new_role:t,changed_by:a.data.user.id});if(n)throw new Error(`Rol değiştirilemedi: ${n.message}`);return s&&await g.from("role_change_logs").update({reason:s}).eq("target_user_id",e).eq("new_role",t).order("created_at",{ascending:!1}).limit(1),r}(e,t,s),onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["user-statistics"]}),e.invalidateQueries({queryKey:["role-change-logs"]})}})}function Fe(){const e=p();return h({mutationFn:({userId:e,profileData:t})=>async function(e,t){const{data:s,error:a}=await g.from("user_profiles").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(a)throw new Error(`Profil güncellenemedi: ${a.message}`);return s}(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["current-user-permissions"]})}})}function Be(){const e=p();return h({mutationFn:({userId:e,isActive:t})=>async function(e,t){const{error:s}=await g.from("user_profiles").update({is_active:t,updated_at:(new Date).toISOString()}).eq("id",e);if(s)throw new Error(`Kullanıcı durumu değiştirilemedi: ${s.message}`)}(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["user-statistics"]})}})}function qe(){const[e,s]=t.useState(""),[a,r]=t.useState("");t.useEffect(()=>{const t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e]);const n=x({queryKey:["user-search",a],queryFn:()=>async function(e){const{data:t,error:s}=await g.from("user_management_view").select("*").or(`email.ilike.%${e}%,full_name.ilike.%${e}%,department.ilike.%${e}%`).order("created_at",{ascending:!1});if(s)throw new Error(`Arama yapılamadı: ${s.message}`);return t||[]}(a),enabled:a.length>2,staleTime:3e4});return{searchQuery:e,setSearchQuery:s,searchResults:n.data||[],isSearching:n.isFetching,searchError:n.error}}function Ue(){const e=x({queryKey:["users"],queryFn:P,staleTime:3e5,retry:2}),s=x({queryKey:["current-user-permissions"],queryFn:H,staleTime:6e5,retry:1}),a=x({queryKey:["user-statistics"],queryFn:L,staleTime:3e5,retry:2}),r=$e(),n=Fe(),i=Be(),l=qe(),[d,o]=t.useState(null),[c,m]=t.useState(!1),[u,p]=t.useState(!1);return{users:e.data||[],permissions:s.data,statistics:a.data,selectedUser:d,isLoading:e.isLoading||s.isLoading,isUpdating:r.isPending||n.isPending||i.isPending,error:e.error||s.error||a.error,showRoleModal:c,showProfileModal:u,handleRoleChange:async(e,t,s)=>{try{return await r.mutateAsync({targetUserId:e,newRole:t,reason:s}),m(!1),o(null),{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Bilinmeyen hata"}}},handleProfileUpdate:async(e,t)=>{try{return await n.mutateAsync({userId:e,profileData:t}),p(!1),o(null),{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Bilinmeyen hata"}}},handleStatusToggle:async(e,t)=>{try{return await i.mutateAsync({userId:e,isActive:t}),{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Bilinmeyen hata"}}},selectUserForRoleChange:e=>{o(e),m(!0)},selectUserForProfileEdit:e=>{o(e),p(!0)},closeModals:()=>{m(!1),p(!1),o(null)},search:l,refetchUsers:e.refetch,refetchStatistics:a.refetch,refetchPermissions:s.refetch}}function Pe({selectedUserIds:s,onSelectionChange:a,placeholder:r="Kullanıcı ara...",excludeUserIds:n=[],maxSelections:i,className:l=""}){const[d,o]=t.useState(""),[c,m]=t.useState(!1),{users:u,isLoading:x,search:p}=Ue();t.useEffect(()=>{d.trim()&&p.setSearchQuery(d)},[d,p]);const h=u.filter(e=>!!d.trim()&&(!n.includes(e.id)&&(e.full_name?.toLowerCase().includes(d.toLowerCase())||e.email?.toLowerCase().includes(d.toLowerCase())))),g=u.filter(e=>s.includes(e.id));return e.jsxs("div",{className:`relative ${l}`,children:[g.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.map(t=>e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:[e.jsx(f,{className:"h-3 w-3"}),e.jsx("span",{children:t.full_name||t.email}),e.jsx("button",{type:"button",onClick:()=>{return e=t.id,void a(s.filter(t=>t!==e));var e},className:"hover:bg-blue-200 rounded p-0.5",children:e.jsx(y,{className:"h-3 w-3"})})]},t.id))}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:d,onChange:e=>o(e.target.value),onFocus:()=>m(!0),onBlur:()=>setTimeout(()=>m(!1),200),placeholder:r,className:"w-full pl-10 pr-4 py-2 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"})]}),c&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[x&&e.jsxs("div",{className:"p-3 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mx-auto"}),e.jsx("span",{className:"ml-2",children:"Aranıyor..."})]}),!x&&0===h.length&&d&&e.jsx("div",{className:"p-3 text-center text-gray-500",children:"Kullanıcı bulunamadı"}),!x&&0===h.length&&!d&&e.jsx("div",{className:"p-3 text-center text-gray-500",children:"Aramaya başlamak için yazın"}),!x&&h.map(t=>{const r=s.includes(t.id),n=Boolean(i&&!r&&s.length>=i);return e.jsxs("button",{type:"button",onClick:()=>{return!n&&(e=t.id,void(s.includes(e)?a(s.filter(t=>t!==e)):(!i||s.length<i)&&a([...s,e])));var e},disabled:n,className:`w-full flex items-center gap-3 p-3 text-left hover:bg-gray-50 transition-colors ${r?"bg-blue-50 text-blue-700":""} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:t.full_name||t.email,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(f,{className:"h-4 w-4 text-gray-500"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:t.full_name||"İsimsiz Kullanıcı"}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:t.email})]}),r&&e.jsx(b,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]},t.id)})]})]}),i&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.length," / ",i," kullanıcı seçildi"]})]})}const He=(e,t)=>{const s=e?.message||`Error in ${t}`;throw w.error(s),new Error(s)},Le={async getMeetings(){try{return[{id:"1",title:"Aylık Genel Kurul Toplantısı",description:"Dernek faaliyetlerinin değerlendirildiği aylık toplantı",start_date:new Date(Date.now()+1728e5).toISOString(),end_date:new Date(Date.now()+1728e5+72e5).toISOString(),location:"Dernek Merkezi - Konferans Salonu",meeting_type:"physical",status:"scheduled",created_by:"user1",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"2",title:"Bütçe Planlama Toplantısı",description:"2024 yılı bütçe planlama ve değerlendirme toplantısı",start_date:new Date(Date.now()+432e6).toISOString(),end_date:new Date(Date.now()+432e6+108e5).toISOString(),meeting_type:"online",meeting_url:"https://meet.google.com/abc-def-ghi",status:"scheduled",created_by:"user2",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"3",title:"Proje Koordinasyon Toplantısı",description:"Devam eden projelerin koordinasyonu",start_date:new Date(Date.now()-864e5).toISOString(),end_date:new Date(Date.now()-864e5+54e5).toISOString(),location:"Zoom Toplantısı",meeting_type:"hybrid",meeting_url:"https://zoom.us/j/123456789",status:"completed",created_by:"user3",created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:(new Date).toISOString()}]}catch(e){return He(e,"getMeetings"),[]}},async getMeeting(e){try{return(await this.getMeetings()).find(t=>t.id===e)||null}catch(t){return He(t,"getMeeting"),null}},async createMeeting(e){try{const t={id:`meeting_${Date.now()}`,title:e.title,description:e.description,start_date:e.start_date,end_date:e.end_date,location:e.location,meeting_type:e.meeting_type,meeting_url:e.meeting_url,status:"scheduled",created_by:"current_user",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return w.success("Toplantı başarıyla oluşturuldu"),t}catch(t){throw He(t,"createMeeting"),t}},async updateMeeting(e,t){try{const s=(await this.getMeetings()).find(t=>t.id===e);if(!s)throw new Error("Toplantı bulunamadı");const a={...s,...t,updated_at:(new Date).toISOString()};return w.success("Toplantı başarıyla güncellendi"),a}catch(s){throw He(s,"updateMeeting"),s}},async deleteMeeting(e){try{w.success("Toplantı başarıyla silindi")}catch(t){throw He(t,"deleteMeeting"),t}},async getAttendees(e){try{return[{id:"1",meeting_id:e,user_id:"user1",status:"accepted",response_date:(new Date).toISOString(),notes:"Katılacağım"},{id:"2",meeting_id:e,user_id:"user2",status:"invited",notes:""},{id:"3",meeting_id:e,user_id:"user3",status:"declined",response_date:new Date(Date.now()-864e5).toISOString(),notes:"Başka bir toplantım var"}]}catch(t){return He(t,"getAttendees"),[]}},async addAttendee(e,t){try{const s={id:`attendee_${Date.now()}`,meeting_id:e,user_id:t,status:"invited"};return w.success("Katılımcı eklendi"),s}catch(s){throw He(s,"addAttendee"),s}},async updateAttendeeStatus(e,t,s){try{w.success("Katılım durumu güncellendi")}catch(a){throw He(a,"updateAttendeeStatus"),a}},async getAgenda(e){try{return[{id:"1",meeting_id:e,title:"Açılış ve Katılımcı Tanıtımı",description:"Toplantının açılışı ve katılımcıların tanıtımı",duration_minutes:15,order_index:1,presenter_id:"user1"},{id:"2",meeting_id:e,title:"Geçen Ay Faaliyetlerinin Değerlendirilmesi",description:"Önceki dönem faaliyetlerinin detaylı incelenmesi",duration_minutes:30,order_index:2,presenter_id:"user2"},{id:"3",meeting_id:e,title:"Yeni Projeler ve Öneri Sunumları",description:"Gelecek dönem için planlanan projeler",duration_minutes:45,order_index:3,presenter_id:"user3"}].sort((e,t)=>e.order_index-t.order_index)}catch(t){return He(t,"getAgenda"),[]}},async addAgendaItem(e){try{const t={id:`agenda_${Date.now()}`,...e};return w.success("Gündem maddesi eklendi"),t}catch(t){throw He(t,"addAgendaItem"),t}},async updateAgendaItem(e,t){try{w.success("Gündem maddesi güncellendi")}catch(s){throw He(s,"updateAgendaItem"),s}},async deleteAgendaItem(e){try{w.success("Gündem maddesi silindi")}catch(t){throw He(t,"deleteAgendaItem"),t}},async getMinutes(e){try{return[{id:"1",meeting_id:e,content:"Toplantı saat 14:00'da başladı. Tüm katılımcılar mevcut.",created_by:"user1",created_at:(new Date).toISOString()}]}catch(t){return He(t,"getMinutes"),[]}},async addMinutes(e,t){try{const s={id:`minutes_${Date.now()}`,meeting_id:e,content:t,created_by:"current_user",created_at:(new Date).toISOString()};return w.success("Tutanak eklendi"),s}catch(s){throw He(s,"addMinutes"),s}},async getActionItems(e){try{return[{id:"1",meeting_id:e,title:"Bütçe raporu hazırlama",description:"Bir sonraki toplantı için detaylı bütçe raporu hazırlanacak",assigned_to:"user2",due_date:new Date(Date.now()+6048e5).toISOString(),status:"pending",created_at:(new Date).toISOString()},{id:"2",meeting_id:e,title:"Proje önerilerini gözden geçirme",description:"Sunulan proje önerilerinin teknik değerlendirmesi",assigned_to:"user3",due_date:new Date(Date.now()+2592e5).toISOString(),status:"in_progress",created_at:(new Date).toISOString()}]}catch(t){return He(t,"getActionItems"),[]}},async addActionItem(e){try{const t={id:`action_${Date.now()}`,...e,created_at:(new Date).toISOString()};return w.success("Eylem maddesi eklendi"),t}catch(t){throw He(t,"addActionItem"),t}},async updateActionItemStatus(e,t){try{w.success("Eylem durumu güncellendi")}catch(s){throw He(s,"updateActionItemStatus"),s}}},Ge=d({title:c().min(1,"Toplantı başlığı zorunludur"),description:c().optional(),start_date:c().min(1,"Başlangıç tarihi zorunludur"),end_date:c().min(1,"Bitiş tarihi zorunludur"),location:c().optional(),meeting_type:m(["physical","online","hybrid"]),meeting_url:c().url("Geçerli bir URL giriniz").optional().or(u("")),attendees:o(c()).optional()}).refine(e=>{const t=new Date(e.start_date);return new Date(e.end_date)>t},{message:"Bitiş tarihi başlangıç tarihinden sonra olmalıdır",path:["end_date"]});function Qe({onSuccess:r,onCancel:n,initialData:i,isEditMode:d=!1,meetingId:o}){const[c,m]=t.useState(!1),[u,x]=t.useState(i?.attendee_ids||[]),{user:p}=v(),{register:h,handleSubmit:g,watch:f,formState:{errors:j}}=l({resolver:R(Ge),defaultValues:{title:i?.title||"",description:i?.description||"",start_date:i?.start_date?new Date(i.start_date).toISOString().slice(0,16):"",end_date:i?.end_date?new Date(i.end_date).toISOString().slice(0,16):"",location:i?.location||"",meeting_type:i?.meeting_type||"physical",meeting_url:i?.meeting_url||"",attendees:u}}),b=f("meeting_type");return e.jsxs(s,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:d?"Toplantı Düzenle":"Yeni Toplantı Oluştur"}),n&&e.jsx(a,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(y,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:g(async e=>{m(!0);try{const t={title:e.title,description:e.description,start_date:new Date(e.start_date).toISOString(),end_date:new Date(e.end_date).toISOString(),location:e.location,meeting_type:e.meeting_type,meeting_url:e.meeting_url,status:"scheduled",created_by:p?.id||"",attendee_ids:u};d&&o?(await Le.updateMeeting(o,t),w.success("Toplantı güncellendi")):(await Le.createMeeting(t),w.success("Toplantı oluşturuldu")),r?.()}catch(t){w.error(d?"Toplantı güncellenirken hata oluştu":"Toplantı oluşturulurken hata oluştu")}finally{m(!1)}}),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Toplantı Başlığı *"}),e.jsx("input",{...h("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı başlığını giriniz"}),j.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),e.jsx("textarea",{...h("description"),rows:3,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı açıklamasını giriniz"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium mb-2",children:[e.jsx(N,{className:"h-4 w-4 inline mr-2"}),"Başlangıç Tarihi *"]}),e.jsx("input",{...h("start_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),j.start_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.start_date.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium mb-2",children:[e.jsx(_,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi *"]}),e.jsx("input",{...h("end_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),j.end_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.end_date.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meeting_type",className:"block text-sm font-medium mb-2",children:"Toplantı Türü *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...h("meeting_type"),type:"radio",value:"physical",className:"mr-2"}),e.jsx(S,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{children:"Fiziksel"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...h("meeting_type"),type:"radio",value:"online",className:"mr-2"}),e.jsx(k,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Online"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...h("meeting_type"),type:"radio",value:"hybrid",className:"mr-2"}),e.jsx(S,{className:"h-4 w-4 mr-1 text-green-500"}),e.jsx(k,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Hibrit"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-2",children:"online"===b?"Toplantı Linki":"Konum"}),"online"===b?e.jsx("input",{...h("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"https://zoom.us/j/123456789"}):e.jsx("input",{...h("location"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı konumunu giriniz"}),"hybrid"===b&&e.jsx("div",{className:"mt-2",children:e.jsx("input",{...h("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Online katılım linki (opsiyonel)"})}),j.meeting_url&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.meeting_url.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(D,{className:"h-4 w-4 inline mr-2"}),"Katılımcılar"]}),e.jsx(Pe,{selectedUserIds:u,onSelectionChange:e=>{x(e)},placeholder:"Katılımcı ara ve seç...",excludeUserIds:p?.id?[p.id]:[]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n&&e.jsx(a,{type:"button",variant:"outline",onClick:n,children:"İptal"}),e.jsxs(a,{type:"submit",disabled:c,children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),c?"Kaydediliyor...":d?"Güncelle":"Oluştur"]})]})]})]})}function Re({meetingId:r,isOpen:n,onClose:i,onEdit:l,onDelete:d}){const[o,c]=t.useState(null),[m,u]=t.useState([]),[x,p]=t.useState([]),[h,g]=t.useState([]),[f,j]=t.useState([]),[b,w]=t.useState(!1),[F,B]=t.useState("details"),[P,H]=t.useState(""),[L,G]=t.useState(!1),[Q,R]=t.useState({title:"",description:"",assigned_to:"",due_date:""}),[Y,V]=t.useState(!1),{user:W}=v();t.useEffect(()=>{n&&r&&Z()},[n,r]);const Z=async()=>{w(!0);try{const[e,t,s,a,n]=await Promise.all([Le.getMeeting(r),Le.getAttendees(r),Le.getAgenda(r),Le.getMinutes(r),Le.getActionItems(r)]);c(e),u(t),p(s),g(a),j(n)}catch(e){Ke.error("Toplantı bilgileri yüklenirken hata oluştu")}finally{w(!1)}},J=async e=>{if(o&&W)try{await Le.updateAttendeeStatus("temp_id",e),Ke.success("Katılım durumunuz güncellendi"),Z()}catch(t){Ke.error("Katılım durumu güncellenirken hata oluştu")}},X=async(e,t)=>{try{await Le.updateActionItemStatus(e,t),j(s=>s.map(s=>s.id===e?{...s,status:t}:s))}catch(s){Ke.error("Eylem durumu güncellenirken hata oluştu")}};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Toplantı Detayları"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o&&e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>l?.(o),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),e.jsxs(a,{size:"sm",variant:"outline",onClick:async()=>{if(o&&window.confirm("Bu toplantıyı silmek istediğinizden emin misiniz?"))try{await Le.deleteMeeting(r),Ke.success("Toplantı silindi"),d?.(r),i()}catch(e){Ke.error("Toplantı silinirken hata oluştu")}},className:"text-red-600 hover:text-red-700",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Sil"]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(y,{className:"h-4 w-4"})})]})]}),b?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):o?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"details",label:"Detaylar",icon:z},{id:"attendees",label:"Katılımcılar",icon:D,count:m.length},{id:"agenda",label:"Gündem",icon:N,count:x.length},{id:"minutes",label:"Tutanak",icon:M,count:h.length},{id:"actions",label:"Eylemler",icon:A,count:f.length}].map(t=>e.jsxs("button",{onClick:()=>B(t.id),className:"flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap "+(F===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[e.jsx(t.icon,{className:"h-4 w-4 mr-2"}),t.label,void 0!==t.count&&e.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:t.count})]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["details"===F&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(s,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:o.title}),o.description&&e.jsx("p",{className:"text-muted-foreground mb-4",children:o.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:q(new Date(o.start_date),"dd MMMM yyyy",{locale:U})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[q(new Date(o.start_date),"HH:mm")," - ",q(new Date(o.end_date),"HH:mm")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:["online"===o.meeting_type?e.jsx(k,{className:"h-4 w-4 text-blue-500"}):"hybrid"===o.meeting_type?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 text-green-500"}),e.jsx(k,{className:"h-4 w-4 text-blue-500"})]}):e.jsx(S,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"capitalize",children:"physical"===o.meeting_type?"Fiziksel":"online"===o.meeting_type?"Online":"Hibrit"})]}),o.location&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:o.location})]})]}),o.meeting_url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:o.meeting_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 underline",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Toplantıya Katıl"]})}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("scheduled"===o.status?"bg-blue-100 text-blue-800":"ongoing"===o.status?"bg-green-100 text-green-800":"completed"===o.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:"scheduled"===o.status?"Planlandı":"ongoing"===o.status?"Devam Ediyor":"completed"===o.status?"Tamamlandı":"İptal Edildi"})})]}),"scheduled"===o.status&&e.jsxs(s,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Katılım Durumunuz"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>J("accepted"),className:"text-green-600 hover:text-green-700",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Katılacağım"]}),e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>J("declined"),className:"text-red-600 hover:text-red-700",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Katılamayacağım"]}),e.jsx(a,{size:"sm",variant:"outline",onClick:()=>J("maybe"),children:"Belki"})]})]})]}),"attendees"===F&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Katılımcılar (",m.length,")"]}),e.jsxs(a,{size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Katılımcı Ekle"]})]}),e.jsx("div",{className:"grid gap-3",children:m.map(t=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Kullanıcı ",t.user_id]}),t.notes&&e.jsx("div",{className:"text-sm text-muted-foreground",children:t.notes}),t.response_date&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Yanıt: ",q(new Date(t.response_date),"dd MMM HH:mm",{locale:U})]})]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("accepted"===t.status?"bg-green-100 text-green-800":"declined"===t.status?"bg-red-100 text-red-800":"maybe"===t.status?"bg-yellow-100 text-yellow-800":"attended"===t.status?"bg-blue-100 text-blue-800":(t.status,"bg-gray-100 text-gray-800")),children:"accepted"===t.status?"Kabul Etti":"declined"===t.status?"Reddetti":"maybe"===t.status?"Belki":"attended"===t.status?"Katıldı":"absent"===t.status?"Katılmadı":"Davet Edildi"})]})},t.id))})]}),"agenda"===F&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Gündem (",x.length," madde)"]}),e.jsxs(a,{size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Gündem Ekle"]})]}),x.length>0?e.jsx("div",{className:"space-y-3",children:x.map((t,a)=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium",children:a+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-lg",children:t.title}),t.description&&e.jsx("p",{className:"text-muted-foreground mt-2",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[t.duration_minutes&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),t.duration_minutes," dakika"]}),t.presenter_id&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"Sunan: Kullanıcı ",t.presenter_id]})]})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz gündem maddesi eklenmemiş"})]})]}),"minutes"===F&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Toplantı Tutanağı"}),!L&&e.jsxs(a,{size:"sm",onClick:()=>G(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Tutanak Ekle"]})]}),L&&e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:P,onChange:e=>H(e.target.value),placeholder:"Tutanak metni...",className:"w-full h-32 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",onClick:async()=>{if(P.trim())try{const e=await Le.addMinutes(r,P);g(t=>[...t,e]),H(""),G(!1),Ke.success("Tutanak eklendi")}catch(e){Ke.error("Tutanak eklenirken hata oluştu")}},children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(a,{size:"sm",variant:"outline",onClick:()=>{G(!1),H("")},children:"İptal"})]})]})}),h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(t=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:q(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:U})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Yazan: Kullanıcı ",t.created_by]})]}),e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:t.content})]})},t.id))}):!L&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz tutanak eklenmemiş"})]})]}),"actions"===F&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Eylem Maddeleri"}),!Y&&e.jsxs(a,{size:"sm",onClick:()=>V(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Eylem Ekle"]})]}),Y&&e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:Q.title,onChange:e=>R(t=>({...t,title:e.target.value})),placeholder:"Eylem başlığı...",className:"w-full p-3 border rounded-md"}),e.jsx("textarea",{value:Q.description,onChange:e=>R(t=>({...t,description:e.target.value})),placeholder:"Açıklama...",className:"w-full h-20 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:Q.assigned_to,onChange:e=>R(t=>({...t,assigned_to:e.target.value})),placeholder:"Atanan kişi ID...",className:"p-3 border rounded-md"}),e.jsx("input",{type:"date",value:Q.due_date,onChange:e=>R(t=>({...t,due_date:e.target.value})),className:"p-3 border rounded-md"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",onClick:async()=>{if(Q.title.trim()&&Q.assigned_to)try{const e={meeting_id:r,title:Q.title,description:Q.description||void 0,assigned_to:Q.assigned_to,due_date:Q.due_date||void 0,status:"pending"},t=await Le.addActionItem(e);j(e=>[...e,t]),R({title:"",description:"",assigned_to:"",due_date:""}),V(!1),Ke.success("Eylem maddesi eklendi")}catch(e){Ke.error("Eylem maddesi eklenirken hata oluştu")}},children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(a,{size:"sm",variant:"outline",onClick:()=>{V(!1),R({title:"",description:"",assigned_to:"",due_date:""})},children:"İptal"})]})]})}),f.length>0?e.jsx("div",{className:"space-y-3",children:f.map(t=>e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===t.status?"bg-green-100 text-green-800":"in_progress"===t.status?"bg-blue-100 text-blue-800":"cancelled"===t.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:"completed"===t.status?"Tamamlandı":"in_progress"===t.status?"Devam Ediyor":"cancelled"===t.status?"İptal Edildi":"Bekliyor"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Atanan: Kullanıcı ",t.assigned_to]}),t.due_date&&e.jsxs("span",{children:["Son Tarih: ",q(new Date(t.due_date),"dd MMM yyyy",{locale:U})]})]}),"completed"!==t.status&&e.jsxs("div",{className:"flex space-x-1",children:["pending"===t.status&&e.jsx(a,{size:"sm",variant:"outline",onClick:()=>X(t.id,"in_progress"),children:"Başlat"}),e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>X(t.id,"completed"),className:"text-green-600 hover:text-green-700",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Tamamla"]})]})]})]})},t.id))}):!Y&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz eylem maddesi eklenmemiş"})]})]})]})]}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Toplantı bulunamadı"})]})}):null}const Ye=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[r,n]=t.useState([]),[i,l]=t.useState(!0),[d,o]=t.useState(""),[c,m]=t.useState("all"),[u,x]=t.useState(!1),[p,h]=t.useState(null),[g,f]=t.useState(!1),[y,b]=t.useState(null);t.useEffect(()=>{w()},[]);const w=async()=>{l(!0);try{const e=await Le.getMeetings();n(e)}catch(e){Ke.error("Toplantılar yüklenirken hata oluştu")}finally{l(!1)}},v=()=>{x(!1),b(null),w()},T=r.filter(e=>{const t=e.title.toLowerCase().includes(d.toLowerCase())||e.description?.toLowerCase().includes(d.toLowerCase()),s="all"===c||e.status===c;return t&&s}),E={total:r.length,thisWeek:r.filter(e=>{const t=new Date(e.start_date),s=new Date,a=new Date(s.setDate(s.getDate()-s.getDay())),r=new Date(a.getTime()+6048e5);return t>=a&&t<r}).length,ongoing:r.filter(e=>"ongoing"===e.status).length,completed:r.filter(e=>"completed"===e.status).length};return u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(a,{variant:"outline",onClick:()=>{x(!1),b(null)},children:"← Geri"}),e.jsx("h1",{className:"text-3xl font-bold",children:y?"Toplantı Düzenle":"Yeni Toplantı"})]}),e.jsx(Qe,{onSuccess:v,onCancel:()=>{x(!1),b(null)},initialData:y||void 0,isEditMode:!!y,meetingId:y?.id})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Toplantılar"}),e.jsx("p",{className:"text-muted-foreground",children:"Toplantı planlama ve yönetimi"})]}),e.jsxs(a,{onClick:()=>x(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Yeni Toplantı"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Toplantı"}),e.jsx("p",{className:"text-2xl font-bold",children:E.total})]}),e.jsx(N,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bu Hafta"}),e.jsx("p",{className:"text-2xl font-bold",children:E.thisWeek})]}),e.jsx(_,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),e.jsx("p",{className:"text-2xl font-bold",children:E.ongoing})]}),e.jsx(D,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(s,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),e.jsx("p",{className:"text-2xl font-bold",children:E.completed})]}),e.jsx(N,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Toplantı ara...",value:d,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:c,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"scheduled",children:"Planlandı"}),e.jsx("option",{value:"ongoing",children:"Devam Ediyor"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),e.jsxs(a,{variant:"outline",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Toplantılar yükleniyor..."})]}):e.jsx(s,{className:"overflow-hidden",children:T.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Toplantı"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Tarih & Saat"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Tür & Konum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),e.jsx("tbody",{children:T.map(t=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.title}),t.description&&e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:t.description})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:q(new Date(t.start_date),"dd MMM yyyy",{locale:U})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[q(new Date(t.start_date),"HH:mm")," - ",q(new Date(t.end_date),"HH:mm")]})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:["online"===t.meeting_type?e.jsx(k,{className:"h-4 w-4 text-blue-500"}):"hybrid"===t.meeting_type?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 text-green-500"}),e.jsx(k,{className:"h-4 w-4 text-blue-500"})]}):e.jsx(S,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"capitalize",children:"physical"===t.meeting_type?"Fiziksel":"online"===t.meeting_type?"Online":"Hibrit"}),t.location&&e.jsx("div",{className:"text-sm text-muted-foreground",children:t.location})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("scheduled"===t.status?"bg-blue-100 text-blue-800":"ongoing"===t.status?"bg-green-100 text-green-800":"completed"===t.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:"scheduled"===t.status?"Planlandı":"ongoing"===t.status?"Devam Ediyor":"completed"===t.status?"Tamamlandı":"İptal Edildi"})}),e.jsx("td",{className:"p-4",children:e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>(e=>{h(e),f(!0)})(t),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Detaylar"]})})]},t.id))})]})}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:d||"all"!==c?"Arama kriterlerine uygun toplantı bulunamadı":"Henüz toplantı oluşturulmamış"})}),p&&e.jsx(Re,{meetingId:p.id,isOpen:g,onClose:()=>{f(!1),h(null)},onEdit:e=>{b(e),x(!0),f(!1)},onDelete:e=>{n(t=>t.filter(t=>t.id!==e))}})]})}},Symbol.toStringTag,{value:"Module"}));export{Ye as I,Ke as V,G as c,R as t,Ue as u};
