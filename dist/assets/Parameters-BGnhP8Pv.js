import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as a}from"./react-vendor-DCtPEfzS.js";import{e as t,D as s}from"./donations-DMDPGCBk.js";import{M as r}from"./messages-BBXjWSN2.js";import{S as l}from"./aid-DeFRiBQl.js";import{u as i,b as n,s as d,e as o}from"./form-vendor-CfNvelWt.js";import{V as m,t as c}from"./meetings-BPsEwMw_.js";import{l as u,S as x,ap as p,U as y,D as h,p as v,i as g,e as b,R as j,E as f,m as _}from"./auth-aCCa6xWs.js";import"./utils-vendor-DxpoukG0.js";import"./chart-vendor-CNXqmhrW.js";import"./dashboard-xaTgABQW.js";import"./file-vendor-D5NpndWQ.js";import"./state-vendor-rPBjJaR_.js";import"./supabase-vendor-AMUhAiAi.js";const N=n({category:d().min(1,"Kategori seçiniz"),key:d().min(1,"Parametre anahtarı giriniz"),value:d().min(1,"Değer giriniz"),description:d().min(1,"Açıklama giriniz"),data_type:o(["string","number","boolean","json","date"],{message:"Veri tipi seçiniz"}),validation_rules:d().optional(),default_value:d().optional()}),S=["Genel Ayarlar","Yardım Limitleri","Başvuru Ayarları","Bildirim Ayarları","Rapor Ayarları","Güvenlik Ayarları","Entegrasyon Ayarları","İş Akışı Ayarları","Kullanıcı Ayarları","Sistem Ayarları"],w=[{value:"string",label:"Metin"},{value:"number",label:"Sayı"},{value:"boolean",label:"Doğru/Yanlış"},{value:"json",label:"JSON"},{value:"date",label:"Tarih"}];function k(){const[n,d]=a.useState([]),[o,k]=a.useState({totalParameters:0,systemParameters:0,userParameters:0,categories:0}),[D,P]=a.useState(!0),[C,O]=a.useState(""),[A,I]=a.useState("all"),[z,L]=a.useState("all"),[T,K]=a.useState("all"),[V,Y]=a.useState(!1),[E,B]=a.useState(null),[G,J]=a.useState(!1),{register:M,handleSubmit:R,formState:{errors:H},reset:q,watch:U}=i({resolver:c(N)}),$=U("data_type");a.useEffect(()=>{F(),Q()},[]);const F=async()=>{try{const e=[{id:"1",category:"Yardım Limitleri",key:"max_monthly_aid_amount",value:"5000",description:"Aylık maksimum yardım tutarı (TL)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:0,max:50000",default_value:"3000",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"2",category:"Başvuru Ayarları",key:"application_review_period_days",value:"7",description:"Başvuru değerlendirme süresi (gün)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:1,max:30",default_value:"5",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"3",category:"Bildirim Ayarları",key:"email_notifications_enabled",value:"true",description:"E-posta bildirimlerini etkinleştir",data_type:"boolean",is_system:!1,is_editable:!0,validation_rules:"",default_value:"true",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"4",category:"Sistem Ayarları",key:"database_version",value:"1.2.5",description:"Veritabanı şema versiyonu",data_type:"string",is_system:!0,is_editable:!1,validation_rules:"",default_value:"1.0.0",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"system"},{id:"5",category:"Güvenlik Ayarları",key:"session_timeout_minutes",value:"30",description:"Oturum zaman aşımı süresi (dakika)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:5,max:480",default_value:"30",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"6",category:"Genel Ayarlar",key:"organization_name",value:"Yardım Derneği",description:"Organizasyon adı",data_type:"string",is_system:!1,is_editable:!0,validation_rules:"min:2,max:100",default_value:"Yardım Organizasyonu",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"}];d(e)}catch(e){m.error("Parametreler yüklenirken hata oluştu")}finally{P(!1)}},Q=async()=>{try{k({totalParameters:25,systemParameters:8,userParameters:17,categories:10})}catch(e){}},W=a.useMemo(()=>n.filter(e=>{const a=""===C||e.key.toLowerCase().includes(C.toLowerCase())||e.description.toLowerCase().includes(C.toLowerCase())||e.value.toLowerCase().includes(C.toLowerCase())||e.category.toLowerCase().includes(C.toLowerCase()),t="all"===A||e.category===A,s="all"===z||e.data_type===z,r="all"===T||"system"===T&&e.is_system||"user"===T&&!e.is_system,l=G||!e.is_system;return a&&t&&s&&r&&l}),[n,C,A,z,T,G]),X=async(e,a)=>{try{d(t=>t.map(t=>t.id===e?{...t,value:a,updated_at:(new Date).toISOString(),updated_by:"current_user@example.com"}:t)),m.success("Parametre değeri güncellendi")}catch(t){m.error("Parametre güncellenirken hata oluştu")}},Z=e=>{switch(e.data_type){case"boolean":return"true"===e.value?"Evet":"Hayır";case"date":try{return new Date(e.value).toLocaleDateString("tr-TR")}catch{return e.value}case"json":try{return JSON.stringify(JSON.parse(e.value),null,2)}catch{return e.value}default:return e.value}},ee=[{key:"category",header:"Kategori",render:(a,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.category}),t.is_system&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(p,{className:"h-3 w-3 text-red-600"}),e.jsx("span",{className:"text-xs text-red-600",children:"Sistem"})]})]})},{key:"key",header:"Anahtar",render:(a,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm",children:t.key}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})},{key:"value",header:"Değer",render:(a,t)=>e.jsx("div",{className:"max-w-xs",children:t.is_editable&&!t.is_system?e.jsxs("div",{className:"space-y-2",children:["boolean"===t.data_type?e.jsxs("select",{value:t.value,onChange:e=>X(t.id,e.target.value),className:"w-full rounded border px-2 py-1 text-sm",children:[e.jsx("option",{value:"true",children:"Evet"}),e.jsx("option",{value:"false",children:"Hayır"})]}):"json"===t.data_type?e.jsx("textarea",{value:t.value,onChange:e=>X(t.id,e.target.value),className:"w-full rounded border px-2 py-1 text-sm font-mono",rows:3}):e.jsx("input",{type:"number"===t.data_type?"number":"date"===t.data_type?"date":"text",value:t.value,onChange:e=>X(t.id,e.target.value),className:"w-full rounded border px-2 py-1 text-sm"}),t.default_value&&t.value!==t.default_value&&e.jsxs("button",{onClick:()=>(async e=>{try{const a=n.find(a=>a.id===e);a&&a.default_value&&(await X(e,a.default_value),m.success("Parametre varsayılan değere sıfırlandı"))}catch(a){m.error("Parametre sıfırlanırken hata oluştu")}})(t.id),className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800",title:"Varsayılan değere sıfırla",children:[e.jsx(j,{className:"h-3 w-3"}),"Sıfırla"]})]}):e.jsx("div",{className:"text-sm",children:"json"===t.data_type?e.jsx("pre",{className:"text-xs font-mono bg-gray-50 p-2 rounded max-h-20 overflow-auto",children:Z(t)}):e.jsx("span",{className:t.is_system?"text-muted-foreground":"",children:Z(t)})})})},{key:"data_type",header:"Tip",render:(a,t)=>(a=>{const t={string:{label:"Metin",class:"bg-blue-100 text-blue-800"},number:{label:"Sayı",class:"bg-green-100 text-green-800"},boolean:{label:"Boolean",class:"bg-purple-100 text-purple-800"},json:{label:"JSON",class:"bg-orange-100 text-orange-800"},date:{label:"Tarih",class:"bg-pink-100 text-pink-800"}}[a]||{label:a,class:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${t.class}`,children:t.label})})(t.data_type)},{key:"validation",header:"Doğrulama",render:(a,t)=>e.jsxs("div",{children:[t.validation_rules?e.jsx("div",{className:"text-xs font-mono bg-gray-50 p-1 rounded",children:t.validation_rules}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"}),t.default_value&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Varsayılan: ",t.default_value]})]})},{key:"updated_info",header:"Güncelleme",render:(a,t)=>{return e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:(s=t.updated_at,new Date(s).toLocaleString("tr-TR"))}),t.updated_by&&e.jsx("div",{className:"text-xs text-muted-foreground",children:t.updated_by})]});var s}},{key:"actions",header:"İşlemler",render:(a,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"rounded p-1 text-gray-600 hover:bg-gray-50",title:"Detay",children:e.jsx(f,{className:"h-4 w-4"})}),t.is_editable&&e.jsx("button",{onClick:()=>{B(t),Y(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:e.jsx(_,{className:"h-4 w-4"})})]})}];return D?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Yükleniyor..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Parametreler"}),e.jsx("p",{className:"text-muted-foreground",children:"Sistem parametrelerini yönetin ve yapılandırın"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:e=>J(e.target.checked),className:"rounded"}),e.jsx("label",{className:"text-sm",children:"Sistem parametrelerini göster"})]}),e.jsxs("button",{onClick:()=>{B(null),Y(!0)},className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[e.jsx(u,{className:"h-4 w-4"}),"Yeni Parametre"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(l,{title:"Toplam Parametreler",value:o.totalParameters.toString(),icon:x,accentClass:"bg-blue-100"}),e.jsx(l,{title:"Sistem Parametreleri",value:o.systemParameters.toString(),icon:p,accentClass:"bg-red-100"}),e.jsx(l,{title:"Kullanıcı Parametreleri",value:o.userParameters.toString(),icon:y,accentClass:"bg-green-100"}),e.jsx(l,{title:"Kategoriler",value:o.categories.toString(),icon:h,accentClass:"bg-purple-100"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Parametre ara...",value:C,onChange:e=>O(e.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"})]}),e.jsxs("select",{value:A,onChange:e=>I(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Kategoriler"}),S.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("select",{value:z,onChange:e=>L(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Tipler"}),w.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),e.jsxs("select",{value:T,onChange:e=>K(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"system",children:"Sistem Parametreleri"}),e.jsx("option",{value:"user",children:"Kullanıcı Parametreleri"})]}),e.jsxs("button",{onClick:()=>t("parametreler.csv",W),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[e.jsx(g,{className:"h-4 w-4"}),"İndir"]}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[W.length," parametre"]})]}),e.jsx(s,{columns:ee,data:W}),e.jsxs(r,{open:V,onClose:()=>Y(!1),children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:E?"Parametre Düzenle":"Yeni Parametre"}),e.jsx("button",{onClick:()=>Y(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"})]}),e.jsxs("form",{onSubmit:R(async e=>{try{const a={id:Date.now().toString(),...e,is_system:!1,is_editable:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"current_user@example.com"};E?(d(e=>e.map(e=>e.id===E.id?{...a,id:E.id}:e)),m.success("Parametre başarıyla güncellendi")):(d(e=>[a,...e]),m.success("Parametre başarıyla oluşturuldu")),Y(!1),q(),Q()}catch(a){m.error("Parametre kaydedilirken hata oluştu")}}),className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori *"}),e.jsxs("select",{...M("category"),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz..."}),S.map(a=>e.jsx("option",{value:a,children:a},a))]}),H.category&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Veri Tipi *"}),e.jsxs("select",{...M("data_type"),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz..."}),w.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),H.data_type&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.data_type.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parametre Anahtarı *"}),e.jsx("input",{type:"text",...M("key"),className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:"parameter_key_name"}),H.key&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.key.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama *"}),e.jsx("textarea",{...M("description"),rows:2,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Parametrenin açıklaması..."}),H.description&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.description.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Değer *"}),"boolean"===$?e.jsxs("select",{...M("value"),className:"w-full rounded border px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Seçiniz..."}),e.jsx("option",{value:"true",children:"Evet"}),e.jsx("option",{value:"false",children:"Hayır"})]}):"json"===$?e.jsx("textarea",{...M("value"),rows:4,className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:'{"key": "value"}'}):e.jsx("input",{type:"number"===$?"number":"date"===$?"date":"text",...M("value"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Parametre değeri"}),H.value&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.value.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Varsayılan Değer"}),e.jsx("input",{type:"text",...M("default_value"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Varsayılan değer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Doğrulama Kuralları"}),e.jsx("input",{type:"text",...M("validation_rules"),className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:"min:0,max:100 veya required,email"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Örnek: min:0,max:100 veya required,email"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>Y(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[e.jsx(b,{className:"h-4 w-4"}),E?"Güncelle":"Kaydet"]})]})]})]})]})}export{k as default};
