import{j as e}from"./ui-vendor-B8g4ebjc.js";import{r as a,L as n}from"./react-vendor-DCtPEfzS.js";import{e as l,D as i}from"./donations-Cs-DOdlb.js";import{b as t,c as r}from"./pdfExport-CmoZx5Sn.js";import{M as s}from"./messages-BdWFJ_-b.js";import{L as o}from"./LazyQRScannerModal-BGIFPRh2.js";import{s as d,a1 as c,_ as u,i as h,h as m,F as p,Q as x,bg as g,C as y}from"./auth-CY9yrbMl.js";import{A as b,c as v,a as _}from"./AdvancedSearchModal-CJE-RxDg.js";import"./file-vendor-D5NpndWQ.js";import"./utils-vendor-DxpoukG0.js";import"./dashboard-DU4k1qlk.js";import"./state-vendor-rPBjJaR_.js";import"./chart-vendor-CNXqmhrW.js";import"./supabase-vendor-AMUhAiAi.js";import"./sanitization-C_isCIdH.js";import"./purify.es-CC9sp8hv.js";const j=async()=>{const{data:e,error:a}=await d.from("beneficiaries").select("id").order("id",{ascending:!1}).limit(1);return a?1:e&&e.length>0?e[0].id+1:1};function f(){const[f,N]=a.useState(""),[w,S]=a.useState(!1),[C,A]=a.useState(!1),[D,K]=a.useState(!0),[z,T]=a.useState(!1),[B,O]=a.useState([]),[E,G]=a.useState(!1),[$,I]=a.useState(null),[F,Y]=a.useState(!1),[L,P]=a.useState({}),[M,R]=a.useState([]),[U,Q]=a.useState({personal:!0,contact:!1,financial:!1,health:!1,housing:!1,additional:!1,system:!1}),H=_(),V=v(),q={storageKey:"beneficiaries_saved_filters",filters:[{id:"status",label:"Durum",value:"",type:"select",options:[{label:"Aktif",value:"active"},{label:"Pasif",value:"inactive"},{label:"Beklemede",value:"pending"}]},{id:"city",label:"≈ûehir",value:"",type:"select",options:[{label:"ƒ∞stanbul",value:"istanbul"},{label:"Ankara",value:"ankara"},{label:"ƒ∞zmir",value:"izmir"}]},{id:"age",label:"Ya≈ü",value:"",type:"number"},{id:"name",label:"Ad Soyad",value:"",type:"text"}],quickFilters:[{id:"active",label:"Aktif Yararlanƒ±cƒ±lar",value:"active",type:"select"},{id:"pending",label:"Bekleyen Ba≈üvurular",value:"pending",type:"select"}]},J=[{id:"all",name:"T√ºm√º",filters:{},pageType:"beneficiaries",isQuickFilter:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),usageCount:0,lastUsed:(new Date).toISOString()},{id:"active",name:"Aktif",filters:{status:"active"},pageType:"beneficiaries",isQuickFilter:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),usageCount:0,lastUsed:(new Date).toISOString()},{id:"inactive",name:"Pasif",filters:{status:"inactive"},pageType:"beneficiaries",isQuickFilter:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),usageCount:0,lastUsed:(new Date).toISOString()},{id:"pending",name:"Beklemede",filters:{status:"pending"},pageType:"beneficiaries",isQuickFilter:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),usageCount:0,lastUsed:(new Date).toISOString()}],[Z,W]=a.useState({name:"",surname:"",category:"Yetim Ailesi",nationality:"TC",birth_date:"",birth_place:"",identity_no:"",gender:"",marital_status:"",education_level:"",mother_name:"",father_name:"",phone:"",alternative_phone:"",email:"",address:"",city:"",district:"",neighborhood:"",postal_code:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relation:"",monthly_income:"",household_size:"",dependent_count:"",employment_status:"",occupation:"",social_security_no:"",bank_account_no:"",bank_name:"",has_disability:!1,disability_type:"",disability_percentage:"",chronic_illness:"",medication_needs:"",health_insurance:!1,health_insurance_type:"",housing_type:"",monthly_rent:"",room_count:"",has_electricity:!0,has_water:!0,has_gas:!1,has_internet:!1,housing_condition:"",special_needs:"",previous_aid_received:!1,previous_aid_details:"",verification_status:"pending",notes:"",fund_region:"Genel",file_connection:"Doƒürudan Ba≈üvuru",file_number:"",status:"active",mernis_check:!1}),[X,ee]=a.useState({name:"",surname:"",identity_no:""}),ae=a.useCallback(async()=>{K(!0);let e=d.from("beneficiaries").select("*").order("created_at",{ascending:!1});const a=f.trim();a&&(e=e.or(`name.ilike.%${a}%,surname.ilike.%${a}%,identity_no.ilike.%${a}%,phone.ilike.%${a}%,email.ilike.%${a}%,city.ilike.%${a}%,district.ilike.%${a}%`)),Object.entries(L).forEach(([a,n])=>{null!=n&&""!==n&&(Array.isArray(n)&&n.length>0?e=e.in(a,n):"object"==typeof n&&void 0!==n.min&&void 0!==n.max?(null!==n.min&&(e=e.gte(a,n.min)),null!==n.max&&(e=e.lte(a,n.max))):e="object"==typeof n&&n.start&&n.end?e.gte(a,n.start).lte(a,n.end):"string"==typeof n&&("name"===a||"surname"===a||"city"===a||"district"===a)?e.ilike(a,`%${n}%`):e.eq(a,n))});const{data:n,error:l}=await e;l?(c.error("Veriler y√ºklenirken hata olu≈ütu"),O([])):O(n||[]),K(!1)},[f,L]);a.useEffect(()=>{ae()},[ae]);const ne=()=>{W({name:"",surname:"",category:"Yetim Ailesi",nationality:"TC",birth_date:"",birth_place:"",identity_no:"",gender:"",marital_status:"",education_level:"",mother_name:"",father_name:"",phone:"",alternative_phone:"",email:"",address:"",city:"",district:"",neighborhood:"",postal_code:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relation:"",monthly_income:"",household_size:"",dependent_count:"",employment_status:"",occupation:"",social_security_no:"",bank_account_no:"",bank_name:"",has_disability:!1,disability_type:"",disability_percentage:"",chronic_illness:"",medication_needs:"",health_insurance:!1,health_insurance_type:"",housing_type:"",monthly_rent:"",room_count:"",has_electricity:!0,has_water:!0,has_gas:!1,has_internet:!1,housing_condition:"",special_needs:"",previous_aid_received:!1,previous_aid_details:"",verification_status:"pending",notes:"",fund_region:"Genel",file_connection:"Doƒürudan Ba≈üvuru",file_number:"",status:"active",mernis_check:!1}),I(null)},le=()=>{ee({name:"",surname:"",identity_no:""})},ie=(e,a)=>{W(n=>({...n,[e]:a}))},te=e=>{Q(a=>({...a,[e]:!a[e]}))},re=({title:a,isExpanded:n,onToggle:l,children:i})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg mb-4",children:[e.jsxs("button",{type:"button",onClick:l,className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 flex items-center justify-between text-left font-medium text-gray-900 rounded-t-lg",children:[e.jsx("span",{children:a}),n?e.jsx(g,{className:"h-5 w-5"}):e.jsx(y,{className:"h-5 w-5"})]}),n&&e.jsx("div",{className:"p-4 space-y-4",children:i})]}),se=(e,a)=>{ee(n=>({...n,[e]:a}))},oe=()=>{const e=Date.now();return{normal:[{name:"Ahmet",surname:"Yƒ±lmaz",category:"Yetim Ailesi",nationality:"T.C.",birth_date:"1985-03-15",identity_no:`${e}001`,phone:"0532 123 45 67",family_size:4,status:"active"},{name:"Fatma",surname:"Demir",category:"Ya≈ülƒ±",nationality:"T.C.",birth_date:"1950-08-22",identity_no:`${e}002`,phone:"0533 234 56 78",family_size:2,status:"active"},{name:"Mehmet",surname:"Kaya",category:"Engelli",nationality:"T.C.",birth_date:"1978-12-10",identity_no:`${e}003`,phone:"0534 345 67 89",family_size:3,status:"active"}],temporary:[{name:"Ali",surname:"√ñzkan",identity_no:`${e}004`,category:"Muhta√ß Aile",family_size:5,status:"inactive"},{name:"Ay≈üe",surname:"√áelik",identity_no:`${e}005`,category:"Hasta",family_size:1,status:"inactive"}]}},de=[{key:"id",header:"ID",render:(a,l,i)=>e.jsx(n,{className:"text-blue-600 underline",to:`/aid/beneficiaries/${l.id}`,children:(i||0)+1})},{key:"name",header:"Ad Soyad",render:(a,n)=>e.jsxs("span",{children:[n.name," ",n.surname]})},{key:"category",header:"Kategori"},{key:"nationality",header:"Uyruk"},{key:"identity_no",header:"Kimlik No"},{key:"phone",header:"Cep Telefonu"},{key:"city",header:"≈ûehir"},{key:"district",header:"ƒ∞l√ße"},{key:"status",header:"Durum",render:(a,n)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("suspended"===n.status?"bg-orange-100 text-orange-800 border border-orange-200":"active"===n.status?"bg-green-100 text-green-800":"inactive"===n.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:"suspended"===n.status?"üîÑ Ge√ßici":"active"===n.status?"Aktif":"inactive"===n.status?"Pasif":n.status})},{key:"actions",header:"ƒ∞≈ülemler",render:(a,n)=>"suspended"===n.status?e.jsx("button",{onClick:()=>(e=>{W({name:e.name||"",surname:e.surname||"",category:e.category||"Yetim Ailesi",nationality:e.nationality||"TC",birth_date:e.birth_date||"",birth_place:"",identity_no:e.identity_no||"",gender:"",marital_status:"",education_level:"",mother_name:"",father_name:"",phone:e.phone||"",alternative_phone:"",email:e.email||"",address:e.address||"",city:e.city||"",district:e.district||"",neighborhood:"",postal_code:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relation:"",monthly_income:"",household_size:"",dependent_count:"",employment_status:"",occupation:"",social_security_no:"",bank_account_no:"",bank_name:"",has_disability:!1,disability_type:"",disability_percentage:"",chronic_illness:"",medication_needs:"",health_insurance:!1,health_insurance_type:"",housing_type:"",monthly_rent:"",room_count:"",has_electricity:!0,has_water:!0,has_gas:!1,has_internet:!1,housing_condition:"",special_needs:"",previous_aid_received:!1,previous_aid_details:"",verification_status:"pending",notes:"",fund_region:e.fund_region||"Genel",file_connection:e.file_connection||"Doƒürudan Ba≈üvuru",file_number:e.file_number||"",status:e.status||"active",mernis_check:!1}),I(Number(e.id)),S(!0)})(n),className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",children:"Tamamla"}):null}];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-2",children:[e.jsx("input",{value:f,onChange:e=>N(e.target.value),className:"min-w-64 flex-1 rounded border px-2 py-1 text-sm",placeholder:"Ad, Soyad, Kimlik No, Telefon, ≈ûehir, ƒ∞l√ße..."}),e.jsx("button",{className:"rounded bg-green-600 px-3 py-1 text-sm text-white",children:"Ara"}),e.jsxs("button",{onClick:()=>Y(!0),className:"rounded border px-3 py-1 text-sm flex items-center gap-1 "+(Object.keys(L).length>0?"bg-blue-50 border-blue-300 text-blue-700":"hover:bg-gray-50"),children:[e.jsx(u,{className:"w-3 h-3"}),"Geli≈ümi≈ü Filtre",Object.keys(L).length>0&&e.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-1.5 py-0.5 ml-1",children:Object.keys(L).length})]}),Object.keys(L).length>0&&e.jsx("button",{onClick:()=>{P({})},className:"rounded bg-red-100 border border-red-300 text-red-700 px-3 py-1 text-sm hover:bg-red-200",children:"Filtreleri Temizle"}),e.jsx("button",{onClick:()=>S(!0),className:"rounded border px-3 py-1 text-sm",children:"Ekle"}),e.jsx("button",{onClick:()=>A(!0),className:"rounded bg-orange-600 px-3 py-1 text-sm text-white",children:"Ge√ßici Kayƒ±t"}),e.jsx("button",{onClick:async()=>{try{const e="your_supabase_url_here";if(e.includes("your-project"))return void c.error("Supabase URL is still a placeholder - need real project URL");const{data:a,error:n}=await d.from("beneficiaries").select("count").limit(1);n?c.error(`Connection failed: ${n?.message||"Unknown error"}`):c.success("Supabase connection successful!")}catch(e){c.error("Connection test failed")}},className:"rounded bg-gray-600 px-3 py-1 text-sm text-white hover:bg-gray-700",children:"Test DB"}),e.jsx("button",{onClick:async()=>{T(!0);try{const e="your_supabase_url_here";if(!e||!"your_supabase_anon_key_here"||e.includes("your-project")){const e=oe(),a=[...e.normal,...e.temporary].map((e,a)=>({...e,id:`mock-${Date.now()}-${a}`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}));return O(e=>[...e,...a]),void c.success(`${a.length} demo kayƒ±t mock data olarak eklendi (Supabase yapƒ±landƒ±rmasƒ± eksik)`)}const{error:a}=await d.from("beneficiaries").select("count").limit(1);if(a)return void("PGRST116"===a.code||a.message?.includes('relation "beneficiaries" does not exist')?c.error("Beneficiaries tablosu bulunamadƒ±. L√ºtfen veritabanƒ± migrasyonlarƒ±nƒ± √ßalƒ±≈ütƒ±rƒ±n."):a.message?.includes("Invalid API key")||a.message?.includes("JWT")?c.error("Ge√ßersiz API key. L√ºtfen Supabase ayarlarƒ±nƒ± kontrol edin."):a.message?.includes("permission denied")?c.error("Yetki hatasƒ±. L√ºtfen RLS politikalarƒ±nƒ± kontrol edin."):c.error(`Veritabanƒ± baƒülantƒ±sƒ± hatasƒ±: ${a.message||"Bilinmeyen hata"}`));const n=oe(),{data:l,error:i}=await d.from("beneficiaries").insert(n.normal).select(),{data:t,error:r}=await d.from("beneficiaries").insert(n.temporary).select();if(i||r){const e=i||r;if("PGRST116"===e?.code||e?.message?.includes('relation "beneficiaries" does not exist'))return void c.error("Beneficiaries tablosu bulunamadƒ±. Veritabanƒ±nda tablolar olu≈üturulmamƒ±≈ü.");if(e?.message?.includes("Invalid API key")||e?.message?.includes("not found")||"PGRST202"===e?.code){c.error("Veritabanƒ± yapƒ±landƒ±rmasƒ± eksik. L√ºtfen Supabase ayarlarƒ±nƒ± kontrol edin.");const e=[...n.normal,...n.temporary].map((e,a)=>({...e,id:`mock-${Date.now()}-${a}`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}));O(a=>[...a,...e]),c.success(`${e.length} demo kayƒ±t mock data olarak eklendi`)}else{const a=e?.message||e?.details||JSON.stringify(e,null,2)||"Bilinmeyen hata";c.error(`Demo kayƒ±tlar olu≈üturulurken hata olu≈ütu: ${a}`)}}else{const e=(l?.length||0)+(t?.length||0);c.success(`${e} demo kayƒ±t ba≈üarƒ±yla olu≈üturuldu (${l?.length||0} normal, ${t?.length||0} ge√ßici)`),ae()}}catch(e){let a="Bilinmeyen hata";e instanceof Error?a=e.message:"string"==typeof e?a=e:e&&"object"==typeof e&&(a=JSON.stringify(e,null,2)),c.error(`Demo kayƒ±tlar olu≈üturulurken beklenmeyen hata olu≈ütu: ${a}`)}finally{T(!1)}},disabled:z,className:"rounded bg-purple-600 px-3 py-1 text-sm text-white hover:bg-purple-700 disabled:opacity-50",children:z?"Olu≈üturuluyor...":"Demo Kayƒ±t"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>l("ihtiyac-sahipleri.csv",B),className:"rounded bg-blue-600 px-3 py-1 text-sm text-white hover:bg-blue-700 flex items-center gap-1",title:"CSV olarak indir",children:[e.jsx(h,{className:"w-3 h-3"}),"CSV"]}),e.jsxs("button",{onClick:()=>t(B,f.trim()?{search:f.trim()}:void 0),className:"rounded bg-green-600 px-3 py-1 text-sm text-white hover:bg-green-700 flex items-center gap-1",title:"Excel olarak indir",children:[e.jsx(m,{className:"w-3 h-3"}),"Excel"]}),e.jsxs("button",{onClick:()=>r(B,f.trim()?{search:f.trim()}:void 0),className:"rounded bg-red-600 px-3 py-1 text-sm text-white hover:bg-red-700 flex items-center gap-1",title:"PDF olarak indir",children:[e.jsx(p,{className:"w-3 h-3"}),"PDF"]})]}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[B.length," Kayƒ±t"]})]}),D?e.jsx("div",{className:"p-6 text-sm text-muted-foreground",children:"Y√ºkleniyor..."}):e.jsx(i,{columns:de,data:B}),e.jsx(s,{isOpen:w,onClose:()=>{S(!1),ne()},title:$?"ƒ∞htiya√ß Sahibi Bilgilerini Tamamla":"Yeni ƒ∞htiya√ß Sahibi",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>G(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 flex items-center gap-2 shadow-md transition-all duration-200 hover:shadow-lg",children:[e.jsx(x,{className:"w-5 h-5"}),"Tarama"]})}),e.jsx(re,{title:"Temel Bilgiler",isExpanded:U.personal,onToggle:()=>te("personal"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(k,{label:"Kategori *",children:e.jsxs("select",{value:Z.category,onChange:e=>ie("category",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"Yetim Ailesi",children:"Yetim Ailesi"}),e.jsx("option",{value:"Muhta√ß Aile",children:"Muhta√ß Aile"}),e.jsx("option",{value:"Ya≈ülƒ±",children:"Ya≈ülƒ±"}),e.jsx("option",{value:"Engelli",children:"Engelli"}),e.jsx("option",{value:"Hasta",children:"Hasta"})]})}),e.jsx(k,{label:"Ad *",children:e.jsx("input",{value:Z.name,onChange:e=>ie("name",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Ad"})}),e.jsx(k,{label:"Soyad *",children:e.jsx("input",{value:Z.surname,onChange:e=>ie("surname",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Soyad"})}),e.jsx(k,{label:"Uyruk",children:e.jsxs("select",{value:Z.nationality,onChange:e=>ie("nationality",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"TC",children:"T.C."}),e.jsx("option",{value:"Suriye",children:"Suriye"}),e.jsx("option",{value:"Irak",children:"Irak"}),e.jsx("option",{value:"Afganistan",children:"Afganistan"}),e.jsx("option",{value:"Diƒüer",children:"Diƒüer"})]})}),e.jsx(k,{label:"Doƒüum Tarihi",children:e.jsx("input",{type:"date",value:Z.birth_date,onChange:e=>ie("birth_date",e.target.value),className:"w-full rounded border px-2 py-1"})}),e.jsx(k,{label:"Doƒüum Yeri",children:e.jsx("input",{value:Z.birth_place,onChange:e=>ie("birth_place",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Doƒüum yeri"})}),e.jsx(k,{label:"Cinsiyet",children:e.jsxs("select",{value:Z.gender,onChange:e=>ie("gender",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"Erkek",children:"Erkek"}),e.jsx("option",{value:"Kadƒ±n",children:"Kadƒ±n"})]})}),e.jsx(k,{label:"Medeni Durum",children:e.jsxs("select",{value:Z.marital_status,onChange:e=>ie("marital_status",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"Bekar",children:"Bekar"}),e.jsx("option",{value:"Evli",children:"Evli"}),e.jsx("option",{value:"Dul",children:"Dul"}),e.jsx("option",{value:"Bo≈üanmƒ±≈ü",children:"Bo≈üanmƒ±≈ü"})]})}),e.jsx(k,{label:"Eƒüitim Seviyesi",children:e.jsxs("select",{value:Z.education_level,onChange:e=>ie("education_level",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"Okur-yazar deƒüil",children:"Okur-yazar deƒüil"}),e.jsx("option",{value:"ƒ∞lkokul",children:"ƒ∞lkokul"}),e.jsx("option",{value:"Ortaokul",children:"Ortaokul"}),e.jsx("option",{value:"Lise",children:"Lise"}),e.jsx("option",{value:"√úniversite",children:"√úniversite"}),e.jsx("option",{value:"Lisans√ºst√º",children:"Lisans√ºst√º"})]})}),e.jsx(k,{label:"Anne Adƒ±",children:e.jsx("input",{value:Z.mother_name,onChange:e=>ie("mother_name",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Anne adƒ±"})}),e.jsx(k,{label:"Baba Adƒ±",children:e.jsx("input",{value:Z.father_name,onChange:e=>ie("father_name",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Baba adƒ±"})}),e.jsxs("div",{className:"sm:col-span-2 grid grid-cols-[1fr_auto] items-center gap-2",children:[e.jsx(k,{label:"Kimlik No *",children:e.jsx("input",{value:Z.identity_no,onChange:e=>ie("identity_no",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"11 haneli kimlik numarasƒ±"})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm mt-5",children:[e.jsx("input",{type:"checkbox",checked:Z.mernis_check,onChange:e=>ie("mernis_check",e.target.checked)}),"Mernis Kontrol√º Yap"]})]})]})}),e.jsx(re,{title:"ƒ∞leti≈üim Bilgileri",isExpanded:U.contact,onToggle:()=>te("contact"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(k,{label:"Telefon",children:e.jsx("input",{value:Z.phone,onChange:e=>ie("phone",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0555 123 45 67"})}),e.jsx(k,{label:"Alternatif Telefon",children:e.jsx("input",{value:Z.alternative_phone,onChange:e=>ie("alternative_phone",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0555 123 45 67"})}),e.jsx(k,{label:"E-posta",children:e.jsx("input",{type:"email",value:Z.email,onChange:e=>ie("email",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"ornek@email.com"})}),e.jsx(k,{label:"≈ûehir",children:e.jsx("input",{value:Z.city,onChange:e=>ie("city",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"≈ûehir"})}),e.jsx(k,{label:"ƒ∞l√ße",children:e.jsx("input",{value:Z.district,onChange:e=>ie("district",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"ƒ∞l√ße"})}),e.jsx(k,{label:"Mahalle",children:e.jsx("input",{value:Z.neighborhood,onChange:e=>ie("neighborhood",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Mahalle"})}),e.jsx(k,{label:"Posta Kodu",children:e.jsx("input",{value:Z.postal_code,onChange:e=>ie("postal_code",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"34000"})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(k,{label:"Adres",children:e.jsx("textarea",{value:Z.address,onChange:e=>ie("address",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Tam adres",rows:2})})}),e.jsx(k,{label:"Acil Durum ƒ∞leti≈üim Adƒ±",children:e.jsx("input",{value:Z.emergency_contact_name,onChange:e=>ie("emergency_contact_name",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Acil durum ki≈üisi"})}),e.jsx(k,{label:"Acil Durum Telefon",children:e.jsx("input",{value:Z.emergency_contact_phone,onChange:e=>ie("emergency_contact_phone",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0555 123 45 67"})}),e.jsx(k,{label:"Acil Durum Yakƒ±nlƒ±k",children:e.jsxs("select",{value:Z.emergency_contact_relation,onChange:e=>ie("emergency_contact_relation",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"E≈ü",children:"E≈ü"}),e.jsx("option",{value:"Anne",children:"Anne"}),e.jsx("option",{value:"Baba",children:"Baba"}),e.jsx("option",{value:"Karde≈ü",children:"Karde≈ü"}),e.jsx("option",{value:"√áocuk",children:"√áocuk"}),e.jsx("option",{value:"Akraba",children:"Akraba"}),e.jsx("option",{value:"Arkada≈ü",children:"Arkada≈ü"}),e.jsx("option",{value:"Kom≈üu",children:"Kom≈üu"})]})})]})}),e.jsx(re,{title:"Finansal Bilgiler",isExpanded:U.financial,onToggle:()=>te("financial"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(k,{label:"Aylƒ±k Gelir (TL)",children:e.jsx("input",{type:"number",value:Z.monthly_income,onChange:e=>ie("monthly_income",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0"})}),e.jsx(k,{label:"Hane B√ºy√ºkl√ºƒü√º",children:e.jsx("input",{type:"number",value:Z.household_size,onChange:e=>ie("household_size",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"1"})}),e.jsx(k,{label:"Baƒüƒ±mlƒ± Ki≈üi Sayƒ±sƒ±",children:e.jsx("input",{type:"number",value:Z.dependent_count,onChange:e=>ie("dependent_count",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0"})}),e.jsx(k,{label:"ƒ∞stihdam Durumu",children:e.jsxs("select",{value:Z.employment_status,onChange:e=>ie("employment_status",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"√áalƒ±≈üƒ±yor",children:"√áalƒ±≈üƒ±yor"}),e.jsx("option",{value:"ƒ∞≈üsiz",children:"ƒ∞≈üsiz"}),e.jsx("option",{value:"Emekli",children:"Emekli"}),e.jsx("option",{value:"√ñƒürenci",children:"√ñƒürenci"}),e.jsx("option",{value:"Ev hanƒ±mƒ±",children:"Ev hanƒ±mƒ±"}),e.jsx("option",{value:"√áalƒ±≈üamaz durumda",children:"√áalƒ±≈üamaz durumda"})]})}),e.jsx(k,{label:"Meslek",children:e.jsx("input",{value:Z.occupation,onChange:e=>ie("occupation",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Meslek"})}),e.jsx(k,{label:"SGK No",children:e.jsx("input",{value:Z.social_security_no,onChange:e=>ie("social_security_no",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"SGK numarasƒ±"})}),e.jsx(k,{label:"Banka Hesap No",children:e.jsx("input",{value:Z.bank_account_no,onChange:e=>ie("bank_account_no",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"IBAN"})}),e.jsx(k,{label:"Banka Adƒ±",children:e.jsx("input",{value:Z.bank_name,onChange:e=>ie("bank_name",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Banka adƒ±"})})]})}),e.jsx(re,{title:"Saƒülƒ±k Bilgileri",isExpanded:U.health,onToggle:()=>te("health"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.has_disability,onChange:e=>ie("has_disability",e.target.checked)}),"Engel durumu var"]})}),Z.has_disability&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Engel T√ºr√º",children:e.jsxs("select",{value:Z.disability_type,onChange:e=>ie("disability_type",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"Fiziksel",children:"Fiziksel"}),e.jsx("option",{value:"Zihinsel",children:"Zihinsel"}),e.jsx("option",{value:"G√∂rme",children:"G√∂rme"}),e.jsx("option",{value:"ƒ∞≈üitme",children:"ƒ∞≈üitme"}),e.jsx("option",{value:"Konu≈üma",children:"Konu≈üma"}),e.jsx("option",{value:"√áoklu",children:"√áoklu"})]})}),e.jsx(k,{label:"Engel Oranƒ± (%)",children:e.jsx("input",{type:"number",value:Z.disability_percentage,onChange:e=>ie("disability_percentage",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0-100",min:"0",max:"100"})})]}),e.jsx(k,{label:"Kronik Hastalƒ±k",children:e.jsx("input",{value:Z.chronic_illness,onChange:e=>ie("chronic_illness",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Kronik hastalƒ±k varsa belirtiniz"})}),e.jsx(k,{label:"ƒ∞la√ß ƒ∞htiyacƒ±",children:e.jsx("input",{value:Z.medication_needs,onChange:e=>ie("medication_needs",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"D√ºzenli kullanƒ±lan ila√ßlar"})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.health_insurance,onChange:e=>ie("health_insurance",e.target.checked)}),"Saƒülƒ±k sigortasƒ± var"]})}),Z.health_insurance&&e.jsx(k,{label:"Sigorta T√ºr√º",children:e.jsxs("select",{value:Z.health_insurance_type,onChange:e=>ie("health_insurance_type",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"SGK",children:"SGK"}),e.jsx("option",{value:"Ye≈üil Kart",children:"Ye≈üil Kart"}),e.jsx("option",{value:"√ñzel Sigorta",children:"√ñzel Sigorta"}),e.jsx("option",{value:"Diƒüer",children:"Diƒüer"})]})})]})}),e.jsx(re,{title:"Konut Bilgileri",isExpanded:U.housing,onToggle:()=>te("housing"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(k,{label:"Konut T√ºr√º",children:e.jsxs("select",{value:Z.housing_type,onChange:e=>ie("housing_type",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"M√ºlk",children:"M√ºlk"}),e.jsx("option",{value:"Kiralƒ±k",children:"Kiralƒ±k"}),e.jsx("option",{value:"Lojman",children:"Lojman"}),e.jsx("option",{value:"Akraba yanƒ±nda",children:"Akraba yanƒ±nda"}),e.jsx("option",{value:"Barƒ±nak",children:"Barƒ±nak"}),e.jsx("option",{value:"Diƒüer",children:"Diƒüer"})]})}),e.jsx(k,{label:"Aylƒ±k Kira (TL)",children:e.jsx("input",{type:"number",value:Z.monthly_rent,onChange:e=>ie("monthly_rent",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0"})}),e.jsx(k,{label:"Oda Sayƒ±sƒ±",children:e.jsxs("select",{value:Z.room_count,onChange:e=>ie("room_count",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5+",children:"5+"})]})}),e.jsx(k,{label:"Konut Durumu",children:e.jsxs("select",{value:Z.housing_condition,onChange:e=>ie("housing_condition",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Se√ßiniz"}),e.jsx("option",{value:"ƒ∞yi",children:"ƒ∞yi"}),e.jsx("option",{value:"Orta",children:"Orta"}),e.jsx("option",{value:"K√∂t√º",children:"K√∂t√º"}),e.jsx("option",{value:"√áok k√∂t√º",children:"√áok k√∂t√º"})]})}),e.jsxs("div",{className:"sm:col-span-2 grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.has_electricity,onChange:e=>ie("has_electricity",e.target.checked)}),"Elektrik"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.has_water,onChange:e=>ie("has_water",e.target.checked)}),"Su"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.has_gas,onChange:e=>ie("has_gas",e.target.checked)}),"Doƒüalgaz"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.has_internet,onChange:e=>ie("has_internet",e.target.checked)}),"ƒ∞nternet"]})]})]})}),e.jsx(re,{title:"Ek Bilgiler",isExpanded:U.additional,onToggle:()=>te("additional"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsx(k,{label:"√ñzel ƒ∞htiya√ßlar",children:e.jsx("textarea",{value:Z.special_needs,onChange:e=>ie("special_needs",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"√ñzel ihtiya√ßlar, dikkat edilmesi gereken durumlar",rows:2})})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:Z.previous_aid_received,onChange:e=>ie("previous_aid_received",e.target.checked)}),"Daha √∂nce yardƒ±m alƒ±ndƒ±"]})}),Z.previous_aid_received&&e.jsx("div",{className:"sm:col-span-2",children:e.jsx(k,{label:"√ñnceki Yardƒ±m Detaylarƒ±",children:e.jsx("textarea",{value:Z.previous_aid_details,onChange:e=>ie("previous_aid_details",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Hangi kurulu≈ütan, ne t√ºr yardƒ±m alƒ±ndƒ±",rows:2})})}),e.jsx(k,{label:"Doƒürulama Durumu",children:e.jsxs("select",{value:Z.verification_status,onChange:e=>ie("verification_status",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"verified",children:"Doƒürulandƒ±"}),e.jsx("option",{value:"rejected",children:"Reddedildi"}),e.jsx("option",{value:"needs_review",children:"ƒ∞nceleme Gerekli"})]})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(k,{label:"Notlar",children:e.jsx("textarea",{value:Z.notes,onChange:e=>ie("notes",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Ek notlar, a√ßƒ±klamalar",rows:3})})})]})}),e.jsx(re,{title:"Sistem Alanlarƒ±",isExpanded:U.system,onToggle:()=>te("system"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(k,{label:"Fon B√∂lgesi",children:e.jsxs("select",{value:Z.fund_region,onChange:e=>ie("fund_region",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"Genel",children:"Genel"}),e.jsx("option",{value:"√ñzel",children:"√ñzel"}),e.jsx("option",{value:"Acil",children:"Acil"})]})}),e.jsx(k,{label:"Dosya Baƒülantƒ±sƒ±",children:e.jsxs("select",{value:Z.file_connection,onChange:e=>ie("file_connection",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"Partner Kurum",children:"Partner Kurum"}),e.jsx("option",{value:"Doƒürudan Ba≈üvuru",children:"Doƒürudan Ba≈üvuru"}),e.jsx("option",{value:"Sevk",children:"Sevk"})]})}),e.jsx(k,{label:"Dosya Numarasƒ±",children:e.jsx("input",{value:Z.file_number,onChange:e=>ie("file_number",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Dosya numarasƒ±"})}),e.jsx(k,{label:"Durum",children:e.jsxs("select",{value:Z.status,onChange:e=>ie("status",e.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Pasif"}),e.jsx("option",{value:"suspended",children:"Ge√ßici"})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:()=>{S(!1),ne()},className:"px-4 py-2 border rounded hover:bg-gray-50",disabled:z,children:"ƒ∞ptal"}),e.jsx("button",{onClick:async()=>{if(Z.name.trim()&&Z.surname.trim()&&Z.identity_no.trim()){T(!0);try{const e={name:Z.name.trim(),surname:Z.surname.trim(),category:Z.category,nationality:Z.nationality.trim(),birth_date:Z.birth_date||null,identity_no:Z.identity_no.trim(),phone:Z.phone.trim()||null,email:Z.email.trim()||null,address:Z.address.trim()||null,city:Z.city.trim()||null,district:Z.district.trim()||null,status:Z.status,fund_region:Z.fund_region};let a;if($)a=await d.from("beneficiaries").update(e).eq("id",$).select();else{const n=await j(),l={...e,id:n};a=await d.from("beneficiaries").insert([l]).select()}const{error:n}=a;n?c.error("Kayƒ±t sƒ±rasƒ±nda hata olu≈ütu: "+n.message):(c.success($?"ƒ∞htiya√ß sahibi ba≈üarƒ±yla g√ºncellendi":"ƒ∞htiya√ß sahibi ba≈üarƒ±yla kaydedildi"),S(!1),ne(),I(null),ae())}catch(e){c.error("Kayƒ±t sƒ±rasƒ±nda beklenmeyen hata olu≈ütu")}finally{T(!1)}}else c.error("Ad, Soyad ve Kimlik No alanlarƒ± zorunludur")},disabled:z,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50",children:z?"Kaydediliyor...":"Kaydet"})]})]})}),e.jsx(s,{isOpen:C,onClose:()=>{A(!1),le()},title:"Ge√ßici Kayƒ±t",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Ge√ßici Kayƒ±t:"})," Sadece temel bilgiler alƒ±nƒ±r. Detaylar daha sonra tamamlanabilir."]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(k,{label:"Ad *",children:e.jsx("input",{value:X.name,onChange:e=>se("name",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Ad"})}),e.jsx(k,{label:"Soyad *",children:e.jsx("input",{value:X.surname,onChange:e=>se("surname",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Soyad"})}),e.jsx(k,{label:"Kimlik No *",children:e.jsx("input",{value:X.identity_no,onChange:e=>se("identity_no",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"11 haneli kimlik numarasƒ±"})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:()=>{A(!1),le()},className:"px-4 py-2 border rounded hover:bg-gray-50",disabled:z,children:"ƒ∞ptal"}),e.jsx("button",{onClick:async()=>{if(X.name.trim()&&X.surname.trim()&&X.identity_no.trim()){T(!0);try{const e=await j(),{error:a}=await d.from("beneficiaries").insert([{id:e,name:X.name.trim(),surname:X.surname.trim(),identity_no:X.identity_no.trim(),category:"Yetim Ailesi",status:"ge√ßici",fund_region:"Genel",file_connection:"Doƒürudan Ba≈üvuru"}]).select();a?c.error("Ge√ßici kayƒ±t sƒ±rasƒ±nda hata olu≈ütu: "+a.message):(c.success("Ge√ßici kayƒ±t ba≈üarƒ±yla olu≈üturuldu"),A(!1),le(),ae())}catch(e){c.error("Ge√ßici kayƒ±t sƒ±rasƒ±nda beklenmeyen hata olu≈ütu")}finally{T(!1)}}else c.error("Ad, Soyad ve Kimlik No alanlarƒ± zorunludur")},disabled:z,className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 disabled:opacity-50",children:z?"Kaydediliyor...":"Ge√ßici Kaydet"})]})]})}),e.jsx(o,{isOpen:E,onClose:()=>G(!1),onScanSuccess:e=>{e.identity_no&&(W(a=>({...a,identity_no:e.identity_no||"",name:e.name||a.name,surname:e.surname||a.surname,birth_date:e.birth_date||a.birth_date})),c.success("Kimlik bilgileri QR koddan okundu")),G(!1)}}),e.jsx(b,{isOpen:F,onClose:()=>Y(!1),onApplyFilters:e=>{P(e),Y(!1)},onSaveFilter:e=>{const a={...e,id:Date.now().toString(),createdAt:(new Date).toISOString()};R(e=>[...e,a]),c.success("Filtre kaydedildi")},onLoadFilter:e=>{P(e.filters),c.success("Filtre y√ºklendi")},pageType:"beneficiaries",fields:H.fields,dependencies:H.dependencies,groups:H.groups,validationRules:H.validationRules,urlConfig:V,savedFiltersConfig:q,quickFilters:J,savedFilters:M,initialFilters:L})]})}function k({label:a,children:n}){return e.jsxs("label",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:a}),n]})}export{f as default};
